{
  "id": "8ec9d356-cbf2-4892-a66b-e4d2fe98e3db",
  "title": "1972 Unix V2 \"Beta\" Resurrected",
  "link": "https://www.tuhs.org/pipermail/tuhs/2025-February/031420.html",
  "description": "Comments",
  "author": "",
  "published": "Wed, 19 Feb 2025 21:41:07 +0000",
  "source": "https://news.ycombinator.com/rss",
  "categories": null,
  "byline": "",
  "length": 4134,
  "excerpt": "",
  "siteName": "",
  "favicon": "",
  "text": "Yufeng Gao via TUHS tuhs at tuhs.org Tue Feb 18 19:31:55 AEST 2025 Previous message (by thread): [TUHS] Unix page at the Multicians web site. Next message (by thread): [TUHS] 1972 UNIX V2 \"Beta\" Resurrected Messages sorted by: [ date ] [ thread ] [ subject ] [ author ] Hi everyone, First-time poster here. Near the end of last year, I did some forensic analysis on the DMR tapes (https://www.tuhs.org/Archive/Applications/Dennis_Tapes) and had some fun playing around with them. Warren forwarded a few of my emails to this list at the end of last year and the beginning of this year, but it was never my intention for him to be my messenger, so I'm posting here myself now. Here's an update on my work with the s1/s2 tapes - I've managed to get a working system out of them. The s1 tape is a UNIX INIT DECtape containing the kernel, while s2 includes most of the distribution files. The s1 kernel is, to date, the earliest machine-readable UNIX kernel, sitting between V1 and V2. It differs from the unix-jun72 kernel in the following ways: - It supports both V1 and V2 a.outs out of the box, whereas the unmodified unix-jun72 kernel supports only V1. - The core size has been increased to 16 KiB (8K words), while the unmodified unix-jun72 kernel has an 8 KiB (4K word) user core. On the other hand, its syscall table matches that of V1 and the unix-jun72 kernel, lacking all V2 syscalls. Since it aligns with V1 in terms of syscalls, has the V2 core size and can run V2 binaries, I consider it a \"V2 beta\". login: root root # ls -la total 42 41 sdrwrw 7 root 80 Jan 1 00:02:02 . 41 sdrwrw 7 root 80 Jan 1 00:02:02 .. 43 sdrwrw 2 root 620 Jan 1 00:01:30 bin 147 l-rwrw 1 root 16448 Jan 1 00:33:51 core 42 sdrwrw 2 root 250 Jan 1 00:01:51 dev 49 sdrwrw 2 root 110 Jan 1 00:01:55 etc 54 sdrwrw 2 root 50 Jan 1 00:00:52 tmp 55 sdrwrw 7 root 80 Jan 1 00:00:52 usr # ls -la usr total 8 55 sdrwrw 7 root 80 Jan 1 00:00:52 . 41 sdrwrw 7 root 80 Jan 1 00:02:02 .. 56 sdrwrw 2 28 60 Jan 1 00:02:22 fort 57 sdrwrw 2 jack 50 Jan 1 00:02:39 jack 58 sdrwrw 2 6 30 Jan 1 00:02:36 ken 59 sdrwrw 2 root 120 Jan 1 00:00:52 lib 60 sdrwrw 2 sys 50 Jan 1 00:02:45 sys 142 s-rwrw 1 jack 54 Jan 1 00:52:29 x # ed a main() printf(\"hello world!\\n\"); . w hello.c 33 q # cc hello.c I II # ls -l a.out total 3 153 sxrwrw 1 root 1328 Jan 1 00:02:12 a.out # a.out hello world! # It's somewhat picky about the environment. So far, aap's PDP-11/20 emulator (https://github.com/aap/pdp11) is the only one capable of booting the kernel. SIMH and Ersatz-11 both hang before reaching the login prompt. This makes installation from the s1/s2 tapes difficult, as aap's emulator does not support the TC11. The intended installation process involves booting from s1 and restoring files from s2. What I did was I extracted the files from the s1 tape and placed them on an empty RF disk, then installed the unix-jun72 kernel. After booting from the RF under SIMH, I extracted the remaining files from s2. Finally, I replaced the unix-jun72 kernel with the s1 kernel using a hex editor, resulting in an RF disk image containing only files from s1/s2. This RF image is bootable under aap's emulator but not SIMH. The RF disk image can be downloaded from here (https://github.com/TheBrokenPipe/Research-UNIX-V2-Beta): Direct link - https://github.com/TheBrokenPipe/Research-UNIX-V2-Beta/raw/refs/heads/main/s1s2unix_rf.img Interestingly, its init(7) program does not mount the RK to /usr, suggesting that /usr was stored on the RF. Sincerely, Yufeng Previous message (by thread): [TUHS] Unix page at the Multicians web site. Next message (by thread): [TUHS] 1972 UNIX V2 \"Beta\" Resurrected Messages sorted by: [ date ] [ thread ] [ subject ] [ author ] More information about the TUHS mailing list",
  "image": "",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\n   \n    \u003cb\u003eYufeng Gao via TUHS\u003c/b\u003e \n    \u003ca href=\"mailto:tuhs%40www.tuhs.org?Subject=Re%3A%20%5BTUHS%5D%201972%20UNIX%20V2%20%22Beta%22%20Resurrected\u0026amp;In-Reply-To=%3CME3P282MB3716915B2CC8B4AE468D1D26DFF82%40ME3P282MB3716.AUSP282.PROD.OUTLOOK.COM%3E\" title=\"[TUHS] 1972 UNIX V2 \u0026#34;Beta\u0026#34; Resurrected\"\u003etuhs at tuhs.org\n       \u003c/a\u003e\u003cbr/\u003e\n    \u003ci\u003eTue Feb 18 19:31:55 AEST 2025\u003c/i\u003e\n    \u003cul\u003e\n        \u003cli\u003ePrevious message (by thread): \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/031419.html\"\u003e[TUHS] Unix page at the Multicians web site.\n\u003c/a\u003e\u003c/li\u003e\n        \u003cli\u003eNext message (by thread): \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/031421.html\"\u003e[TUHS] 1972 UNIX V2 \u0026#34;Beta\u0026#34; Resurrected\n\u003c/a\u003e\u003c/li\u003e\n         \u003cli\u003e \u003cb\u003eMessages sorted by:\u003c/b\u003e \n              \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/date.html#31420\"\u003e[ date ]\u003c/a\u003e\n              \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/thread.html#31420\"\u003e[ thread ]\u003c/a\u003e\n              \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/subject.html#31420\"\u003e[ subject ]\u003c/a\u003e\n              \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/author.html#31420\"\u003e[ author ]\u003c/a\u003e\n         \u003c/li\u003e\n       \u003c/ul\u003e\n    \u003chr/\u003e  \n\n\u003cpre\u003eHi everyone,\n\nFirst-time poster here. Near the end of last year, I did some forensic analysis on the DMR tapes (\u003ca href=\"https://www.tuhs.org/Archive/Applications/Dennis_Tapes\"\u003ehttps://www.tuhs.org/Archive/Applications/Dennis_Tapes\u003c/a\u003e) and had some fun playing around with them. Warren forwarded a few of my emails to this list at the end of last year and the beginning of this year, but it was never my intention for him to be my messenger, so I\u0026#39;m posting here myself now.\n\nHere\u0026#39;s an update on my work with the s1/s2 tapes - I\u0026#39;ve managed to get a working system out of them. The s1 tape is a UNIX INIT DECtape containing the kernel, while s2 includes most of the distribution files.\n\nThe s1 kernel is, to date, the earliest machine-readable UNIX kernel, sitting between V1 and V2. It differs from the unix-jun72 kernel in the following ways:\n\n- It supports both V1 and V2 a.outs out of the box, whereas the unmodified unix-jun72 kernel supports only V1.\n- The core size has been increased to 16 KiB (8K words), while the unmodified unix-jun72 kernel has an 8 KiB (4K word) user core.\n\nOn the other hand, its syscall table matches that of V1 and the unix-jun72 kernel, lacking all V2 syscalls. Since it aligns with V1 in terms of syscalls, has the V2 core size and can run V2 binaries, I consider it a \u0026#34;V2 beta\u0026#34;.\n\nlogin: root\nroot\n# ls -la\ntotal   42\n 41 sdrwrw  7 root     80 Jan  1 00:02:02 .\n 41 sdrwrw  7 root     80 Jan  1 00:02:02 ..\n 43 sdrwrw  2 root    620 Jan  1 00:01:30 bin\n147 l-rwrw  1 root  16448 Jan  1 00:33:51 core\n 42 sdrwrw  2 root    250 Jan  1 00:01:51 dev\n 49 sdrwrw  2 root    110 Jan  1 00:01:55 etc\n 54 sdrwrw  2 root     50 Jan  1 00:00:52 tmp\n 55 sdrwrw  7 root     80 Jan  1 00:00:52 usr\n# ls -la usr\ntotal    8\n 55 sdrwrw  7 root     80 Jan  1 00:00:52 .\n 41 sdrwrw  7 root     80 Jan  1 00:02:02 ..\n 56 sdrwrw  2  28      60 Jan  1 00:02:22 fort\n 57 sdrwrw  2 jack     50 Jan  1 00:02:39 jack\n 58 sdrwrw  2   6      30 Jan  1 00:02:36 ken\n 59 sdrwrw  2 root    120 Jan  1 00:00:52 lib\n 60 sdrwrw  2 sys      50 Jan  1 00:02:45 sys\n142 s-rwrw  1 jack     54 Jan  1 00:52:29 x\n# ed\na\nmain() printf(\u0026#34;hello world!\\n\u0026#34;);\n.\nw hello.c\n33\nq\n# cc hello.c\nI\nII\n# ls -l a.out\ntotal    3\n153 sxrwrw  1 root   1328 Jan  1 00:02:12 a.out\n# a.out\nhello world!\n#\n\nIt\u0026#39;s somewhat picky about the environment. So far, aap\u0026#39;s PDP-11/20 emulator (\u003ca href=\"https://github.com/aap/pdp11\"\u003ehttps://github.com/aap/pdp11\u003c/a\u003e) is the only one capable of booting the kernel. SIMH and Ersatz-11 both hang before reaching the login prompt. This makes installation from the s1/s2 tapes difficult, as aap\u0026#39;s emulator does not support the TC11. The intended installation process involves booting from s1 and restoring files from s2.\n\nWhat I did was I extracted the files from the s1 tape and placed them on an empty RF disk, then installed the unix-jun72 kernel. After booting from the RF under SIMH, I extracted the remaining files from s2. Finally, I replaced the unix-jun72 kernel with the s1 kernel using a hex editor, resulting in an RF disk image containing only files from s1/s2. This RF image is bootable under aap\u0026#39;s emulator but not SIMH.\n\nThe RF disk image can be downloaded from here (\u003ca href=\"https://github.com/TheBrokenPipe/Research-UNIX-V2-Beta\"\u003ehttps://github.com/TheBrokenPipe/Research-UNIX-V2-Beta\u003c/a\u003e):\nDirect link - \u003ca href=\"https://github.com/TheBrokenPipe/Research-UNIX-V2-Beta/raw/refs/heads/main/s1s2unix_rf.img\"\u003ehttps://github.com/TheBrokenPipe/Research-UNIX-V2-Beta/raw/refs/heads/main/s1s2unix_rf.img\u003c/a\u003e\n\nInterestingly, its init(7) program does not mount the RK to /usr, suggesting that /usr was stored on the RF.\n\nSincerely,\nYufeng\n\u003c/pre\u003e\n\n\n\n    \u003chr/\u003e\n    \u003cul\u003e\n        \n\t\u003cli\u003ePrevious message (by thread): \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/031419.html\"\u003e[TUHS] Unix page at the Multicians web site.\n\u003c/a\u003e\u003c/li\u003e\n\t\u003cli\u003eNext message (by thread): \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/031421.html\"\u003e[TUHS] 1972 UNIX V2 \u0026#34;Beta\u0026#34; Resurrected\n\u003c/a\u003e\u003c/li\u003e\n         \u003cli\u003e \u003cb\u003eMessages sorted by:\u003c/b\u003e \n              \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/date.html#31420\"\u003e[ date ]\u003c/a\u003e\n              \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/thread.html#31420\"\u003e[ thread ]\u003c/a\u003e\n              \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/subject.html#31420\"\u003e[ subject ]\u003c/a\u003e\n              \u003ca href=\"https://www.tuhs.org/pipermail/tuhs/2025-February/author.html#31420\"\u003e[ author ]\u003c/a\u003e\n         \u003c/li\u003e\n       \u003c/ul\u003e\n\n\u003chr/\u003e\n\u003ca href=\"https://www.tuhs.org/cgi-bin/mailman/listinfo/tuhs\"\u003eMore information about the TUHS\nmailing list\u003c/a\u003e\u003cbr/\u003e\n\n\u003c/div\u003e",
  "readingTime": "5 min read",
  "publishedTime": null,
  "modifiedTime": null
}
