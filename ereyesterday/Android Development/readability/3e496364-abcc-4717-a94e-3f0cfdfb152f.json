{
  "id": "3e496364-abcc-4717-a94e-3f0cfdfb152f",
  "title": "Inspektify: KMP network inspection library",
  "link": "https://blog.kotlin-academy.com/inspektify-kmp-network-inspection-library-fab58873cad6?source=rss----e57b304801ef---4",
  "description": "",
  "author": "Blaž Vantur",
  "published": "Mon, 23 Sep 2024 09:38:37 GMT",
  "source": "https://blog.kotlin-academy.com/feed",
  "categories": [
    "ios",
    "android",
    "ktor",
    "kotlin-multiplatform"
  ],
  "byline": "Blaž Vantur",
  "length": 4356,
  "excerpt": "Network communication in mobile applications nowadays is something normal for almost every app. Much of the information presented in our apps is fetched from the network and then shown to the users…",
  "siteName": "Kt. Academy",
  "favicon": "https://miro.medium.com/v2/resize:fill:256:256/1*2grDGjzH0tfX8XiaF4Izaw.png",
  "text": "Network communication in mobile applications nowadays is something normal for almost every app. Much of the information presented in our apps is fetched from the network and then shown to the users in a compelling way. And while we are developing and testing our apps, we usually need some tooling to see what is being fetched from the network and how that is being done. But what if we could change that and enable every team member possibility to see such information at every step of our mobile development process?MEET INSPEKTIFYInspektify is a debug tool for observing the app's real-time network traffic. It enables all team members to access all network details directly on the device where an application is being run. No additional tooling is needed, no development setups on your computers, no need to connect your phone to your computer, no technical knowledge (besides for developers to include lib to the project), or other complex additional steps are needed for this. We can have access to all network information directly on our phones. With minimum library setup all we need to do is to shake our mobile device and a new window is presented with a list of all network communication that happened within the app.TECHNICAL SETUP FOR TECHNICAL PEOPLETo use the Inspektify library, currently, we need to fulfill 3 requirements:It can only be used for KMP projects that support only Android and iOS platforms.The library heavily depends on Ktor, so we need to use the Ktor library for network communication in our project to set up Inspektify.A project consuming this library must have a minimum Ktor version of 2.3.1.If we made a check for all three requirements then we can use Inspektify in our project and we need to do the next steps to include it:Add the mavenCentral() repository to our project if we don’t have it yet.2. Include the library in our commonMain source set.If you are using Ktor version that is below 3.0.0, please use inspektify-ktor2 instead of inspektify-ktor33. Install the Inspektify plugin on our Ktor client.This is a minimum needed setup to include a library in the project. If we want we can also configure the library further with instructions written on the project’s GitHub page here.USAGEWith a minimum setup, we can already use our library directly on our Android and iOS clients. All we need to do is shake our phone and the Inspektify tool window will be presented to us automatically. At first, we will see a list of all network transactions(which are stored in a database), ordered by the date and time. All transactions are grouped by the date with sticky headers We can also easily see which transactions are from the current session and which are from the past sessions. This is visible with the background color of items. If they are a little bit grayed out they are from the past sessions. In the top right corner is a trash icon with which we can remove all the items from the list(and also from the database). For every transaction we can see the next data:Endpoint nameResponse status codeSSL information(only on Android)Host nameA time when a network transaction happenedDuration of network transactionTotal sized transferred between app and serverWe can see more details about the transaction when we click on a single item. Data there is presented with 3 tabs. In the Overview tab, we can see all the general information about the transaction. Then we have the Request and the Response tabs where we see all the headers and payloads sent and received with our app. On the top right corner here we have a copy icon, which copies the whole network transaction to the device’s clipboard, which can be later on used for whatever case we want(sending it through email, slack, discord,….)DISCLAIMERThis is an early library version, so it still needs to be tested with bigger and more complex projects. I hope you will give it a go. There is also a sample project on the GitHub repo, so you can do a quick check there if that is something that could help your development process within your team. If you find any issues, please file them directly on the project GitHub page so they can be investigated.CONCLUSIONThe library is still in beta and I am trying to gather some feedback before it goes to the stable version. I am happy to hear any recommendations or ideas, so don’t hesitate to contact me.",
  "image": "https://miro.medium.com/v2/resize:fit:1200/1*TJhl4wouzVsmTnweg_tjsg.png",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv\u003e\u003cdiv\u003e\u003ca href=\"https://bvantur.medium.com/?source=post_page-----fab58873cad6--------------------------------\" rel=\"noopener follow\"\u003e\u003cdiv aria-hidden=\"false\"\u003e\u003cp\u003e\u003cimg alt=\"Blaž Vantur\" src=\"https://miro.medium.com/v2/resize:fill:88:88/1*rQ0ljsPvkhPKOZ-weWj0tA.jpeg\" width=\"44\" height=\"44\" loading=\"lazy\" data-testid=\"authorPhoto\"/\u003e\u003c/p\u003e\u003c/div\u003e\u003c/a\u003e\u003ca href=\"https://blog.kotlin-academy.com/?source=post_page-----fab58873cad6--------------------------------\" rel=\"noopener  ugc nofollow\"\u003e\u003cdiv aria-hidden=\"false\"\u003e\u003cp\u003e\u003cimg alt=\"Kt. Academy\" src=\"https://miro.medium.com/v2/resize:fill:48:48/1*2grDGjzH0tfX8XiaF4Izaw.png\" width=\"24\" height=\"24\" loading=\"lazy\" data-testid=\"publicationPhoto\"/\u003e\u003c/p\u003e\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003cfigure\u003e\u003c/figure\u003e\u003cp id=\"82b3\"\u003eNetwork communication in mobile applications nowadays is something normal for almost every app. Much of the information presented in our apps is fetched from the network and then shown to the users in a compelling way. And while we are developing and testing our apps, we usually need some tooling to see what is being fetched from the network and how that is being done. But what if we could change that and enable every team member possibility to see such information at every step of our mobile development process?\u003c/p\u003e\u003ch2 id=\"7bf9\"\u003eMEET INSPEKTIFY\u003c/h2\u003e\u003cfigure\u003e\u003c/figure\u003e\u003cp id=\"9638\"\u003eInspektify is a debug tool for observing the app\u0026#39;s real-time network traffic. It enables all team members to access all network details directly on the device where an application is being run. No additional tooling is needed, no development setups on your computers, no need to connect your phone to your computer, no technical knowledge (besides for developers to include lib to the project), or other complex additional steps are needed for this. We can have access to all network information directly on our phones. With minimum library setup all we need to do is to shake our mobile device and a new window is presented with a list of all network communication that happened within the app.\u003c/p\u003e\u003ch2 id=\"d418\"\u003eTECHNICAL SETUP FOR TECHNICAL PEOPLE\u003c/h2\u003e\u003cp id=\"732a\"\u003eTo use the Inspektify library, currently, we need to fulfill 3 requirements:\u003c/p\u003e\u003col\u003e\u003cli id=\"88ba\"\u003eIt can only be used for KMP projects that support only Android and iOS platforms.\u003c/li\u003e\u003cli id=\"4ae3\"\u003eThe library heavily depends on Ktor, so we need to use the Ktor library for network communication in our project to set up Inspektify.\u003c/li\u003e\u003cli id=\"6f6b\"\u003eA project consuming this library must have a minimum Ktor version of 2.3.1.\u003c/li\u003e\u003c/ol\u003e\u003cp id=\"3f60\"\u003eIf we made a check for all three requirements then we can use Inspektify in our project and we need to do the next steps to include it:\u003c/p\u003e\u003col\u003e\u003cli id=\"493c\"\u003eAdd the \u003cstrong\u003emavenCentral()\u003c/strong\u003e repository to our project if we don’t have it yet.\u003c/li\u003e\u003c/ol\u003e\u003cfigure\u003e\u003c/figure\u003e\u003cp id=\"dea8\"\u003e2. Include the library in our \u003cstrong\u003ecommonMain\u003c/strong\u003e source set.\u003c/p\u003e\u003cfigure\u003e\u003c/figure\u003e\u003cblockquote\u003e\u003cp id=\"4646\"\u003eIf you are using Ktor version that is below 3.0.0, please use inspektify-ktor2 instead of inspektify-ktor3\u003c/p\u003e\u003c/blockquote\u003e\u003cp id=\"d03c\"\u003e3. Install the \u003cstrong\u003eInspektify plugin\u003c/strong\u003e on our \u003cstrong\u003eKtor client\u003c/strong\u003e.\u003c/p\u003e\u003cfigure\u003e\u003c/figure\u003e\u003cp id=\"b7a3\"\u003eThis is a minimum needed setup to include a library in the project. If we want we can also configure the library further with instructions written on the project’s GitHub page \u003ca href=\"https://github.com/BVantur/inspektify?tab=readme-ov-file#features\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\u003cfigure\u003e\u003c/figure\u003e\u003ch2 id=\"3c86\"\u003eUSAGE\u003c/h2\u003e\u003cp id=\"21c1\"\u003eWith a minimum setup, we can already use our library directly on our Android and iOS clients. All we need to do is shake our phone and the Inspektify tool window will be presented to us automatically. At first, we will see a list of all network transactions(which are stored in a database), ordered by the date and time. All transactions are grouped by the date with sticky headers We can also easily see which transactions are from the current session and which are from the past sessions. This is visible with the background color of items. If they are a little bit grayed out they are from the past sessions. In the top right corner is a trash icon with which we can remove all the items from the list(and also from the database). For every transaction we can see the next data:\u003c/p\u003e\u003col\u003e\u003cli id=\"5000\"\u003eEndpoint name\u003c/li\u003e\u003cli id=\"3617\"\u003eResponse status code\u003c/li\u003e\u003cli id=\"7b44\"\u003eSSL information(only on Android)\u003c/li\u003e\u003cli id=\"83cb\"\u003eHost name\u003c/li\u003e\u003cli id=\"192b\"\u003eA time when a network transaction happened\u003c/li\u003e\u003cli id=\"a6c3\"\u003eDuration of network transaction\u003c/li\u003e\u003cli id=\"8208\"\u003eTotal sized transferred between app and server\u003c/li\u003e\u003c/ol\u003e\u003cp id=\"cfd3\"\u003eWe can see more details about the transaction when we click on a single item. Data there is presented with 3 tabs. In the \u003cstrong\u003eOverview\u003c/strong\u003e tab, we can see all the general information about the transaction. Then we have the \u003cstrong\u003eRequest \u003c/strong\u003eand the \u003cstrong\u003eResponse\u003c/strong\u003e tabs where we see all the headers and payloads sent and received with our app. On the top right corner here we have a copy icon, which copies the whole network transaction to the device’s clipboard, which can be later on used for whatever case we want(sending it through email, slack, discord,….)\u003c/p\u003e\u003ch2 id=\"7250\"\u003eDISCLAIMER\u003c/h2\u003e\u003cp id=\"6e0b\"\u003eThis is an early library version, so it still needs to be tested with bigger and more complex projects. I hope you will give it a go. There is also a \u003ca href=\"https://github.com/BVantur/inspektify/tree/main/inspektifySample\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003esample project on the GitHub repo\u003c/a\u003e, so you can do a quick check there if that is something that could help your development process within your team. If you find any issues, please file them directly on the project GitHub page so they can be investigated.\u003c/p\u003e\u003ch2 id=\"00de\"\u003eCONCLUSION\u003c/h2\u003e\u003cp id=\"aaa3\"\u003eThe library is still in beta and I am trying to gather some feedback before it goes to the stable version. I am happy to hear any recommendations or ideas, so don’t hesitate to contact me.\u003c/p\u003e\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "5 min read",
  "publishedTime": "2024-09-23T09:38:37.496Z",
  "modifiedTime": null
}
