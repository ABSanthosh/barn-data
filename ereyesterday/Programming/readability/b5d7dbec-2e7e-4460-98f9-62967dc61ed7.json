{
  "id": "b5d7dbec-2e7e-4460-98f9-62967dc61ed7",
  "title": "Cloud Efficiency at Netflix",
  "link": "https://netflixtechblog.com/cloud-efficiency-at-netflix-f2a142955f83?source=rss----2615bd06b42e---4",
  "description": "",
  "author": "Netflix Technology Blog",
  "published": "Tue, 17 Dec 2024 22:17:29 GMT",
  "source": "https://netflixtechblog.com/feed",
  "categories": [
    "cost",
    "data-modeling",
    "infrastructure",
    "cloud-efficiency",
    "engineering"
  ],
  "byline": "Netflix Technology Blog",
  "length": 6803,
  "excerpt": "This post provides a high level overview of data approach and methodology for understanding Cloud Efficiency usage and cost of infrastructure at Netflix.",
  "siteName": "Netflix TechBlog",
  "favicon": "https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png",
  "text": "By J Han, Pallavi PhadnisContextAt Netflix, we use Amazon Web Services (AWS) for our cloud infrastructure needs, such as compute, storage, and networking to build and run the streaming platform that we love. Our ecosystem enables engineering teams to run applications and services at scale, utilizing a mix of open-source and proprietary solutions. In turn, our self-serve platforms allow teams to create and deploy, sometimes custom, workloads more efficiently. This diverse technological landscape generates extensive and rich data from various infrastructure entities, from which, data engineers and analysts collaborate to provide actionable insights to the engineering organization in a continuous feedback loop that ultimately enhances the business.One crucial way in which we do this is through the democratization of highly curated data sources that sunshine usage and cost patterns across Netflix’s services and teams. The Data \u0026 Insights organization partners closely with our engineering teams to share key efficiency metrics, empowering internal stakeholders to make informed business decisions.Data is KeyThis is where our team, Platform DSE (Data Science Engineering), comes in to enable our engineering partners to understand what resources they’re using, how effectively and efficiently they use those resources, and the cost associated with their resource usage. We want our downstream consumers to make cost conscious decisions using our datasets.To address these numerous analytic needs in a scalable way, we’ve developed a two-component solution:Foundational Platform Data (FPD): This component provides a centralized data layer for all platform data, featuring a consistent data model and standardized data processing methodology.Cloud Efficiency Analytics (CEA): Built on top of FPD, this component offers an analytics data layer that provides time series efficiency metrics across various business use cases.Foundational Platform Data (FPD)We work with different platform data providers to get inventory, ownership, and usage data for the respective platforms they own. Below is an example of how this framework applies to the Spark platform. FPD establishes data contracts with producers to ensure data quality and reliability; these contracts allow the team to leverage a common data model for ownership. The standardized data model and processing promotes scalability and consistency.Cloud Efficiency Analytics (CEA Data)Once the foundational data is ready, CEA consumes inventory, ownership, and usage data and applies the appropriate business logic to produce cost and ownership attribution at various granularities. The data model approach in CEA is to compartmentalize and be transparent; we want downstream consumers to understand why they’re seeing resources show up under their name/org and how those costs are calculated. Another benefit to this approach is the ability to pivot quickly as new or changes in business logic is/are introduced.* For cost accounting purposes, we resolve assets to a single owner, or distribute costs when assets are multi-tenant. However, we do also provide usage and cost at different aggregations for different consumers.Data PrinciplesAs the source of truth for efficiency metrics, our team’s tenants are to provide accurate, reliable, and accessible data, comprehensive documentation to navigate the complexity of the efficiency space, and well-defined Service Level Agreements (SLAs) to set expectations with downstream consumers during delays, outages or changes.While ownership and cost may seem straightforward, the complexity of the datasets is considerably high due to the breadth and scope of the business infrastructure and platform specific features. Services can have multiple owners, cost heuristics are unique to each platform, and the scale of infra data is large. As we work on expanding infrastructure coverage to all verticals of the business, we face a unique set of challenges:A Few Sizes to Fit the MajorityDespite data contracts and a standardized data model on transforming upstream platform data into FPD and CEA, there is usually some degree of customization that is unique to that particular platform. As the centralized source of truth, we feel the constant tension of where to place the processing burden. Decision-making involves ongoing transparent conversations with both our data producers and consumers, frequent prioritization checks, and alignment with business needs as informed captains in this space.Data GuaranteesFor data correctness and trust, it’s crucial that we have audits and visibility into health metrics at each layer in the pipeline in order to investigate issues and root cause anomalies quickly. Maintaining data completeness while ensuring correctness becomes challenging due to upstream latency and required transformations to have the data ready for consumption. We continuously iterate our audits and incorporate feedback to refine and meet our SLAs.Abstraction LayersWe value people over process, and it is not uncommon for engineering teams to build custom SaaS solutions for other parts of the organization. Although this fosters innovation and improves development velocity, it can create a bit of a conundrum when it comes to understanding and interpreting usage patterns and attributing cost in a way that makes sense to the business and end consumer. With clear inventory, ownership, and usage data from FPD, and precise attribution in the analytical layer, we aim to provide metrics to downstream users regardless of whether they utilize and build on top of internal platforms or on AWS resources directly.Future ForwardLooking ahead, we aim to continue onboarding platforms to FPD and CEA, striving for nearly complete cost insight coverage in the upcoming year. Longer term, we plan to extend FPD to other areas of the business such as security and availability. We aim to move towards proactive approaches via predictive analytics and ML for optimizing usage and detecting anomalies in cost.Ultimately, our goal is to enable our engineering organization to make efficiency-conscious decisions when building and maintaining the myriad of services that allow us to enjoy Netflix as a streaming service.AcknowledgmentsThe FPD and CEA work would not have been possible without the cross functional input of many outstanding colleagues and our dedicated team building these important data assets.—A bit about the authors:JHan enjoys nature, reading fantasy, and finding the best chocolate chip cookies and cinnamon rolls. She is adamant about writing the SQL select statement with leading commas.Pallavi enjoys music, travel and watching astrophysics documentaries. With 15+ years working with data, she knows everything’s better with a dash of analytics and a cup of coffee!",
  "image": "https://miro.medium.com/v2/da:true/resize:fit:1200/0*vDQJiJUttlRSpVBo",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv\u003e\u003cdiv\u003e\u003cdiv aria-hidden=\"false\"\u003e\u003ca href=\"https://netflixtechblog.medium.com/?source=post_page---byline--f2a142955f83--------------------------------\" rel=\"noopener follow\"\u003e\u003cdiv\u003e\u003cp\u003e\u003cimg alt=\"Netflix Technology Blog\" src=\"https://miro.medium.com/v2/resize:fill:88:88/1*BJWRqfSMf9Da9vsXG9EBRQ.jpeg\" width=\"44\" height=\"44\" loading=\"lazy\" data-testid=\"authorPhoto\"/\u003e\u003c/p\u003e\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003cdiv aria-hidden=\"false\"\u003e\u003ca href=\"https://netflixtechblog.com/?source=post_page---byline--f2a142955f83--------------------------------\" rel=\"noopener  ugc nofollow\"\u003e\u003cdiv\u003e\u003cp\u003e\u003cimg alt=\"Netflix TechBlog\" src=\"https://miro.medium.com/v2/resize:fill:48:48/1*ty4NvNrGg4ReETxqU2N3Og.png\" width=\"24\" height=\"24\" loading=\"lazy\" data-testid=\"publicationPhoto\"/\u003e\u003c/p\u003e\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/div\u003e\u003cp id=\"c997\"\u003e\u003cstrong\u003eBy\u003c/strong\u003e \u003ca href=\"https://www.linkedin.com/in/jhan-104105?utm_source=share\u0026amp;utm_campaign=share_via\u0026amp;utm_content=profile\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003eJ Han\u003c/a\u003e, \u003ca href=\"https://www.linkedin.com/in/pallavi-phadnis-75280b20/\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003ePallavi Phadnis\u003c/a\u003e\u003c/p\u003e\u003ch2 id=\"16b4\"\u003e\u003cstrong\u003eContext\u003c/strong\u003e\u003c/h2\u003e\u003cp id=\"f453\"\u003eAt Netflix, we use Amazon Web Services (AWS) for our cloud infrastructure needs, such as compute, storage, and networking to build and run the streaming platform that we love. Our ecosystem enables engineering teams to run applications and services at scale, utilizing a mix of open-source and proprietary solutions. In turn, our self-serve platforms allow teams to create and deploy, sometimes custom, workloads more efficiently. This diverse technological landscape generates extensive and rich data from various infrastructure entities, from which, data engineers and analysts collaborate to provide actionable insights to the engineering organization in a continuous feedback loop that ultimately enhances the business.\u003c/p\u003e\u003cp id=\"1ac0\"\u003eOne crucial way in which we do this is through the democratization of highly curated data sources that sunshine usage and cost patterns across Netflix’s services and teams. The Data \u0026amp; Insights organization partners closely with our engineering teams to share key efficiency metrics, empowering internal stakeholders to make informed business decisions.\u003c/p\u003e\u003ch2 id=\"a744\"\u003e\u003cstrong\u003eData is Key\u003c/strong\u003e\u003c/h2\u003e\u003cp id=\"a1ec\"\u003eThis is where our team, Platform DSE (Data Science Engineering), comes in to enable our engineering partners to understand what resources they’re using, how effectively and efficiently they use those resources, and the cost associated with their resource usage. We want our downstream consumers to make cost conscious decisions using our datasets.\u003c/p\u003e\u003cp id=\"76e1\"\u003eTo address these numerous analytic needs in a scalable way, we’ve developed a two-component solution:\u003c/p\u003e\u003col\u003e\u003cli id=\"c691\"\u003eFoundational Platform Data (FPD): This component provides a centralized data layer for all platform data, featuring a consistent data model and standardized data processing methodology.\u003c/li\u003e\u003cli id=\"5b27\"\u003eCloud Efficiency Analytics (CEA): Built on top of FPD, this component offers an analytics data layer that provides time series efficiency metrics across various business use cases.\u003c/li\u003e\u003c/ol\u003e\u003cfigure\u003e\u003c/figure\u003e\u003cp id=\"7a9d\"\u003e\u003cstrong\u003eFoundational Platform Data (FPD)\u003c/strong\u003e\u003c/p\u003e\u003cp id=\"8685\"\u003eWe work with different platform data providers to get \u003cem\u003einventory\u003c/em\u003e, \u003cem\u003eownership\u003c/em\u003e, and \u003cem\u003eusage\u003c/em\u003e data for the respective platforms they own. Below is an example of how this framework applies to the \u003ca href=\"https://spark.apache.org/\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003eSpark\u003c/a\u003e platform. FPD establishes\u003cem\u003e data contracts\u003c/em\u003e with producers to ensure data quality and reliability; these contracts allow the team to leverage a common data model for ownership. The standardized data model and processing promotes scalability and consistency.\u003c/p\u003e\u003cfigure\u003e\u003c/figure\u003e\u003cp id=\"a35c\"\u003e\u003cstrong\u003eCloud Efficiency Analytics (CEA Data)\u003c/strong\u003e\u003c/p\u003e\u003cp id=\"0ba0\"\u003eOnce the foundational data is ready, CEA consumes inventory, ownership, and usage data and applies the appropriate \u003cem\u003ebusiness logic\u003c/em\u003e to produce \u003cem\u003ecost\u003c/em\u003e and \u003cem\u003eownership attribution\u003c/em\u003e at various granularities. The data model approach in CEA is to compartmentalize and be \u003cem\u003etransparent\u003c/em\u003e; we want downstream consumers to understand why they’re seeing resources show up under their name/org and how those costs are calculated. Another benefit to this approach is the ability to pivot quickly as new or changes in business logic is/are introduced.\u003c/p\u003e\u003cfigure\u003e\u003c/figure\u003e\u003cp id=\"fcca\"\u003e* For cost accounting purposes, we resolve assets to a single owner, or distribute costs when assets are multi-tenant. However, we do also provide usage and cost at different aggregations for different consumers.\u003c/p\u003e\u003ch2 id=\"3fc1\"\u003e\u003cstrong\u003eData Principles\u003c/strong\u003e\u003c/h2\u003e\u003cp id=\"6a99\"\u003eAs the source of truth for efficiency metrics, our team’s tenants are to provide accurate, reliable, and accessible data, comprehensive documentation to navigate the complexity of the efficiency space, and well-defined Service Level Agreements (SLAs) to set expectations with downstream consumers during delays, outages or changes.\u003c/p\u003e\u003cp id=\"d22d\"\u003eWhile ownership and cost may seem straightforward, the complexity of the datasets is considerably high due to the breadth and scope of the business infrastructure and platform specific features. Services can have multiple owners, cost heuristics are unique to each platform, and the scale of infra data is large. As we work on expanding infrastructure coverage to all verticals of the business, we face a unique set of challenges:\u003c/p\u003e\u003cp id=\"50e2\"\u003e\u003cstrong\u003eA Few Sizes to Fit the Majority\u003c/strong\u003e\u003c/p\u003e\u003cp id=\"e6ac\"\u003eDespite data contracts and a standardized data model on transforming upstream platform data into FPD and CEA, there is usually some degree of customization that is unique to that particular platform. As the centralized source of truth, we feel the constant tension of where to place the processing burden. Decision-making involves ongoing transparent conversations with both our data producers and consumers, frequent prioritization checks, and alignment with business needs as \u003ca href=\"https://jobs.netflix.com/culture\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003einformed captains\u003c/a\u003e in this space.\u003c/p\u003e\u003cp id=\"fa84\"\u003e\u003cstrong\u003eData Guarantees\u003c/strong\u003e\u003c/p\u003e\u003cp id=\"5d38\"\u003eFor data correctness and trust, it’s crucial that we have audits and visibility into health metrics at each layer in the pipeline in order to investigate issues and root cause anomalies quickly. Maintaining data completeness while ensuring correctness becomes challenging due to upstream latency and required transformations to have the data ready for consumption. We continuously iterate our audits and incorporate feedback to refine and meet our SLAs.\u003c/p\u003e\u003cp id=\"c365\"\u003e\u003cstrong\u003eAbstraction Layers\u003c/strong\u003e\u003c/p\u003e\u003cp id=\"e5ca\"\u003eWe value \u003ca href=\"https://jobs.netflix.com/culture\" rel=\"noopener ugc nofollow\" target=\"_blank\"\u003epeople over process\u003c/a\u003e, and it is not uncommon for engineering teams to build custom SaaS solutions for other parts of the organization. Although this fosters innovation and improves development velocity, it can create a bit of a conundrum when it comes to understanding and interpreting usage patterns and attributing cost in a way that makes sense to the business and end consumer. With clear inventory, ownership, and usage data from FPD, and precise attribution in the analytical layer, we aim to provide metrics to downstream users regardless of whether they utilize and build on top of internal platforms or on AWS resources directly.\u003c/p\u003e\u003ch2 id=\"acbb\"\u003e\u003cstrong\u003eFuture Forward\u003c/strong\u003e\u003c/h2\u003e\u003cp id=\"1f2b\"\u003eLooking ahead, we aim to continue onboarding platforms to FPD and CEA, striving for nearly complete cost insight coverage in the upcoming year. Longer term, we plan to extend FPD to other areas of the business such as security and availability. We aim to move towards proactive approaches via predictive analytics and ML for optimizing usage and detecting anomalies in cost.\u003c/p\u003e\u003cp id=\"e9c5\"\u003eUltimately, our goal is to enable our engineering organization to make efficiency-conscious decisions when building and maintaining the myriad of services that allow us to enjoy Netflix as a streaming service.\u003c/p\u003e\u003ch2 id=\"78a3\"\u003eAcknowledgments\u003c/h2\u003e\u003cp id=\"2782\"\u003eThe FPD and CEA work would not have been possible without the cross functional input of many outstanding colleagues and our dedicated team building these important data assets.\u003c/p\u003e\u003cp id=\"1be1\"\u003e—\u003c/p\u003e\u003cp id=\"fdd6\"\u003eA bit about the authors:\u003c/p\u003e\u003cp id=\"4e87\"\u003e\u003cem\u003eJHan enjoys nature, reading fantasy, and finding the best chocolate chip cookies and cinnamon rolls. She is adamant about writing the SQL select statement with leading commas.\u003c/em\u003e\u003c/p\u003e\u003cp id=\"0922\"\u003e\u003cem\u003ePallavi enjoys music, travel and watching astrophysics documentaries. With 15+ years working with data, she knows everything’s better with a dash of analytics and a cup of coffee!\u003c/em\u003e\u003c/p\u003e\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "8 min read",
  "publishedTime": "2024-12-17T22:16:44.235Z",
  "modifiedTime": null
}
