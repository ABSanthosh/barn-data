{
  "id": "0b57a4e1-cad1-4b6a-8996-f341d6e66b09",
  "title": "Netflix Enhances Metaflow with New Configuration Capabilities",
  "link": "https://www.infoq.com/news/2025/01/netflix-metaflow-configuration/?utm_campaign=infoq_content\u0026utm_source=infoq\u0026utm_medium=feed\u0026utm_term=global",
  "description": "Netflix has introduced a significant enhancement to its Metaflow machine learning infrastructure: a new Config object that brings powerful configuration management to ML workflows. This addition addresses a common challenge faced by Netflix's teams, which manage thousands of unique Metaflow flows across diverse ML and AI use cases. By Claudio Masolo",
  "author": "Claudio Masolo",
  "published": "Fri, 10 Jan 2025 09:00:00 GMT",
  "source": "https://feed.infoq.com",
  "categories": [
    "Machine Learning",
    "Orchestration",
    "Data Science",
    "Data Pipelines",
    "Netflix",
    "DevOps",
    "news"
  ],
  "byline": "Claudio Masolo",
  "length": 5631,
  "excerpt": "Netflix has introduced a significant enhancement to its Metaflow machine learning infrastructure: a new Config object that brings powerful configuration management to ML workflows. This addition addre",
  "siteName": "InfoQ",
  "favicon": "https://cdn.infoq.com/statics_s1_20250109115548/apple-touch-icon.png",
  "text": "Netflix has introduced a significant enhancement to its Metaflow machine learning infrastructure: a new Config object that brings powerful configuration management to ML workflows. This addition addresses a common challenge faced by Netflix's teams, which manage thousands of unique Metaflow flows across diverse ML and AI use cases. Netflix Metaflow is an open-source, data science framework designed to simplify the process of building and managing data-intensive workflows. It allows users to define workflows as directed graphs, making it easy to visualize and iterate on them. Metaflow automatically handles scaling, versioning, and deployment of workflows, which are critical aspects in machine learning and data engineering projects. It provides built-in support for tasks like data storage, parameter management, and computation execution, both locally and in the cloud. Metaflow infrastructure stack The new Config feature represents a fundamental shift in how ML workflows can be configured and managed at Netflix. While Metaflow has always excelled at providing infrastructure for data access, compute resources and workflow orchestration, teams previously lacked a unified way to configure flow behaviour, particularly for decorators and deployment settings. The Config object joins Metaflow's existing constructs of artifacts and Parameters, but with a crucial difference in timing. While artifacts are persisted at the end of each task and parameters are resolved at the start of a run, configs are resolved during flow deployment. This timing difference makes configs particularly powerful for setting up deployment-specific configurations. Configs can be specified using human-readable TOML files, making it easy to manage different aspects of a flow: [schedule] cron = \"0 * * * *\" [model] optimizer = \"adam\" learning_rate = 0.5 [resources] cpu = 1 Netflix's internal tool, Metaboost, showcases how powerful this configuration system can be. Metaboost is a unified interface for managing ETL workflows, ML pipelines, and data warehouse tables. The new Config feature allows teams to create different experimental configurations while maintaining the core flow structure. For example, ML practitioners can easily create variations of their models by simply swapping configuration files, enabling rapid experimentation with different features, hyperparameters, or target metrics. This capability has proven particularly valuable for Netflix's Content ML team, which works with hundreds of data columns and multiple metrics. The new Config system offers several advantages: Flexible Runtime Configuration: Parameters and Configs can be mixed to balance fixed deployments and runtime configurability. Enhanced Validation: Custom parsers can validate configurations, including integration with popular tools like Pydantic. Advanced Configuration Management: Support for configuration managers like OmegaConf and Hydra enables sophisticated configuration hierarchies. Generate configuration on the fly: users can retrieve Configs from an external service or analyzing the execution environment, such as the current GIT branch, to include it as additional context during runs. This enhancement represents a significant step forward in Metaflow's evolution as a machine learning infrastructure platform. By providing a more structured way to manage configurations, Netflix has made it easier for teams to maintain and scale their ML workflows while adhering to their specific development practices and business goals. The feature is now available in Metaflow 2.13, and users can start implementing it in their workflows immediately. Several tools similar to Netflix Metaflow are designed to help data scientists and engineers manage workflows, orchestrate pipelines, and build scalable machine learning or data-driven systems. Each of these tools caters to slightly different needs and priorities, but they all aim to simplify complex workflows and scale data operations. Here are some noteworthy examples: Apache Airflow: A widely used, open-source platform for orchestrating workflows. It allows users to define tasks and their dependencies as Directed Acyclic Graphs (DAGs). While Metaflow focuses on data science pipelines, Airflow is more general-purpose and excels in managing workflows across different domains. Luigi (Spotify): An open-source Python framework designed to build complex pipelines. Like Metaflow, Luigi handles dependencies, workflow orchestration, and task management, but it is less focused on machine learning-specific needs. Kubeflow: A machine learning toolkit for Kubernetes. It specializes in managing ML workflows and deploying models in production, making it a strong choice for Kubernetes-based environments. MLflow: An open-source platform that manages the ML lifecycle, including experiment tracking, reproducibility, deployment, and monitoring. MLflow has strong support for model versioning and deployment but lacks the broader workflow orchestration capabilities of Metaflow. Argo Workflows: A Kubernetes-native workflow engine designed to run complex workflows on containerized infrastructure. It’s ideal for teams already using Kubernetes and looking for a lightweight solution. While these tools overlap in some functionality, Metaflow stands out with its simplicity, scalability, and built-in support for machine learning workflows, making it particularly attractive to data science teams. About the Author Claudio Masolo",
  "image": "https://res.infoq.com/news/2025/01/netflix-metaflow-configuration/en/headerimage/generatedHeaderImage-1736493413497.jpg",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv\u003e\n\t\t\t\t\t\t\t\t\u003cp\u003eNetflix has introduced a significant \u003ca href=\"https://netflixtechblog.com/introducing-configurable-metaflow-d2fb8e9ba1c6\"\u003eenhancement\u003c/a\u003e to its Metaflow machine learning infrastructure: a new Config object that brings powerful configuration management to ML workflows. This addition addresses a common challenge faced by Netflix\u0026#39;s teams, which manage thousands of unique Metaflow flows across diverse ML and AI use cases.\u003c/p\u003e\n\n\u003cp\u003eNetflix Metaflow is an open-source, data science framework designed to simplify the process of building and managing data-intensive workflows. It allows users to define workflows as directed graphs, making it easy to visualize and iterate on them. Metaflow automatically handles scaling, versioning, and deployment of workflows, which are critical aspects in machine learning and data engineering projects. It provides built-in support for tasks like data storage, parameter management, and computation execution, both locally and in the cloud.\u003c/p\u003e\n\n\n\n\u003ccenter\u003e\u003cimg alt=\"\" data-src=\"news/2025/01/netflix-metaflow-configuration/en/resources/11_XrOVl25ZLx8_4nHLRxNgDg-1736493850102.jpeg\" src=\"https://imgopt.infoq.com/fit-in/3000x4000/filters:quality(85)/filters:no_upscale()/news/2025/01/netflix-metaflow-configuration/en/resources/11_XrOVl25ZLx8_4nHLRxNgDg-1736493850102.jpeg\" rel=\"share\"/\u003e\u003c/center\u003e\n\n\u003ccenter\u003e\u003csmall\u003eMetaflow infrastructure stack\u003c/small\u003e\u003c/center\u003e\n\n\n\n\u003cp\u003eThe new Config feature represents a fundamental shift in how ML workflows can be configured and managed at Netflix. While Metaflow has always excelled at providing infrastructure for data access, compute resources and workflow orchestration, teams previously lacked a unified way to configure flow behaviour, particularly for decorators and deployment settings.\u003c/p\u003e\n\n\u003cp\u003eThe Config object joins Metaflow\u0026#39;s existing constructs of artifacts and Parameters, but with a crucial difference in timing. While artifacts are persisted at the end of each task and parameters are resolved at the start of a run, configs are resolved during flow deployment. This timing difference makes configs particularly powerful for setting up deployment-specific configurations.\u003c/p\u003e\n\n\u003cp\u003eConfigs can be specified using human-readable \u003ca href=\"https://toml.io/en/\"\u003eTOML\u003c/a\u003e files, making it easy to manage different aspects of a flow:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e[schedule]\ncron = \u0026#34;0 * * * *\u0026#34;\n\n[model]\noptimizer = \u0026#34;adam\u0026#34;\nlearning_rate = 0.5\n\n[resources]\ncpu = 1\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eNetflix\u0026#39;s internal tool, Metaboost, showcases how powerful this configuration system can be. Metaboost is a unified interface for managing ETL workflows, ML pipelines, and data warehouse tables. The new Config feature allows teams to create different experimental configurations while maintaining the core flow structure.\u003c/p\u003e\n\n\u003cp\u003eFor example, ML practitioners can easily create variations of their models by simply swapping configuration files, enabling rapid experimentation with different features, hyperparameters, or target metrics. This capability has proven particularly valuable for Netflix\u0026#39;s Content ML team, which works with hundreds of data columns and multiple metrics.\u003c/p\u003e\n\n\u003cp\u003eThe new Config system offers several advantages:\u003c/p\u003e\n\n\u003cul\u003e\n\t\u003cli\u003eFlexible Runtime Configuration: Parameters and Configs can be mixed to balance fixed deployments and runtime configurability.\u003c/li\u003e\n\t\u003cli\u003eEnhanced Validation: Custom parsers can validate configurations, including integration with popular tools like \u003ca href=\"https://docs.pydantic.dev/latest/\"\u003ePydantic\u003c/a\u003e.\u003c/li\u003e\n\t\u003cli\u003eAdvanced Configuration Management: Support for configuration managers like \u003ca href=\"https://omegaconf.readthedocs.io/en/2.3_branch/\"\u003eOmegaConf\u003c/a\u003e and \u003ca href=\"https://hydra.cc/\"\u003eHydra\u003c/a\u003e enables sophisticated configuration hierarchies.\u003c/li\u003e\n\t\u003cli\u003eGenerate configuration on the fly: users can retrieve Configs from an external service or analyzing the execution environment, such as the current GIT branch, to include it as additional context during runs.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eThis enhancement represents a significant step forward in Metaflow\u0026#39;s evolution as a machine learning infrastructure platform. By providing a more structured way to manage configurations, Netflix has made it easier for teams to maintain and scale their ML workflows while adhering to their specific development practices and business goals.\u003c/p\u003e\n\n\u003cp\u003eThe feature is now available in Metaflow 2.13, and users can start implementing it in their workflows immediately.\u003c/p\u003e\n\n\u003cp\u003eSeveral tools similar to Netflix Metaflow are designed to help data scientists and engineers manage workflows, orchestrate pipelines, and build scalable machine learning or data-driven systems. Each of these tools caters to slightly different needs and priorities, but they all aim to simplify complex workflows and scale data operations. Here are some noteworthy examples:\u003c/p\u003e\n\n\u003cul\u003e\n\t\u003cli\u003e\u003ca href=\"https://airflow.apache.org/\"\u003eApache Airflow\u003c/a\u003e: A widely used, open-source platform for orchestrating workflows. It allows users to define tasks and their dependencies as Directed Acyclic Graphs (DAGs). While Metaflow focuses on data science pipelines, Airflow is more general-purpose and excels in managing workflows across different domains.\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"https://github.com/spotify/luigi\"\u003eLuigi (Spotify)\u003c/a\u003e: An open-source Python framework designed to build complex pipelines. Like Metaflow, Luigi handles dependencies, workflow orchestration, and task management, but it is less focused on machine learning-specific needs.\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"https://www.kubeflow.org/\"\u003eKubeflow\u003c/a\u003e: A machine learning toolkit for Kubernetes. It specializes in managing ML workflows and deploying models in production, making it a strong choice for Kubernetes-based environments.\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"https://mlflow.org/\"\u003eMLflow\u003c/a\u003e: An open-source platform that manages the ML lifecycle, including experiment tracking, reproducibility, deployment, and monitoring. MLflow has strong support for model versioning and deployment but lacks the broader workflow orchestration capabilities of Metaflow.\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"https://argoproj.github.io/workflows/\"\u003eArgo Workflows\u003c/a\u003e: A Kubernetes-native workflow engine designed to run complex workflows on containerized infrastructure. It’s ideal for teams already using Kubernetes and looking for a lightweight solution.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eWhile these tools overlap in some functionality, Metaflow stands out with its simplicity, scalability, and built-in support for machine learning workflows, making it particularly attractive to data science teams.\u003c/p\u003e\n\n\t\t\t\t\t\t\t\t\n\n\n\n\n\n\n\n\n\n  \n    \u003cdiv\u003e \n        \u003ch2\u003eAbout the Author\u003c/h2\u003e \n\n        \n            \n                \n            \n            \u003cdiv data-id=\"author-Claudio-Masolo\"\u003e\n                    \u003ch4\u003e\u003cstrong\u003eClaudio Masolo\u003c/strong\u003e\u003c/h4\u003e\n                    \n                \u003c/div\u003e\n        \n    \u003c/div\u003e\n\n\t\t\t\t\t\t\t\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "7 min read",
  "publishedTime": "2025-01-10T00:00:00Z",
  "modifiedTime": null
}
