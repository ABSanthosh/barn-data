{
  "id": "cc80f3ba-57db-4a42-be82-3860c120012f",
  "title": "Cancellable withObservationTracking in Swift",
  "link": "https://augmentedcode.io/2024/08/12/cancellable-withobservationtracking-in-swift/",
  "description": "Observation framework came out along with iOS 17 in 2023. Using this framework, we can make objects observable very easily. Please refer to @Observable macro in SwiftUI for quick recap if needed. It also has a function withObservationTracking(_:onChange:) what can be used for cases where we would want to manually get a callback when a tracked […]",
  "author": "Toomas Vahter",
  "published": "Mon, 12 Aug 2024 20:16:48 +0000",
  "source": "https://augmentedcode.io/feed/",
  "categories": [
    "iOS",
    "Swift",
    "SwiftUI",
    "observation",
    "withObservationTracking"
  ],
  "byline": "",
  "length": 6725,
  "excerpt": "Observation framework came out along with iOS 17 in 2023. Using this framework, we can make objects observable very easily. Please refer to @Observable macro in SwiftUI for quick recap if needed. I…",
  "siteName": "Augmented Code",
  "favicon": "https://augmentedcode.io/wp-content/uploads/2017/11/site-icon.png?w=192",
  "text": "Observation framework came out along with iOS 17 in 2023. Using this framework, we can make objects observable very easily. Please refer to @Observable macro in SwiftUI for quick recap if needed. It also has a function withObservationTracking(_:onChange:) what can be used for cases where we would want to manually get a callback when a tracked property is about to change. This function works as a one shot function and the onChange closure is called only once. Note that it is called before the value has actually changed. If we want to get the changed value, we would need to read the value on the next run loop cycle. It would be much more useful if we could use this function in a way where we could have an observation token and as long as it is set, the observation is active. Here is the function with cancellation support. This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters func withObservationTracking( _ apply: @escaping () -\u003e Void, token: @escaping () -\u003e String?, willChange: (@Sendable () -\u003e Void)? = nil, didChange: @escaping @Sendable () -\u003e Void ) { withObservationTracking(apply) { guard token() != nil else { return } willChange?() RunLoop.current.perform { didChange() withObservationTracking( apply, token: token, willChange: willChange, didChange: didChange ) } } } The apply closure drives which values are being tracked, and this is passed into the existing withObservationTracking(_:onChange:) function. The token closure controls if the change should be handled and if we need to continue tracking. Will and did change are closures called before and after the value has changed. Here is a simple example where we have a view which controls if the observation should be active or not. Changing the value in the view model only triggers the print lines when observation token is set. This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters struct ContentView: View { @State private var viewModel = ViewModel() @State private var observationToken: String? var body: some View { VStack { Text(viewModel.title) Button(\"Add\") { viewModel.add() } Button(\"Start Observing\") { guard observationToken == nil else { return } observationToken = UUID().uuidString observeAndPrint() } Button(\"Stop Observing\") { observationToken = nil } } .padding() } func observeAndPrint() { withObservationTracking({ _ = viewModel.title }, token: { observationToken }, willChange: { [weak viewModel] in guard let viewModel else { return } print(\"will change \\(viewModel.title)\") }, didChange: { [weak viewModel] in guard let viewModel else { return } print(\"did change \\(viewModel.title)\") }) } } @Observable final class ViewModel { var counter = 0 func add() { counter += 1 } var title: String { \"Number of items: \\(counter)\" } } If this was helpful, please let me know on Mastodon@toomasvahter or Twitter @toomasvahter. Feel free to subscribe to RSS feed. Thank you for reading. Tags iOS, observation, Swift, SwiftUI, withObservationTracking",
  "image": "https://augmentedcode.io/wp-content/uploads/2017/11/site-icon.png?w=200",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv id=\"site-content\" role=\"main\"\u003e\n\n\t\n\u003carticle id=\"post-3741\"\u003e\n\n\t\n\n\n\t\u003cdiv\u003e\n\n\t\t\t\n\u003cp\u003eObservation framework came out along with iOS 17 in 2023. Using this framework, we can make objects observable very easily. Please refer to \u003ca href=\"https://augmentedcode.io/2023/06/07/observable-macro-in-swiftui/\"\u003e@Observable macro in SwiftUI\u003c/a\u003e for quick recap if needed. It also has a function  \u003ccode\u003e\u003ca href=\"https://developer.apple.com/documentation/observation/withobservationtracking(_:onchange:)\"\u003ewithObservationTracking(_:onChange:)\u003c/a\u003e\u003c/code\u003e what can be used for cases where we would want to manually get a callback when a tracked property is about to change. This function works as a one shot function and the \u003ccode\u003eonChange\u003c/code\u003e closure is called only once. Note that it is called before the value has actually changed. If we want to get the changed value, we would need to read the value on the next run loop cycle. It would be much more useful if we could use this function in a way where we could have an observation token and as long as it is set, the observation is active. Here is the function with cancellation support.\u003c/p\u003e\n\n\n\n\u003cfigure\u003e\u003cdiv itemprop=\"text\" id=\"gist131993442\" translate=\"no\" data-color-mode=\"light\" data-light-theme=\"light\"\u003e\n\n  \u003ctemplate\u003e\n  \u003cdiv data-view-component=\"true\"\u003e\n  \n    \u003cp\u003e\u003cspan\u003e\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      \u003ca href=\"https://github.co/hiddenchars\" target=\"_blank\"\u003eLearn more about bidirectional Unicode characters\u003c/a\u003e\n    \u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e\u003c/template\u003e\n\u003ctemplate\u003e\n  \u003cspan aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\"\u003e\n    \n\u003c/span\u003e\u003c/template\u003e\n\n  \u003ctable data-hpc=\"\" data-tab-size=\"8\" data-paste-markdown-skip=\"\" data-tagsearch-lang=\"Swift\" data-tagsearch-path=\"Observation.swift\"\u003e\n        \u003ctbody\u003e\u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L1\" data-line-number=\"1\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC1\"\u003efunc withObservationTracking(\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L2\" data-line-number=\"2\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC2\"\u003e    _ apply: @escaping () -\u0026gt; Void,\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L3\" data-line-number=\"3\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC3\"\u003e    token: @escaping () -\u0026gt; String?,\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L4\" data-line-number=\"4\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC4\"\u003e    willChange: (@Sendable () -\u0026gt; Void)? = nil,\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L5\" data-line-number=\"5\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC5\"\u003e    didChange: @escaping @Sendable () -\u0026gt; Void\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L6\" data-line-number=\"6\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC6\"\u003e) {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L7\" data-line-number=\"7\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC7\"\u003e    withObservationTracking(apply) {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L8\" data-line-number=\"8\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC8\"\u003e        guard token() != nil else { return }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L9\" data-line-number=\"9\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC9\"\u003e        willChange?()\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L10\" data-line-number=\"10\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC10\"\u003e        RunLoop.current.perform {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L11\" data-line-number=\"11\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC11\"\u003e            didChange()\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L12\" data-line-number=\"12\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC12\"\u003e            withObservationTracking(\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L13\" data-line-number=\"13\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC13\"\u003e                apply,\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L14\" data-line-number=\"14\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC14\"\u003e                token: token,\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L15\" data-line-number=\"15\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC15\"\u003e                willChange: willChange,\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L16\" data-line-number=\"16\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC16\"\u003e                didChange: didChange\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L17\" data-line-number=\"17\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC17\"\u003e            )\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L18\" data-line-number=\"18\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC18\"\u003e        }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L19\" data-line-number=\"19\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC19\"\u003e    }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-observation-swift-L20\" data-line-number=\"20\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-observation-swift-LC20\"\u003e}\u003c/td\u003e\n        \u003c/tr\u003e\n  \u003c/tbody\u003e\u003c/table\u003e\n\u003c/div\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003eThe apply closure drives which values are being tracked, and this is passed into the existing \u003ccode\u003ewithObservationTracking(_:onChange:)\u003c/code\u003e function. The token closure controls if the change should be handled and if we need to continue tracking. Will and did change are closures called before and after the value has changed.\u003c/p\u003e\n\n\n\n\u003cp\u003eHere is a simple example where we have a view which controls if the observation should be active or not. Changing the value in the view model only triggers the print lines when observation token is set.\u003c/p\u003e\n\n\n\n\u003cfigure\u003e\u003cdiv itemprop=\"text\" id=\"gist131993545\" translate=\"no\" data-color-mode=\"light\" data-light-theme=\"light\"\u003e\n\n  \u003ctemplate\u003e\n  \u003cdiv data-view-component=\"true\"\u003e\n  \n    \u003cp\u003e\u003cspan\u003e\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      \u003ca href=\"https://github.co/hiddenchars\" target=\"_blank\"\u003eLearn more about bidirectional Unicode characters\u003c/a\u003e\n    \u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e\u003c/template\u003e\n\u003ctemplate\u003e\n  \u003cspan aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\"\u003e\n    \n\u003c/span\u003e\u003c/template\u003e\n\n  \u003ctable data-hpc=\"\" data-tab-size=\"8\" data-paste-markdown-skip=\"\" data-tagsearch-lang=\"Swift\" data-tagsearch-path=\"ContentView.swift\"\u003e\n        \u003ctbody\u003e\u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L1\" data-line-number=\"1\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC1\"\u003estruct ContentView: View {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L2\" data-line-number=\"2\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC2\"\u003e    @State private var viewModel = ViewModel()\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L3\" data-line-number=\"3\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC3\"\u003e    @State private var observationToken: String?\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L4\" data-line-number=\"4\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC4\"\u003e\n\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L5\" data-line-number=\"5\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC5\"\u003e    var body: some View {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L6\" data-line-number=\"6\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC6\"\u003e        VStack {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L7\" data-line-number=\"7\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC7\"\u003e            Text(viewModel.title)\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L8\" data-line-number=\"8\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC8\"\u003e            Button(\u0026#34;Add\u0026#34;) {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L9\" data-line-number=\"9\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC9\"\u003e                viewModel.add()\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L10\" data-line-number=\"10\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC10\"\u003e            }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L11\" data-line-number=\"11\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC11\"\u003e            Button(\u0026#34;Start Observing\u0026#34;) {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L12\" data-line-number=\"12\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC12\"\u003e                guard observationToken == nil else { return }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L13\" data-line-number=\"13\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC13\"\u003e                observationToken = UUID().uuidString\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L14\" data-line-number=\"14\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC14\"\u003e                observeAndPrint()\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L15\" data-line-number=\"15\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC15\"\u003e            }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L16\" data-line-number=\"16\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC16\"\u003e            Button(\u0026#34;Stop Observing\u0026#34;) {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L17\" data-line-number=\"17\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC17\"\u003e                observationToken = nil\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L18\" data-line-number=\"18\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC18\"\u003e            }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L19\" data-line-number=\"19\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC19\"\u003e        }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L20\" data-line-number=\"20\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC20\"\u003e        .padding()\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L21\" data-line-number=\"21\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC21\"\u003e    }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L22\" data-line-number=\"22\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC22\"\u003e\n\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L23\" data-line-number=\"23\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC23\"\u003e    func observeAndPrint() {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L24\" data-line-number=\"24\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC24\"\u003e        withObservationTracking({\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L25\" data-line-number=\"25\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC25\"\u003e            _ = viewModel.title\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L26\" data-line-number=\"26\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC26\"\u003e        }, token: {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L27\" data-line-number=\"27\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC27\"\u003e            observationToken\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L28\" data-line-number=\"28\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC28\"\u003e        }, willChange: { [weak viewModel] in\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L29\" data-line-number=\"29\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC29\"\u003e            guard let viewModel else { return }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L30\" data-line-number=\"30\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC30\"\u003e            print(\u0026#34;will change \\(viewModel.title)\u0026#34;)\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L31\" data-line-number=\"31\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC31\"\u003e        }, didChange: { [weak viewModel] in\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L32\" data-line-number=\"32\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC32\"\u003e            guard let viewModel else { return }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L33\" data-line-number=\"33\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC33\"\u003e            print(\u0026#34;did change \\(viewModel.title)\u0026#34;)\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L34\" data-line-number=\"34\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC34\"\u003e        })\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L35\" data-line-number=\"35\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC35\"\u003e    }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L36\" data-line-number=\"36\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC36\"\u003e}\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L37\" data-line-number=\"37\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC37\"\u003e\n\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L38\" data-line-number=\"38\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC38\"\u003e@Observable final class ViewModel {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L39\" data-line-number=\"39\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC39\"\u003e    var counter = 0\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L40\" data-line-number=\"40\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC40\"\u003e\n\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L41\" data-line-number=\"41\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC41\"\u003e    func add() {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L42\" data-line-number=\"42\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC42\"\u003e        counter += 1\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L43\" data-line-number=\"43\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC43\"\u003e    }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L44\" data-line-number=\"44\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC44\"\u003e\n\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L45\" data-line-number=\"45\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC45\"\u003e    var title: String {\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L46\" data-line-number=\"46\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC46\"\u003e        \u0026#34;Number of items: \\(counter)\u0026#34;\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L47\" data-line-number=\"47\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC47\"\u003e    }\u003c/td\u003e\n        \u003c/tr\u003e\n        \u003ctr\u003e\n          \u003ctd id=\"file-contentview-swift-L48\" data-line-number=\"48\"\u003e\u003c/td\u003e\n          \u003ctd id=\"file-contentview-swift-LC48\"\u003e}\u003c/td\u003e\n        \u003c/tr\u003e\n  \u003c/tbody\u003e\u003c/table\u003e\n\u003c/div\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003eIf this was helpful, please let me know on \u003ca href=\"https://mastodon.social/@toomasvahter\" target=\"_blank\" rel=\"noreferrer noopener\"\u003eMastodon@toomasvahter\u003c/a\u003e or \u003ca rel=\"noreferrer noopener\" href=\"https://twitter.com/toomasvahter\" target=\"_blank\"\u003eTwitter @toomasvahter\u003c/a\u003e. Feel free to subscribe to \u003ca rel=\"noreferrer noopener\" aria-label=\"RSS feed (opens in a new tab)\" href=\"https://augmentedcode.io/blog/feed/\" target=\"_blank\"\u003eRSS feed\u003c/a\u003e. Thank you for reading.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\t\n\t\t\t\n\t\t\u003c/div\u003e\n\n\t\u003cdiv\u003e\n\n\t\t\t\u003cul\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cli\u003e\n\t\t\t\t\t\t\u003cspan\u003e\n\t\t\t\t\t\t\t\u003cspan\u003e\n\t\t\t\t\t\t\t\tTags\t\t\t\t\t\t\t\u003c/span\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\n\t\t\t\t\t\t\u003cspan\u003e\n\t\t\t\t\t\t\t\u003ca href=\"https://augmentedcode.io/tag/ios/\" rel=\"tag\"\u003eiOS\u003c/a\u003e, \u003ca href=\"https://augmentedcode.io/tag/observation/\" rel=\"tag\"\u003eobservation\u003c/a\u003e, \u003ca href=\"https://augmentedcode.io/tag/swift/\" rel=\"tag\"\u003eSwift\u003c/a\u003e, \u003ca href=\"https://augmentedcode.io/tag/swiftui/\" rel=\"tag\"\u003eSwiftUI\u003c/a\u003e, \u003ca href=\"https://augmentedcode.io/tag/withobservationtracking/\" rel=\"tag\"\u003ewithObservationTracking\u003c/a\u003e\t\t\t\t\t\t\u003c/span\u003e\n\t\t\t\t\t\u003c/li\u003e\n\t\t\t\t\t\n\t\t\t\u003c/ul\u003e\n\n\t\t\u003c/div\u003e\n\n\t\n\t\n\n\t\n\t\t\n\n\t\t\n\u003c/article\u003e\n\n\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "8 min read",
  "publishedTime": "2024-08-12T20:16:48Z",
  "modifiedTime": "2024-08-12T20:16:48Z"
}
