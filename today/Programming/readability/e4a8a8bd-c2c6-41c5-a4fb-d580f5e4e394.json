{
  "id": "e4a8a8bd-c2c6-41c5-a4fb-d580f5e4e394",
  "title": "What’s new in Git 2.48.0?",
  "link": "https://about.gitlab.com/blog/2025/01/10/whats-new-in-git-2-48-0",
  "description": "",
  "author": "Christian Couder",
  "published": "2025-01-10T00:00:00.000Z",
  "source": "https://about.gitlab.com/atom.xml",
  "categories": null,
  "byline": "Christian Couder",
  "length": 8976,
  "excerpt": "Learn about the latest version of Git, including a new build system and optimization in the new reftable backend. Discover contributions from GitLab's Git team and the Git community.",
  "siteName": "GitLab",
  "favicon": "https://about.gitlab.com/blog/nuxt-images/ico/favicon-192x192.png?cache=2022041",
  "text": "The Git project recently released Git 2.48.0. Let's look at a few notable highlights from this release, which includes contributions from GitLab's Git team and the wider Git community. Meson build system For a long time, Git could be built using either a Makefile-based build system or an Autoconf-based build system. Git developers have been using mostly the Makefile-based build system, so the Autoconf-based build system has lagged behind in features and maintenance. Another issue was that a lot of Windows developers use integrated development environments (IDEs) that don’t have good support for Makefile- and Autoconf-based build systems. In 2020, support for building Git using CMake was added. CMake added better Windows support and IDE integration, especially for Visual Studio. Some modern build system features like out-of-source builds were also included. Recently, it appeared the CMake support was also lagging behind and that it might never be a good option to replace the two other build systems. So Patrick Steinhardt, GitLab Git Engineering Manager, implemented support for the Meson build system with the goal of eventually replacing the Autoconf-, CMake-, and maybe the Makefile-based build systems. The new Meson-based build system has the following advantages: Allows users to easily find the available build options, something which is difficult with Makefiles and CMake Has a simple syntax compared to Autoconf and CMake Supports many different operating systems, compilers, and IDEs Supports modern build system features like out-of-source builds Here is an example of how it can actually be used to build Git: $ cd git # go into the root of Git's source code $ meson setup build/ # setup \"build\" as a build directory $ cd build # go into the \"build\" directory $ meson compile # actually build Git $ meson test # test the new build $ meson install # install the new build Multiple build directories can be set up using meson setup \u003cbuild_dir\u003e, and the configuration of the build inside a build directory can be viewed or changed by running meson configure inside the build directory. More information on how to build Git using Meson can be found at the top of the meson.build file in the Git code repository. A comparison of the different build systems for Git is available as part of Git's technical documentation. This project was led by Patrick Steinhardt. Git is now memory-leak-free (as exercised by the test suite) In our Git release blog post about the previous Git 2.47.0 release, we talked about our ongoing effort to fix all memory leaks surfaced by existing tests in the project. We said that prior to the Git 2.47.0 release, the project had 223 test files containing memory leaks, and that this had been whittled down to just 60. We are pleased to report that the memory leaks in all 60 remaining test files have been resolved. As a result, Git, as exercised by the test suite, is now free of memory leaks. This is an important step towards the longstanding goal of “libifying” Git internal components (which means converting those components into internal libraries). It will also help with optimizing Git for memory usage. Now, any newly added test must be leak-free by default. It's still possible to have leaking tests, but the authors will have to use an escape hatch for that and provide good arguments why their test cannot be made leak free. This project was led by Patrick Steinhardt. Improved bundle URI checks In our Git release blog post about the Git 2.46.0 release, we talked about some bundle URI fixes by Xing Xin. After those fixes, Xing Xin worked on making it possible for fetches using bundles to be fully checked using the fsck mechanism like regular fetches. When validating regular fetches, it's possible to specify different severities for different fsck issues to have fine-grained handling of what is accepted and what is rejected in a specific repository. This wasn't possible for fetches using bundles previously. To further increase the usefulness and safety of bundle-uri, we addressed this problem so that the different severities specified for different fsck issues are now used when checking fetches using bundles, too. This project was led by Justin Tobler. Add reference consistency checks In our Git release blog post about the Git 2.47.0 release, we mentioned Jialuo She's work on adding a new 'verify' subcommand to git-refs(1) which was part of the Google Summer of Code 2024 (GSoC 2024). In that blog post, we said that eventually the goal was to integrate this new subcommand as part of git-fsck(1) to provide a unified way to execute repository consistency checks. Jialuo She has decided to work on that after his GSoC was over. The result from this effort is that git-fsck(1) can now detect and handle a number of reference-related issues, like when the content of a reference is bad, when a symbolic link is used as a symbolic reference, or when the target of a symbolic reference doesn't point to a valid reference. We still need to call git refs verify as part of git-fsck(1), and have the former perform all non-backend-specific checks that the latter currently does, but we are closer to our end goal of a unified way to execute all refs consistency checks. This project was led by Jialuo She. Iterator reuse in reftables In the Git 2.45.0 release, the 'reftables' format was introduced as a new backend for storing references (mostly branches and tags). If you are not yet familiar with the reftables backend, check out our previous Git release blog post where the feature was introduced and our beginner’s guide to learn more about how reftables work. Since that release, we continued to improve this backend, and we recently focused on improving its performance by reusing some internal iterators when reading random references. Before these changes, reading a single reference required us to create a whole new iterator, seek it to the correct location in the respective tables, and then read the next value from it, which can be quite inefficient when reading many references in quick succession. After the change we now only create a single iterator and reuse it to read multiple references, thus saving some overhead. The result of this work is increased performance in a number of reftables-related use cases, especially a 7% speedup when creating many references in a transaction that performs many random reads. Furthermore, this creates the possibility for more optimizations as we can continue to reuse more state kept in the iterators. This project was led by Patrick Steinhardt. Support for reflogs in git-refs migrate After the 'reftables' backend was introduced in Git 2.45.0 (see the section above), we worked on tooling to migrate reference backends in Git 2.46.0, which consisted of adding a new migrate subcommand to git-refs(1). Our article about Git 2.46.0 talked about this work and mentioned some limitations that still existed. In particular, the article said: \"The reflogs in a repository are a component of a reference backend and would also require migration between formats. Unfortunately, the tooling is not yet capable of converting reflogs between the files and reftables backends.\" We are pleased to report that we have lifted this limitation in Git 2.48.0. Reflogs can now also be migrated with git refs migrate. The migration tool is not yet capable of handling a repository with multiple worktrees, but this is the only limitation left. If you don't use worktrees, you can already take advantage of the reftables backend in your existing repositories. This project was led by Karthik Nayak. Ref-filter optimization The 'ref-filter' subsystem is some formatting code used by commands like git for-each-ref, git branch and git tag to sort, filter, format, and display information related to Git references. As repositories grow, they can contain a huge number of references. This is why there is work not only on improving backends that store references, like the reftables backend (see above), but also on optimizing formatting code, like the 'ref-filter' subsystem. We recently found a way to avoid temporarily buffering references and iterating several times on them in the ref-filter code when they should be processed in the same sorting order as the order the backends provide them. This results in memory savings and makes certain commands up to 770 times faster in some cases. This project was led by Patrick Steinhardt. Read more This blog post highlighted just a few of the contributions made by GitLab and the wider Git community for this latest release. You can learn about these from the official release announcement of the Git project. Also, check out our previous Git release blog posts to see other past highlights of contributions from GitLab team members. What’s new in Git 2.47.0? What’s new in Git 2.46.0? What’s new in Git 2.45.0 A beginner's guide to the Git reftable format",
  "image": "https://images.ctfassets.net/r9o86ar0p03f/269b7NrOV9GlWqgPJGOfn2/39a5cb378b8888ec53dcfdaed47bb957/AdobeStock_752438815.jpeg?fm=webp\u0026w=820\u0026h=500",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv data-v-37f1022b=\"\" data-v-53094866=\"\" data-v-74bd29c6=\"\"\u003e\u003cp\u003eThe Git project recently released \u003ca href=\"https://lore.kernel.org/git/xmqqplku7cvm.fsf@gitster.g/\"\u003eGit 2.48.0\u003c/a\u003e. Let\u0026#39;s look at a few notable highlights from this release, which includes contributions from GitLab\u0026#39;s Git team and the wider Git community.\u003c/p\u003e\n\u003ch2 id=\"meson-build-system\" tabindex=\"-1\"\u003eMeson build system \u003ca href=\"#meson-build-system\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eFor a long time, Git could be built using either a \u003ca href=\"https://en.wikipedia.org/wiki/GNU_Make\"\u003eMakefile\u003c/a\u003e-based build system or an \u003ca href=\"https://en.wikipedia.org/wiki/Autoconf\"\u003eAutoconf\u003c/a\u003e-based build system. Git developers have been using mostly the Makefile-based build system, so\n\u003ca href=\"https://lore.kernel.org/git/GV1PR02MB848925A79A9DD733848182D58D662@GV1PR02MB8489.eurprd02.prod.outlook.com/\"\u003ethe Autoconf-based build system has lagged behind\u003c/a\u003e in features and maintenance. Another issue was that a lot of Windows\ndevelopers use integrated development environments (IDEs) that don’t\nhave good support for Makefile- and Autoconf-based build systems.\u003c/p\u003e\n\u003cp\u003eIn 2020, support for building Git using \u003ca href=\"https://cmake.org/\"\u003eCMake\u003c/a\u003e was added. CMake added better Windows support and IDE integration, especially for Visual\nStudio. Some modern build system features like out-of-source builds were also included.\u003c/p\u003e\n\u003cp\u003eRecently, it appeared the CMake support was also lagging\nbehind and that it might never be a good option to replace the two other\nbuild systems. So \u003ca href=\"https://gitlab.com/pks-gitlab\"\u003ePatrick Steinhardt\u003c/a\u003e, GitLab Git Engineering Manager, implemented support for the \u003ca href=\"https://mesonbuild.com/\"\u003eMeson\u003c/a\u003e build\nsystem with the goal of eventually replacing the Autoconf-, CMake-, and\nmaybe the Makefile-based build systems.\u003c/p\u003e\n\u003cp\u003eThe new Meson-based build system has the following advantages:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAllows users to easily find the available build options, something which is difficult with Makefiles and CMake\u003c/li\u003e\n\u003cli\u003eHas a simple syntax compared to Autoconf and CMake\u003c/li\u003e\n\u003cli\u003eSupports many different operating systems, compilers, and IDEs\u003c/li\u003e\n\u003cli\u003eSupports modern build system features like out-of-source builds\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eHere is an example of how it can actually be used to build Git:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ cd git             \t# go into the root of Git\u0026#39;s source code\n$ meson setup build/ \t# setup \u0026#34;build\u0026#34; as a build directory\n$ cd build           \t# go into the \u0026#34;build\u0026#34; directory\n$ meson compile      \t# actually build Git\n$ meson test         \t# test the new build\n$ meson install      \t# install the new build\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMultiple build directories can be set up using \u003ccode\u003emeson setup \u0026lt;build_dir\u0026gt;\u003c/code\u003e, and the configuration of the build inside a build directory can be viewed or changed by running \u003ccode\u003emeson configure\u003c/code\u003e inside the build directory.\u003c/p\u003e\n\u003cp\u003eMore information on how to build Git using Meson can be found at the top of the \u003ca href=\"https://gitlab.com/gitlab-org/git/-/blob/master/meson.build\"\u003e\u003ccode\u003emeson.build\u003c/code\u003e file\u003c/a\u003e in the Git code repository. A\n\u003ca href=\"https://gitlab.com/gitlab-org/git/-/blob/master/Documentation/technical/build-systems.txt\"\u003ecomparison of the different build systems\u003c/a\u003e for Git is available as part of Git\u0026#39;s technical documentation.\u003c/p\u003e\n\u003cp\u003eThis project was led by \u003ca href=\"https://gitlab.com/pks-gitlab\"\u003ePatrick Steinhardt\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"git-is-now-memory-leak-free-(as-exercised-by-the-test-suite)\" tabindex=\"-1\"\u003eGit is now memory-leak-free (as exercised by the test suite) \u003ca href=\"#git-is-now-memory-leak-free-(as-exercised-by-the-test-suite)\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIn our Git release blog post about the previous Git 2.47.0 release, we\ntalked about our \u003ca href=\"https://about.gitlab.com/blog/2024/10/07/whats-new-in-git-2-47-0/#code-refactoring-and-maintainability-improvements\"\u003eongoing effort to fix all memory leaks\u003c/a\u003e surfaced by existing tests in the project. We said that prior to the Git 2.47.0 release, the project had 223 test files containing memory\nleaks, and that this had been whittled down to just 60.\u003c/p\u003e\n\u003cp\u003eWe are pleased to report that the memory leaks in all 60 remaining test files have been resolved. As a result, Git, as exercised by the test suite, is now free of memory leaks. This is an important step towards the longstanding goal of “libifying” Git internal components (which means converting those components into internal libraries). It will also help with optimizing Git for memory usage.\u003c/p\u003e\n\u003cp\u003eNow, any newly added test must be leak-free by default. It\u0026#39;s still\npossible to have leaking tests, but the authors will have to use an\nescape hatch for that and provide good arguments why their test cannot\nbe made leak free.\u003c/p\u003e\n\u003cp\u003eThis project was led by \u003ca href=\"https://gitlab.com/pks-gitlab\"\u003ePatrick Steinhardt\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"improved-bundle-uri-checks\" tabindex=\"-1\"\u003eImproved bundle URI checks \u003ca href=\"#improved-bundle-uri-checks\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIn our Git release blog post about the Git 2.46.0 release, we talked\nabout some \u003ca href=\"https://about.gitlab.com/blog/2024/07/29/whats-new-in-git-2-46-0/#bundle-uri-fixes\"\u003ebundle URI fixes\u003c/a\u003e\nby \u003ca href=\"https://lore.kernel.org/git/pull.1730.git.1715742069966.gitgitgadget@gmail.com/\"\u003eXing Xin\u003c/a\u003e.\nAfter those fixes, Xing Xin worked on making it possible for \u003ca href=\"https://lore.kernel.org/git/pull.1730.v8.git.1718770053.gitgitgadget@gmail.com/\"\u003efetches using bundles to be fully checked\u003c/a\u003e\nusing the \u003ca href=\"https://git-scm.com/docs/git-fsck\"\u003efsck\u003c/a\u003e mechanism like regular fetches.\u003c/p\u003e\n\u003cp\u003eWhen validating regular fetches, it\u0026#39;s possible to specify\n\u003ca href=\"https://git-scm.com/docs/git-fsck#Documentation/git-fsck.txt-fsckltmsg-idgt\"\u003edifferent severities\u003c/a\u003e for \u003ca href=\"https://git-scm.com/docs/git-fsck#_fsck_messages\"\u003edifferent fsck issues\u003c/a\u003e\nto have fine-grained handling of what is accepted and what is rejected in a specific repository. This wasn\u0026#39;t possible for fetches using bundles previously.\u003c/p\u003e\n\u003cp\u003eTo further increase the usefulness and safety of \u003ca href=\"https://git-scm.com/docs/bundle-uri\"\u003ebundle-uri\u003c/a\u003e, we \u003ca href=\"https://lore.kernel.org/git/20241121204119.1440773-1-jltobler@gmail.com/\"\u003eaddressed this problem\u003c/a\u003e so that the different severities specified for different fsck issues\nare now used when checking fetches using bundles, too.\u003c/p\u003e\n\u003cp\u003eThis project was led by \u003ca href=\"https://gitlab.com/justintobler\"\u003eJustin Tobler\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"add-reference-consistency-checks\" tabindex=\"-1\"\u003eAdd reference consistency checks \u003ca href=\"#add-reference-consistency-checks\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIn our Git release blog post about the Git 2.47.0 release, we mentioned Jialuo She\u0026#39;s work on\n\u003ca href=\"https://about.gitlab.com/blog/2024/10/07/whats-new-in-git-2-47-0/#new-subcommand-for-git-refs(1)\"\u003eadding a new \u0026#39;verify\u0026#39; subcommand\u003c/a\u003e to git-refs(1) which was part of the\n\u003ca href=\"https://summerofcode.withgoogle.com/archive/2024/projects/ukm4PTEF\"\u003eGoogle Summer of Code 2024\u003c/a\u003e (GSoC 2024).\u003c/p\u003e\n\u003cp\u003eIn that blog post, we said that eventually the goal was to integrate this new subcommand as part of git-fsck(1) to provide a unified way to execute repository consistency checks. Jialuo She has decided to work on that after his GSoC was over.\u003c/p\u003e\n\u003cp\u003eThe result from \u003ca href=\"https://lore.kernel.org/git/ZrtrT1CPI4YUf5db@ArchLinux/\"\u003ethis effort\u003c/a\u003e\nis that git-fsck(1) can now detect and handle a number of reference-related issues, like when the content of a reference is bad, when a symbolic link is used as a symbolic reference, or when the target of a symbolic reference doesn\u0026#39;t point to a valid reference. We still need to call \u003ccode\u003egit refs verify\u003c/code\u003e as part of git-fsck(1), and have the former perform all non-backend-specific checks that the latter currently does, but we are closer to our end goal of a unified way to execute all refs consistency checks.\u003c/p\u003e\n\u003cp\u003eThis project was led by Jialuo She.\u003c/p\u003e\n\u003ch2 id=\"iterator-reuse-in-reftables\" tabindex=\"-1\"\u003eIterator reuse in reftables \u003ca href=\"#iterator-reuse-in-reftables\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIn the \u003ca href=\"https://gitlab.com/gitlab-org/git/-/raw/master/Documentation/RelNotes/2.45.0.txt\"\u003eGit 2.45.0\u003c/a\u003e release, the \u0026#39;reftables\u0026#39; format was introduced as a new backend for storing references (mostly branches and tags). If you are not yet\nfamiliar with the reftables backend, check out our previous \u003ca href=\"https://about.gitlab.com/blog/2024/04/30/whats-new-in-git-2-45-0/\"\u003eGit release blog post\u003c/a\u003e where the feature was introduced and our beginner’s guide to \u003ca href=\"https://about.gitlab.com/blog/2024/05/30/a-beginners-guide-to-the-git-reftable-format/\"\u003elearn more about how reftables work\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eSince that release, we continued to improve this backend, and we recently focused on improving its performance by \u003ca href=\"https://lore.kernel.org/git/cover.1730732881.git.ps@pks.im/\"\u003ereusing some internal iterators\u003c/a\u003e when reading random references. Before these changes, reading a single reference required us to create a whole new iterator, seek it to the correct location in the respective tables, and then read the next value from it, which can be quite inefficient when reading many references in quick succession. After the change we now only create a single iterator and reuse it to read multiple references, thus saving some overhead.\u003c/p\u003e\n\u003cp\u003eThe result of this work is increased performance in a number of reftables-related use cases, especially a 7% speedup when creating many references in a transaction that performs many random reads. Furthermore, this creates the possibility for more optimizations as we can continue to reuse more state kept in the iterators.\u003c/p\u003e\n\u003cp\u003eThis project was led by \u003ca href=\"https://gitlab.com/pks-gitlab\"\u003ePatrick Steinhardt\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"support-for-reflogs-in-git-refs-migrate\" tabindex=\"-1\"\u003eSupport for reflogs in \u003ccode\u003egit-refs migrate\u003c/code\u003e \u003ca href=\"#support-for-reflogs-in-git-refs-migrate\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eAfter the \u0026#39;reftables\u0026#39; backend was introduced in Git 2.45.0 (see the section above), we worked on tooling to migrate reference backends in Git 2.46.0, which consisted of adding a new \u003ccode\u003emigrate\u003c/code\u003e subcommand to git-refs(1).\u003c/p\u003e\n\u003cp\u003eOur article about Git 2.46.0 \u003ca href=\"https://about.gitlab.com/blog/2024/07/29/whats-new-in-git-2-46-0/#tooling-to-migrate-reference-backends\"\u003etalked about this work\u003c/a\u003e and mentioned some limitations that still existed. In particular, the article said:\u003c/p\u003e\n\u003cp\u003e\u0026#34;The reflogs in a repository are a component of a reference backend and would also require migration between formats. Unfortunately, the tooling is not yet capable of converting reflogs between the files and reftables backends.\u0026#34;\u003c/p\u003e\n\u003cp\u003eWe are pleased to report that we have \u003ca href=\"https://lore.kernel.org/git/20241216-320-git-refs-migrate-reflogs-v4-0-d7cd3f197453@gmail.com/\"\u003elifted this limitation in Git 2.48.0\u003c/a\u003e.\nReflogs can now also be migrated with \u003ccode\u003egit refs migrate\u003c/code\u003e. The migration tool is not yet capable of handling a repository with multiple worktrees, but this is the only limitation left. If you\ndon\u0026#39;t use worktrees, you can already take advantage of the reftables backend in your existing repositories.\u003c/p\u003e\n\u003cp\u003eThis project was led by \u003ca href=\"https://gitlab.com/knayakgl\"\u003eKarthik Nayak\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"ref-filter-optimization\" tabindex=\"-1\"\u003eRef-filter optimization \u003ca href=\"#ref-filter-optimization\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThe \u0026#39;ref-filter\u0026#39; subsystem is some formatting code used by commands like \u003ccode\u003egit for-each-ref\u003c/code\u003e, \u003ccode\u003egit branch\u003c/code\u003e and \u003ccode\u003egit tag\u003c/code\u003e to sort, filter, format, and display information related to Git references.\u003c/p\u003e\n\u003cp\u003eAs repositories grow, they can contain a huge number of references. This is why there is work not only on improving backends that store references, like the reftables backend (see above), but\nalso on optimizing formatting code, like the \u0026#39;ref-filter\u0026#39; subsystem.\u003c/p\u003e\n\u003cp\u003eWe recently \u003ca href=\"https://lore.kernel.org/git/d23c3e3ee7fdb49fcd05b4f2e52dd2a1cfdc10f2.1729510342.git.ps@pks.im/\"\u003efound a way\u003c/a\u003e\nto avoid temporarily buffering references and iterating several times on them in the ref-filter code when they should be processed in the same sorting order as the order the backends provide them. This results in memory savings and makes certain commands up to 770 times faster in some\ncases.\u003c/p\u003e\n\u003cp\u003eThis project was led by \u003ca href=\"https://gitlab.com/pks-gitlab\"\u003ePatrick Steinhardt\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"read-more\" tabindex=\"-1\"\u003eRead more \u003ca href=\"#read-more\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThis blog post highlighted just a few of the contributions made by GitLab and the wider Git community for this latest release. You can learn about these from the official release announcement of the Git project. Also, check out \u003ca href=\"https://about.gitlab.com/blog/tags/git/\"\u003eour previous Git release blog posts\u003c/a\u003e to see other past highlights of contributions from GitLab team members.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://about.gitlab.com/blog/2024/10/07/whats-new-in-git-2-47-0/\"\u003eWhat’s new in Git 2.47.0?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://about.gitlab.com/blog/2024/07/29/whats-new-in-git-2-46-0/\"\u003eWhat’s new in Git 2.46.0?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://about.gitlab.com/blog/2024/04/30/whats-new-in-git-2-45-0/\"\u003eWhat’s new in Git 2.45.0\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://about.gitlab.com/blog/2024/05/30/a-beginners-guide-to-the-git-reftable-format/\"\u003eA beginner\u0026#39;s guide to the Git reftable format\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "10 min read",
  "publishedTime": "2025-01-10T00:00:00Z",
  "modifiedTime": null
}
