{
  "id": "046a744f-cfa8-4e6c-8992-d52a329a62fb",
  "title": "A Nightscout Segment for OhMyPosh shows my realtime Blood Sugar readings in my Git Prompt",
  "link": "http://feeds.hanselman.com/~/673947624/0/scotthanselman~A-Nightscout-Segment-for-OhMyPosh-shows-my-realtime-Blood-Sugar-readings-in-my-Git-Prompt",
  "description": "I've talked about how I love a nice pretty prompt in my Windows Terminal and made videos showing in detail how to do it. I've also worked with my buddy TooTallNate to put my real-time blood sugar into a bash or PowerShell prompt, but this was back in 2017. Now that I'm \"Team OhMyPosh\" I have been meaning to write a Nightscout \"segment\" for my prompt. Nightscout is an open source self-hosted (there are commercial hosts also like T1Pal) website and API for remote display of real-time and near-real-time glucose readings for Diabetics like myself. Since my body has an active REST API where I can just do an HTTP GET (via curl or whatever) and see my blood sugar, it clearly belongs in a place of honor, just like my current Git Branch! Oh My Posh supports configurable \"segments\" and now there's a beta (still needs mmol and stale readings support) Nightscout segment that you can setup in just a few minutes! This prompt works in ANY shell on ANY os! You can do this in zsh, PowerShell, Bash, whatever makes you happy. Here is a YouTube of Jan from OhMyPosh and I coding the segment LIVE in Go. If you have an existing OhMyPosh json config, you can just add another segment like this. Make sure your Nightscout URL includes a secure Token or is public (up to you). Note also that I setup \"if/then\" rules in my background_templates. These are optional and up to you to change to your taste. I set my background colors to red, yellow, green depending on sugar numbers. I also have a foreground template that is not really used, as you can see it always evaluates to black #000, but it shows you how you could set it to white text on a darker background if you wanted. { \"type\": \"nightscout\", \"style\": \"diamond\", \"foreground\": \"#ffffff\", \"background\": \"#ff0000\", \"background_templates\": [ \"{{ if gt .Sgv 150 }}#FFFF00{{ end }}\", \"{{ if lt .Sgv 60 }}#FF0000{{ end }}\", \"#00FF00\" ], \"foreground_templates\": [ \"{{ if gt .Sgv 150 }}#000000{{ end }}\", \"{{ if lt .Sgv 60 }}#000000{{ end }}\", \"#000000\" ], \"leading_diamond\": \"\", \"trailing_diamond\": \"\\uE0B0\", \"properties\": { \"url\": \"https://YOURNIGHTSCOUTAPP.herokuapp.com/api/v1/entries.json?count=1\u0026token=APITOKENFROMYOURADMIN\", \"http_timeout\": 1500, \"template\": \" {{.Sgv}}{{.TrendIcon}}\" }}, By default we will only go out and hit your Nightscout instance every 5 min, only when the prompt is repainted, and we'll only wait 1500ms before giving up. You can set that \"http_timeout\" (how long before we give up) if you feel this slows you down. It'll be cached for 5 min so it's unlikely  to b something you'll notice. The benefit of this new OhMyPosh segment over the previous solution is that it requires no additional services/chron jobs and can be setup extremely quickly. Note also that you can customize your template with NerdFonts. I've included a tiny syringe! Next I'll hope to improve the segment with mmol support as well as strikeout style for \"stale\" (over 15 min old) results. You're also welcome to help out by watching our YouTube and submitting a PR! Sponsor: Make login Auth0’s problem. Not yours. Provide the convenient login features your customers want, like social login, multi-factor authentication, single sign-on, passwordless, and more. Get started for free.© 2021 Scott Hanselman. All rights reserved.",
  "author": "Scott Hanselman",
  "published": "Tue, 23 Nov 2021 20:02:00 GMT",
  "source": "http://feeds.hanselman.com/ScottHanselman",
  "categories": [
    "Diabetes",
    "Open Source"
  ],
  "byline": "Scott Hanselman",
  "length": 3801,
  "excerpt": "I've talked about how I love a nice pretty prompt in my Windows Terminal and ...",
  "siteName": "",
  "favicon": "https://images.hanselman.com/main/apple-touch-icon-114x114.png",
  "text": "I've talked about how I love a nice pretty prompt in my Windows Terminal and made videos showing in detail how to do it. I've also worked with my buddy TooTallNate to put my real-time blood sugar into a bash or PowerShell prompt, but this was back in 2017. Now that I'm \"Team OhMyPosh\" I have been meaning to write a Nightscout \"segment\" for my prompt. Nightscout is an open source self-hosted (there are commercial hosts also like T1Pal) website and API for remote display of real-time and near-real-time glucose readings for Diabetics like myself. Since my body has an active REST API where I can just do an HTTP GET (via curl or whatever) and see my blood sugar, it clearly belongs in a place of honor, just like my current Git Branch! Oh My Posh supports configurable \"segments\" and now there's a beta (still needs mmol and stale readings support) Nightscout segment that you can setup in just a few minutes! This prompt works in ANY shell on ANY os! You can do this in zsh, PowerShell, Bash, whatever makes you happy. Here is a YouTube of Jan from OhMyPosh and I coding the segment LIVE in Go. If you have an existing OhMyPosh json config, you can just add another segment like this. Make sure your Nightscout URL includes a secure Token or is public (up to you). Note also that I setup \"if/then\" rules in my background_templates. These are optional and up to you to change to your taste. I set my background colors to red, yellow, green depending on sugar numbers. I also have a foreground template that is not really used, as you can see it always evaluates to black #000, but it shows you how you could set it to white text on a darker background if you wanted. { \"type\": \"nightscout\", \"style\": \"diamond\", \"foreground\": \"#ffffff\", \"background\": \"#ff0000\", \"background_templates\": [ \"{{ if gt .Sgv 150 }}#FFFF00{{ end }}\", \"{{ if lt .Sgv 60 }}#FF0000{{ end }}\", \"#00FF00\" ], \"foreground_templates\": [ \"{{ if gt .Sgv 150 }}#000000{{ end }}\", \"{{ if lt .Sgv 60 }}#000000{{ end }}\", \"#000000\" ], \"leading_diamond\": \"\", \"trailing_diamond\": \"\\uE0B0\", \"properties\": { \"url\": \"https://YOURNIGHTSCOUTAPP.herokuapp.com/api/v1/entries.json?count=1\u0026token=APITOKENFROMYOURADMIN\", \"http_timeout\": 1500, \"template\": \" {{.Sgv}}{{.TrendIcon}}\" }}, By default we will only go out and hit your Nightscout instance every 5 min, only when the prompt is repainted, and we'll only wait 1500ms before giving up. You can set that \"http_timeout\" (how long before we give up) if you feel this slows you down. It'll be cached for 5 min so it's unlikely  to b something you'll notice. The benefit of this new OhMyPosh segment over the previous solution is that it requires no additional services/chron jobs and can be setup extremely quickly. Note also that you can customize your template with NerdFonts. I've included a tiny syringe! Next I'll hope to improve the segment with mmol support as well as strikeout style for \"stale\" (over 15 min old) results. You're also welcome to help out by watching our YouTube and submitting a PR! Sponsor: Make login Auth0’s problem. Not yours. Provide the convenient login features your customers want, like social login, multi-factor authentication, single sign-on, passwordless, and more. Get started for free. About Scott Scott Hanselman is a former professor, former Chief Architect in finance, now speaker, consultant, father, diabetic, and Microsoft employee. He is a failed stand-up comic, a cornrower, and a book author. About   Newsletter Hosting By",
  "image": "https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/a1ea1c6a57b0_119D3/image_d14e0906-8932-44e0-a493-86eeac62c1ae.png",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003csection\u003e\n            \n            \u003cp\u003eI\u0026#39;ve talked about \u003ca href=\"https://www.hanselman.com/blog/my-ultimate-powershell-prompt-with-oh-my-posh-and-the-windows-terminal\"\u003ehow I love a nice pretty prompt in my Windows Terminal\u003c/a\u003e and \u003ca href=\"https://www.youtube.com/watch?v=VT2L1SXFq9U\"\u003emade videos showing in detail how to do it\u003c/a\u003e. I\u0026#39;ve also worked with my buddy \u003ca href=\"https://www.hanselman.com/blog/visualizing-your-realtime-blood-sugar-values-and-a-git-prompt-on-windows-powershell-and-linux-bash\"\u003eTooTallNate to put my real-time blood sugar into a bash or PowerShell prompt\u003c/a\u003e, but this was back in 2017.\u003c/p\u003e \u003cp\u003eNow that I\u0026#39;m \u0026#34;Team \u003ca href=\"https://ohmyposh.dev/\"\u003eOhMyPosh\u003c/a\u003e\u0026#34; I have been meaning to write a Nightscout \u0026#34;segment\u0026#34; for my prompt. \u003ca href=\"https://www.nightscoutfoundation.org/how-you-can-help\"\u003eNightscout\u003c/a\u003e is an open source self-hosted (there are \u003ca href=\"https://www.t1pal.com/\"\u003ecommercial hosts also like T1Pal\u003c/a\u003e) website and API for remote display of real-time and near-real-time glucose readings for Diabetics like myself.\u003c/p\u003e \u003cp\u003eSince my body has an active REST API where I can just do an HTTP GET (via curl or whatever) and see my blood sugar, it clearly belongs in a place of honor, just like my current Git Branch! \u003c/p\u003e \u003cfigure\u003e\u003cimg title=\"My blood sugar in my Prompt!\" alt=\"My blood sugar in my Prompt!\" src=\"https://hanselmanblogcontent.azureedge.net/Windows-Live-Writer/a1ea1c6a57b0_119D3/image_d14e0906-8932-44e0-a493-86eeac62c1ae.png\" width=\"999\" height=\"37\"/\u003e \u003cp\u003e\u003ca href=\"https://ohmyposh.dev/docs/\"\u003eOh My Posh supports configurable \u0026#34;segments\u0026#34;\u003c/a\u003e and now there\u0026#39;s a beta (still needs mmol and stale readings support) \u003ca href=\"https://ohmyposh.dev/docs/nightscout\"\u003eNightscout segment\u003c/a\u003e that you can setup in just a few minutes! \u003c/p\u003e\u003c/figure\u003e \u003cp\u003eThis prompt works in ANY shell on ANY os! You can do this in zsh, PowerShell, Bash, whatever makes you happy.\u003c/p\u003e \u003cp\u003eHere is a YouTube of Jan from OhMyPosh and I coding the segment LIVE in Go.\u003c/p\u003e \u003ccenter\u003e \u003cp\u003e\u003ciframe title=\"YouTube video player\" height=\"315\" src=\"https://www.youtube.com/embed/_meKUIm9NwA\" frameborder=\"0\" width=\"560\" allowfullscreen=\"\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\u003e\u003c/iframe\u003e\u003c/p\u003e\u003c/center\u003e \u003cp\u003eIf you have an existing OhMyPosh json config, you can just add another segment like this. Make sure your Nightscout URL includes a secure Token or is public (up to you). Note also that I setup \u0026#34;if/then\u0026#34; rules in my background_templates. These are optional and up to you to change to your taste. I set my background colors to red, yellow, green depending on sugar numbers. I also have a foreground template that is not really used, as you can see it always evaluates to black #000, but it shows you how you could set it to white text on a darker background if you wanted. \u003c/p\u003e\u003cpre\u003e{\u003cbr/\u003e  \u0026#34;type\u0026#34;: \u0026#34;nightscout\u0026#34;,\u003cbr/\u003e  \u0026#34;style\u0026#34;: \u0026#34;diamond\u0026#34;,\u003cbr/\u003e  \u0026#34;foreground\u0026#34;: \u0026#34;#ffffff\u0026#34;,\u003cbr/\u003e  \u0026#34;background\u0026#34;: \u0026#34;#ff0000\u0026#34;,\u003cbr/\u003e  \u0026#34;background_templates\u0026#34;: [\u003cbr/\u003e    \u0026#34;{{ if gt .Sgv 150 }}#FFFF00{{ end }}\u0026#34;,\u003cbr/\u003e    \u0026#34;{{ if lt .Sgv 60 }}#FF0000{{ end }}\u0026#34;,\u003cbr/\u003e    \u0026#34;#00FF00\u0026#34;\u003cbr/\u003e  ],\u003cbr/\u003e  \u0026#34;foreground_templates\u0026#34;: [\u003cbr/\u003e    \u0026#34;{{ if gt .Sgv 150 }}#000000{{ end }}\u0026#34;,\u003cbr/\u003e    \u0026#34;{{ if lt .Sgv 60 }}#000000{{ end }}\u0026#34;,\u003cbr/\u003e    \u0026#34;#000000\u0026#34;\u003cbr/\u003e  ],\u003cp\u003e  \u0026#34;leading_diamond\u0026#34;: \u0026#34;\u0026#34;,\u003cbr/\u003e  \u0026#34;trailing_diamond\u0026#34;: \u0026#34;\\uE0B0\u0026#34;,\u003cbr/\u003e  \u0026#34;properties\u0026#34;: {\u003cbr/\u003e    \u0026#34;url\u0026#34;: \u0026#34;https://YOURNIGHTSCOUTAPP.herokuapp.com/api/v1/entries.json?count=1\u0026amp;token=APITOKENFROMYOURADMIN\u0026#34;,\u003cbr/\u003e    \u0026#34;http_timeout\u0026#34;: 1500,\u003cbr/\u003e    \u0026#34;template\u0026#34;: \u0026#34; {{.Sgv}}{{.TrendIcon}}\u0026#34;\u003cbr/\u003e  }\u003cbr/\u003e},\n\u003c/p\u003e\u003c/pre\u003e\n\u003cp\u003eBy default we will only go out and hit your Nightscout instance every 5 min, only when the prompt is repainted, and we\u0026#39;ll only wait 1500ms before giving up. You can set that \u0026#34;http_timeout\u0026#34; (how long before we give up) if you feel this slows you down. It\u0026#39;ll be cached for 5 min so it\u0026#39;s unlikely  to b something you\u0026#39;ll notice. The benefit of this new OhMyPosh segment over the previous solution is that it requires no additional services/chron jobs and can be setup extremely quickly. Note also that you can customize your template with \u003ca href=\"https://www.hanselman.com/blog/how-to-make-a-pretty-prompt-in-windows-terminal-with-powerline-nerd-fonts-cascadia-code-wsl-and-ohmyposh\"\u003eNerdFonts\u003c/a\u003e. I\u0026#39;ve included a tiny syringe!\u003c/p\u003e\n\u003cfigure\u003e\u003cimg title=\"What a lovely prompt with Blood Sugar!\" alt=\"What a lovely prompt with Blood Sugar!\" src=\"https://hanselmanblogcontent.azureedge.net/Windows-Live-Writer/a1ea1c6a57b0_119D3/image_84db877d-82c9-4d16-8788-e2692ce7a7e9.png\" width=\"999\" height=\"111\"/\u003e\u003c/figure\u003e\n\u003cp\u003eNext I\u0026#39;ll hope to improve the segment with mmol support as well as strikeout style for \u0026#34;stale\u0026#34; (over 15 min old) results. You\u0026#39;re also welcome to help out by watching \u003ca href=\"https://www.youtube.com/watch?v=_meKUIm9NwA\"\u003eour YouTube\u003c/a\u003e and submitting a PR! \n\u003c/p\u003e\u003chr/\u003e\n\n\n\u003cp\u003e\u003cstrong\u003eSponsor: \u003c/strong\u003eMake login Auth0’s problem. Not yours. Provide the convenient login features your customers want, like social login, multi-factor authentication, single sign-on, passwordless, and more. \u003ca href=\"http://pubads.g.doubleclick.net/gampad/clk?id=5840349572\u0026amp;iu=/6839/lqm.scotthanselman.site\"\u003eGet started for free.\u003c/a\u003e\u003c/p\u003e\n\n\n\n            \u003cdiv\u003e\n                \u003cdiv\u003e\n                    \u003ch4\u003eAbout Scott\u003c/h4\u003e\n                    \u003cdiv\u003e\n                        \u003cp\u003eScott Hanselman is a former professor, former Chief Architect in finance, now speaker, consultant, father, diabetic, and Microsoft employee. He is a failed stand-up comic, a cornrower, and a book author.\u003c/p\u003e\n                        \u003cp\u003e\u003ca href=\"https://facebook.com/shanselman\"\u003e\u003cimg src=\"http://images.hanselman.com/main/icon-fb.png\" alt=\"facebook\"/\u003e\u003c/a\u003e\n                        \u003ca href=\"https://twitter.com/shanselman\"\u003e\u003cimg src=\"http://images.hanselman.com/main/icon-twitter.png\" alt=\"twitter\"/\u003e\u003c/a\u003e\n                        \u003ca href=\"http://feeds.hanselman.com/ScottHanselman\"\u003e\u003cimg src=\"http://images.hanselman.com/main/icon-rss.png\" alt=\"subscribe\"/\u003e\u003c/a\u003e\u003cbr/\u003e\n                        \u003ca href=\"http://hanselman.com/about\"\u003eAbout\u003c/a\u003e   \u003ca href=\"http://www.hanselman.com/newsletter\"\u003eNewsletter\u003c/a\u003e\n                    \u003c/p\u003e\u003c/div\u003e\n                \u003c/div\u003e\n\n                \u003cdiv\u003e\n                    \u003cp\u003e\u003cstrong\u003eHosting By\u003c/strong\u003e\u003cbr/\u003e\n                        \u003ca rel=\"nofollow\" href=\"https://azure.microsoft.com/free\"\u003e\u003cimg alt=\"Hosted in an Azure App Service\" width=\"125\" height=\"125\" src=\"http://images.hanselman.com/main/azure-250x250.png\"/\u003e\u003c/a\u003e\n                    \u003c/p\u003e\n\n                \u003c/div\u003e\n            \u003c/div\u003e\n\n            \n\n\n            \n\n            \n        \u003c/section\u003e\u003c/div\u003e",
  "readingTime": "5 min read",
  "publishedTime": null,
  "modifiedTime": null
}
