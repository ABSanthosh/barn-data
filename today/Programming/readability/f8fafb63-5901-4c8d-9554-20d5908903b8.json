{
  "id": "f8fafb63-5901-4c8d-9554-20d5908903b8",
  "title": "Certificate-based Kubernetes integration sunsetting on GitLab.com",
  "link": "https://about.gitlab.com/blog/2025/02/17/certificate-based-kubernetes-integration-sunsetting-on-gitlab-com",
  "description": "",
  "author": "Viktor Nagy",
  "published": "2025-02-17T00:00:00.000Z",
  "source": "https://about.gitlab.com/atom.xml",
  "categories": null,
  "byline": "Viktor Nagy",
  "length": 7414,
  "excerpt": "Learn how to check if you are impacted by the sunsetting in May 2025, and the steps needed to migrate to our proposed alternatives, including the GitLab agent for Kubernetes.",
  "siteName": "GitLab",
  "favicon": "https://about.gitlab.com/blog/nuxt-images/ico/favicon-192x192.png?cache=2022041",
  "text": "The certificate-based Kubernetes integration was deprecated in GitLab November 2021, and is available on GitLab.com only to previous users. In May 2025, the integration will sunset on GitLab.com and will stop working. Customers often use the integration to deploy applications to production and non-production environments. As a result, failure to migrate to other options could cause a critical incident in your application delivery pipelines. This post outlines the alternative features that GitLab offers, points out how you can identify the potential impact on your GitLab.com groups and projects, and offers links to the GitLab documentation to learn more about the necessary migration steps. Recommended alternative: The GitLab agent for Kubernetes The GitLab agent for Kubernetes represents a significant advancement over the certificate-based integration, offering enhanced security, reliability, and functionality. Here are the key benefits of migrating to the agent-based approach: Enhanced security Eliminates the need for storing cluster credentials in GitLab Provides secure, bidirectional communication between GitLab and your clusters Supports fine-grained access control and authorization policies Enables secure GitOps workflows with pull-based deployments Improved reliability Maintains persistent connections, reducing deployment failures Handles network interruptions gracefully Provides better logging and troubleshooting capabilities Supports automatic reconnection and state recovery Advanced features Real-time cluster information integrated into the GitLab UI Integration with GitLab CI/CD pipelines Support for multiple clusters and multitenant environments Enhanced GitOps capabilities by integrating with FluxCD Get started with the GitLab agent for Kubernetes If you haven't tried the GitLab Agent for Kubernetes yet, we strongly recommend going through the getting started guides. These guides will walk you through the basic setup and help you understand how the agent works in your environment. The hands-on experience will help make the migration process smoother. Impact assessment We implemented a dedicated API endpoint to query all the certificate-based clusters within a GitLab group hierarchy. We recommend starting with this API to see if you have any clusters that need to be migrated. Once you identify the clusters, you should: Find group and project owners using the certificate-based integration. Check CI/CD pipelines for direct Kubernetes API calls. Identify Auto DevOps projects using the old integration. List any GitLab-managed clusters in use. Set up the agent in the affected clusters. Follow the guidance provided in this post and record your progress in a tracking issue. Update your CI/CD integration The legacy certificate-based integration works using GitLab CI/CD. Because the agent seamlessly integrates with GitLab CI/CD pipelines, you can use it to replace the certificate-based integration with relatively little effort. The agent-based CI/CD integration offers several improvements over the certificate-based approach: Direct cluster access: CI/CD jobs can interact with clusters through the agent without requiring separate credentials. Enhanced security: You don't need to store cluster credentials in CI/CD variables. Simplified configuration: A single agent configuration file manages all cluster interactions. Better performance: Persistent connections reduce deployment overhead. Flexible authorization: On GitLab Premium and Ultimate, you can rely on impersonation features to restrict CI/CD jobs in the cluster. At a high level, there are three steps to migrating your existing CI/CD pipelines: Set up the agent by following the getting started guides. Share the agent connection with the necessary groups and projects.. Select the agent in the pipeline jobs. You can read more about migrating Kubernetes deployments in general or about the agent CI/CD integration in the documentation. Migrate your Auto DevOps configuration Auto DevOps is a set of CI/CD templates that are often customized by users. With Auto DevOps, you can automatically configure your CI/CD pipelines to build, test, and deploy your applications based on best practices. It's commonly used with the certificate-based integration for deploying applications to Kubernetes clusters. If you use Auto DevOps and you rely on the certificate-based integration, you need to transition to the agent-based deployment mechanism. The migration process is straightforward: Set up the CI/CD integration as described above. Configure the KUBE_CONTEXT environment variable to select an agent. Remove the old certificate-based cluster integration. You can read more about using Auto DevOps with the agent for Kubernetes in the documentation. Transition from GitLab-managed clusters to GitLab-managed Kubernetes resources With GitLab-managed clusters, GitLab automatically creates and manages Kubernetes resources for your projects. When you allow GitLab to manage your cluster, it creates RBAC resources like a Namespace and ServiceAccount. If you use GitLab-managed clusters, you should transition to GitLab-managed Kubernetes resources, which offers a more flexible and secure approach to cluster management. To migrate: Document your existing cluster configuration. Create corresponding Kubernetes resource definitions. Store configurations in your repository. Configure the GitLab agent to manage these resources. Verify resource management and deployment. Remove the old cluster integration. You can read more about GitLab-managed Kubernetes resources in the documentation. Manage cloud provider clusters created through GitLab If you created Kubernetes clusters through the GitLab integration with Google Kubernetes Engine (GKE) or Amazon Elastic Kubernetes Service (EKS), these clusters were provisioned in your respective cloud provider accounts. After the certificate-based integration is removed: Your clusters will remain fully operational in Google Cloud or AWS. You will need to manage these clusters directly through your cloud provider's console: GKE clusters through Google Cloud Console EKS clusters through AWS Management Console To view cluster information within GitLab: Install the GitLab agent for Kubernetes. Configure the Kubernetes dashboard integration. Check the dashboard for cluster details and resource information. This change only affects how you interact with the clusters through GitLab – it does not impact the clusters' operation or availability in your cloud provider accounts. You should still migrate your deployment setups as described above. What should I do next? To minimize the impact to you and your infrastructure, you should follow these steps: Check if you are impacted as soon as possible. Plan your migration timeline before May 2025. Start with non-production environments to gain experience. Document your current setup and desired state. Test the agent-based approach in a staging environment. Gradually migrate production workloads. Monitor and validate the new setup. The migration to the GitLab agent for Kubernetes represents a significant improvement in how GitLab interacts with Kubernetes clusters. While the migration requires careful planning and execution, the benefits in terms of security, reliability, and functionality make it a worthwhile investment for your DevSecOps infrastructure.",
  "image": "https://images.ctfassets.net/r9o86ar0p03f/3L7ZP4GxJrShu6qImuS4Wo/3e672e0b9ce98b50dde4b04cf7b2c84d/blog-image-template-1800x945__16_.png?fm=webp\u0026w=820\u0026h=500",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv data-v-37f1022b=\"\" data-v-53094866=\"\" data-v-74bd29c6=\"\"\u003e\u003cp\u003eThe certificate-based Kubernetes integration was \u003ca href=\"https://about.gitlab.com/blog/2021/11/15/deprecating-the-cert-based-kubernetes-integration/\"\u003edeprecated in GitLab November 2021\u003c/a\u003e, and is available on GitLab.com only to previous users. In May 2025, the integration will sunset on GitLab.com and will stop working. Customers often use the integration to deploy applications to production and non-production environments. As a result, failure to migrate to other options could cause a critical incident in your application delivery pipelines. This post outlines the alternative features that GitLab offers, points out how you can identify the potential impact on your GitLab.com groups and projects, and offers links to the GitLab documentation to learn more about the necessary migration steps.\u003c/p\u003e\n\u003ch2 id=\"recommended-alternative-the-gitlab-agent-for-kubernetes\" tabindex=\"-1\"\u003eRecommended alternative: The GitLab agent for Kubernetes \u003ca href=\"#recommended-alternative-the-gitlab-agent-for-kubernetes\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThe GitLab agent for Kubernetes represents a significant advancement over the certificate-based integration, offering enhanced security, reliability, and functionality. Here are the key benefits of migrating to the agent-based approach:\u003c/p\u003e\n\u003ch3 id=\"enhanced-security\" tabindex=\"-1\"\u003eEnhanced security \u003ca href=\"#enhanced-security\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eEliminates the need for storing cluster credentials in GitLab\u003c/li\u003e\n\u003cli\u003eProvides secure, bidirectional communication between GitLab and your clusters\u003c/li\u003e\n\u003cli\u003eSupports fine-grained access control and authorization policies\u003c/li\u003e\n\u003cli\u003eEnables secure GitOps workflows with pull-based deployments\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"improved-reliability\" tabindex=\"-1\"\u003eImproved reliability \u003ca href=\"#improved-reliability\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMaintains persistent connections, reducing deployment failures\u003c/li\u003e\n\u003cli\u003eHandles network interruptions gracefully\u003c/li\u003e\n\u003cli\u003eProvides better logging and troubleshooting capabilities\u003c/li\u003e\n\u003cli\u003eSupports automatic reconnection and state recovery\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"advanced-features\" tabindex=\"-1\"\u003eAdvanced features \u003ca href=\"#advanced-features\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eReal-time cluster information integrated into the GitLab UI\u003c/li\u003e\n\u003cli\u003eIntegration with GitLab CI/CD pipelines\u003c/li\u003e\n\u003cli\u003eSupport for multiple clusters and multitenant environments\u003c/li\u003e\n\u003cli\u003eEnhanced GitOps capabilities by integrating with FluxCD\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"get-started-with-the-gitlab-agent-for-kubernetes\" tabindex=\"-1\"\u003eGet started with the GitLab agent for Kubernetes \u003ca href=\"#get-started-with-the-gitlab-agent-for-kubernetes\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIf you haven\u0026#39;t tried the GitLab Agent for Kubernetes yet, we strongly recommend going through the \u003ca href=\"https://docs.gitlab.com/ee/user/clusters/agent/getting_started\"\u003egetting started guides\u003c/a\u003e. These guides will walk you through the basic setup and help you understand how the agent works in your environment. The hands-on experience will help make the migration process smoother.\u003c/p\u003e\n\u003ch2 id=\"impact-assessment\" tabindex=\"-1\"\u003eImpact assessment \u003ca href=\"#impact-assessment\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eWe implemented a \u003ca href=\"https://docs.gitlab.com/ee/api/cluster_discovery.html\"\u003ededicated API\u003c/a\u003e endpoint to query all the certificate-based clusters within a GitLab group hierarchy. We recommend starting with this API to see if you have any clusters that need to be migrated.\u003c/p\u003e\n\u003cp\u003eOnce you identify the clusters, you should:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eFind group and project owners using the certificate-based integration.\u003c/li\u003e\n\u003cli\u003eCheck CI/CD pipelines for direct Kubernetes API calls.\u003c/li\u003e\n\u003cli\u003eIdentify Auto DevOps projects using the old integration.\u003c/li\u003e\n\u003cli\u003eList any GitLab-managed clusters in use.\u003c/li\u003e\n\u003cli\u003eSet up the agent in the affected clusters.\u003c/li\u003e\n\u003cli\u003eFollow the guidance provided in this post and record your progress in a tracking issue.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"update-your-cicd-integration\" tabindex=\"-1\"\u003eUpdate your CI/CD integration \u003ca href=\"#update-your-cicd-integration\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThe legacy certificate-based integration works using GitLab CI/CD. Because the agent seamlessly integrates with GitLab CI/CD pipelines, you can use it to replace the certificate-based integration with relatively little effort. The agent-based CI/CD integration offers several improvements over the certificate-based approach:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eDirect cluster access:\u003c/strong\u003e CI/CD jobs can interact with clusters through the agent without requiring separate credentials.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEnhanced security:\u003c/strong\u003e You don\u0026#39;t need to store cluster credentials in CI/CD variables.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSimplified configuration:\u003c/strong\u003e A single agent configuration file manages all cluster interactions.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBetter performance:\u003c/strong\u003e Persistent connections reduce deployment overhead.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFlexible authorization:\u003c/strong\u003e On GitLab Premium and Ultimate, you can rely on impersonation features to restrict CI/CD jobs in the cluster.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAt a high level, there are three steps to migrating your existing CI/CD pipelines:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eSet up the agent by following \u003ca href=\"https://docs.gitlab.com/ee/user/clusters/agent/getting_started\"\u003ethe getting started guides\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/ee/user/clusters/agent/ci_cd_workflow.html#authorize-the-agent\"\u003eShare the agent connection with the necessary groups and projects.\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/ee/user/clusters/agent/ci_cd_workflow.html#update-your-gitlab-ciyml-file-to-run-kubectl-commands\"\u003eSelect the agent in the pipeline jobs.\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eYou can read more about \u003ca href=\"https://docs.gitlab.com/ee/user/infrastructure/clusters/migrate_to_gitlab_agent.html\"\u003emigrating Kubernetes deployments in general\u003c/a\u003e or about \u003ca href=\"https://docs.gitlab.com/ee/user/clusters/agent/ci_cd_workflow.html\"\u003ethe agent CI/CD integration\u003c/a\u003e in the documentation.\u003c/p\u003e\n\u003ch2 id=\"migrate-your-auto-devops-configuration\" tabindex=\"-1\"\u003eMigrate your Auto DevOps configuration \u003ca href=\"#migrate-your-auto-devops-configuration\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eAuto DevOps is a set of CI/CD templates that are often customized by users. With Auto DevOps, you can automatically configure your CI/CD pipelines to build, test, and deploy your applications based on best practices. It\u0026#39;s commonly used with the certificate-based integration for deploying applications to Kubernetes clusters.\u003c/p\u003e\n\u003cp\u003eIf you use Auto DevOps and you rely on the certificate-based integration, you need to transition to the agent-based deployment mechanism. The migration process is straightforward:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eSet up the CI/CD integration as described above.\u003c/li\u003e\n\u003cli\u003eConfigure the \u003ccode\u003eKUBE_CONTEXT\u003c/code\u003e environment variable to select an agent.\u003c/li\u003e\n\u003cli\u003eRemove the old certificate-based cluster integration.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eYou can read more about \u003ca href=\"https://docs.gitlab.com/ee/user/clusters/agent/ci_cd_workflow.html#environments-that-use-auto-devops\"\u003eusing Auto DevOps with the agent for Kubernetes\u003c/a\u003e in the documentation.\u003c/p\u003e\n\u003ch2 id=\"transition-from-gitlab-managed-clusters-to-gitlab-managed-kubernetes-resources\" tabindex=\"-1\"\u003eTransition from GitLab-managed clusters to GitLab-managed Kubernetes resources \u003ca href=\"#transition-from-gitlab-managed-clusters-to-gitlab-managed-kubernetes-resources\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eWith GitLab-managed clusters, GitLab automatically creates and manages Kubernetes resources for your projects. When you allow GitLab to manage your cluster, it creates RBAC resources like a Namespace and ServiceAccount.\u003c/p\u003e\n\u003cp\u003eIf you use GitLab-managed clusters, you should transition to GitLab-managed Kubernetes resources, which offers a more flexible and secure approach to cluster management.\u003c/p\u003e\n\u003cp\u003eTo migrate:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eDocument your existing cluster configuration.\u003c/li\u003e\n\u003cli\u003eCreate corresponding Kubernetes resource definitions.\u003c/li\u003e\n\u003cli\u003eStore configurations in your repository.\u003c/li\u003e\n\u003cli\u003eConfigure the GitLab agent to manage these resources.\u003c/li\u003e\n\u003cli\u003eVerify resource management and deployment.\u003c/li\u003e\n\u003cli\u003eRemove the old cluster integration.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eYou can read more about \u003ca href=\"https://docs.gitlab.com/ee/user/clusters/agent/getting_started\"\u003eGitLab-managed Kubernetes resources\u003c/a\u003e in the documentation.\u003c/p\u003e\n\u003ch2 id=\"manage-cloud-provider-clusters-created-through-gitlab\" tabindex=\"-1\"\u003eManage cloud provider clusters created through GitLab \u003ca href=\"#manage-cloud-provider-clusters-created-through-gitlab\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eIf you created Kubernetes clusters through the GitLab integration with Google Kubernetes Engine (GKE) or Amazon Elastic Kubernetes Service (EKS), these clusters were provisioned in your respective cloud provider accounts. After the certificate-based integration is removed:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eYour clusters will remain fully operational in Google Cloud or AWS.\u003c/li\u003e\n\u003cli\u003eYou will need to manage these clusters directly through your cloud provider\u0026#39;s console:\n\u003cul\u003e\n\u003cli\u003eGKE clusters through Google Cloud Console\u003c/li\u003e\n\u003cli\u003eEKS clusters through AWS Management Console\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eTo view cluster information within GitLab:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eInstall the GitLab agent for Kubernetes.\u003c/li\u003e\n\u003cli\u003eConfigure the Kubernetes dashboard integration.\u003c/li\u003e\n\u003cli\u003eCheck the dashboard for cluster details and resource information.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThis change only affects how you interact with the clusters through GitLab – it does not impact the clusters\u0026#39; operation or availability in your cloud provider accounts.\u003c/p\u003e\n\u003cp\u003eYou should still migrate your deployment setups as described above.\u003c/p\u003e\n\u003ch2 id=\"what-should-i-do-next%3F\" tabindex=\"-1\"\u003eWhat should I do next? \u003ca href=\"#what-should-i-do-next%3F\"\u003e\u003csvg width=\"24\" height=\"24\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\u003cpath d=\"M12.2426 3.75736C11.4615 2.97631 10.1952 2.97631 9.41416 3.75736L7.99995 5.17157C7.60942 5.56209 6.97626 5.56209 6.58573 5.17157C6.19521 4.78105 6.19521 4.14788 6.58573 3.75736L7.99995 2.34314C9.56205 0.781046 12.0947 0.781046 13.6568 2.34314C15.2189 3.90524 15.2189 6.4379 13.6568 8L12.2426 9.41421C11.8521 9.80473 11.2189 9.80473 10.8284 9.41421C10.4379 9.02369 10.4379 8.39052 10.8284 8L12.2426 6.58578C13.0236 5.80473 13.0236 4.5384 12.2426 3.75736Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M10.5355 5.4645C10.926 5.85502 10.926 6.48819 10.5355 6.87871L6.87863 10.5356C6.4881 10.9261 5.85494 10.9261 5.46441 10.5356C5.07389 10.145 5.07389 9.51188 5.46441 9.12135L9.12127 5.4645C9.51179 5.07397 10.145 5.07397 10.5355 5.4645Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003cpath d=\"M3.75742 9.41422C2.97637 10.1953 2.97637 11.4616 3.75742 12.2426C4.53847 13.0237 5.8048 13.0237 6.58584 12.2426L8.00006 10.8284C8.39058 10.4379 9.02375 10.4379 9.41427 10.8284C9.8048 11.219 9.8048 11.8521 9.41427 12.2426L8.00006 13.6569C6.43796 15.219 3.9053 15.219 2.3432 13.6569C0.781107 12.0948 0.781107 9.56211 2.3432 8.00001L3.75742 6.5858C4.14794 6.19527 4.78111 6.19527 5.17163 6.5858C5.56216 6.97632 5.56215 7.60948 5.17163 8.00001L3.75742 9.41422Z\" fill=\"#333333\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eTo minimize the impact to you and your infrastructure, you should follow these steps:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eCheck if you are impacted as soon as possible.\u003c/li\u003e\n\u003cli\u003ePlan your migration timeline before May 2025.\u003c/li\u003e\n\u003cli\u003eStart with non-production environments to gain experience.\u003c/li\u003e\n\u003cli\u003eDocument your current setup and desired state.\u003c/li\u003e\n\u003cli\u003eTest the agent-based approach in a staging environment.\u003c/li\u003e\n\u003cli\u003eGradually migrate production workloads.\u003c/li\u003e\n\u003cli\u003eMonitor and validate the new setup.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe migration to the GitLab agent for Kubernetes represents a significant improvement in how GitLab interacts with Kubernetes clusters. While the migration requires careful planning and execution, the benefits in terms of security, reliability, and functionality make it a worthwhile investment for your DevSecOps infrastructure.\u003c/p\u003e\n\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "8 min read",
  "publishedTime": "2025-02-17T00:00:00Z",
  "modifiedTime": null
}
