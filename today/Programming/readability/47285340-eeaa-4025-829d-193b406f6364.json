{
  "id": "47285340-eeaa-4025-829d-193b406f6364",
  "title": "Ktor 3.2.2 Is Now Available",
  "link": "https://blog.jetbrains.com/kotlin/2025/07/ktor-3-2-0-is-now-available-2/",
  "description": "The Ktor 3.2.2 patch release brings a critical fix for Android D8 compatibility, along with some minor enhancements and bug fixes. ðŸš€ Get started Ready to explore Ktor 3.2.2? Start building your next project today with our interactive project generator at start.ktor.io. Your feedback and contributions are always welcome! ðŸ”— Get Started With Ktor | [â€¦]",
  "author": "Simon Vergauwen",
  "published": "Thu, 17 Jul 2025 14:48:58 +0000",
  "source": "https://blog.jetbrains.com/feed",
  "categories": [
    "ktor",
    "news",
    "releases",
    "release"
  ],
  "byline": "Simon Vergauwen",
  "length": 4685,
  "excerpt": "Ktor 3.2.2 is here! This patch release brings a critical fix for Android D8 compatibility, along with some minor enhancements and bug fixes.",
  "siteName": "The JetBrains Blog",
  "favicon": "https://blog.jetbrains.com/wp-content/uploads/2024/01/cropped-mstile-310x310-1-180x180.png",
  "text": "A concise multiplatform language developed by JetBrains Ktor News ReleasesKtor 3.2.2 Is Now Available The Ktor 3.2.2 patch release brings a critical fix for Android D8 compatibility, along with some minor enhancements and bug fixes. ðŸš€ Get started Ready to explore Ktor 3.2.2? Start building your next project today with our interactive project generator at start.ktor.io. Your feedback and contributions are always welcome!ðŸ”— Get Started With Ktor | ðŸ“¢ Join the Community on Reddit and Slack Fixed Android D8 compatibility Ktor 3.2.0 introduced a compatibility issue for Androidâ€™s D8 by using Kotlinâ€™s backticked identifiers, which are commonly used in testing and allow for non-alphanumeric characters in Kotlin names. Androidâ€™s D8 tool, which converts bytecode to DEXÂ  (Dalvik executable) format, only supports these backticked identifiers on Android 10 (API level 30) and newer. @Test fun `hello world returns 200`() = testApplication { routing { get(\"/hello\") { call.respondText(\"Hello World!\") } } val response = client.get(\"/hello\") assertEquals(HttpStatusCode.OK, response.status) } This regression is fixed in Ktor 3.2.2. To prevent this from happening again, weâ€™ve added new checks to our testing infrastructure. These tests continuously verify Ktorâ€™s compatibility with essential Android tools, including D8 and ProGuard, ensuring new features donâ€™t break support for older Android versions. More details can be found on YouTrack and on GitHub. Minor bug fixes and enhancements Improvements Thymeleaf: The template model now accepts null values (KTOR-8559). javadoc now published as a Maven artifact (KTOR-3962). Netty: An invalid hex byte with a malformed query string now returns the expected 400 Bad Request error instead of a 500 Internal Server Error.Â  (KTOR-2934). It automatically closes AutoCloseable instances or allows to configure your own cleanup handlers. When the server receives a stop command, the HikariDataSource will close automatically, and then the custom cleanup handler for Database will be executed. Regression fixes A Space characters in SimpleName error is no longer triggered when executing an R8 mergeExtDex task with 3.2.0 (KTOR-8583). A potential race condition no longer occurs in socket.awaitClosed (KTOR-8618). The module parameter type Application.() -\u003e kotlin.Unit is now supported (KTOR-8602). Collecting flow in a Ktor route no longer results in a Flow invariant is violated error (KTOR-8606). Bug fixes ForwardedHeaders: The plugin now handles parameters case-insensitively, as expected (KTOR-8622). OkHttp: java.net.ProtocolException no longer occurs when sending MultiPartFormDataContent with onUpload (KTOR-6790). The OAuth2 authentication provider no longer breaks form-urlencoded POST requests when receiving the request body (KTOR-4420). The You can learn more from Content negotiation and serialization KDoc link for io.ktor.server.plugins.contentnegotiation.ContentNegotiation now leads to the correct page (KTOR-8597). Ktor no longer fails to boot with the default jvminline argument (KTOR-8608). The ResponseSent hook handler of the plugin installed into a route is now executed as expected when an exception is thrown from the route (KTOR-6794). ðŸš€ Thank you! We want to thank everyone in the community for your support and feedback, as well as for reporting issues. Start building your next project at start.ktor.io. Your suggestions and contributions are always welcome! ðŸ”— Get Started With Ktor | ðŸ“¢ Join the Community on Reddit and Slack Subscribe to Kotlin Blog updates Discover more",
  "image": "https://blog.jetbrains.com/wp-content/uploads/2025/07/Exposed-Release-Social-Share-Blog-1280x720-1.png",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv id=\"main\"\u003e\n    \u003cdiv\u003e\n                        \u003ca href=\"https://blog.jetbrains.com/kotlin/\"\u003e\n                            \u003cimg src=\"https://blog.jetbrains.com/wp-content/uploads/2019/01/Kotlin-5.svg\" alt=\"Kotlin logo\"/\u003e\n                                                                                                \n                                                                                    \u003c/a\u003e\n                                                    \u003cp\u003eA concise multiplatform language developed by JetBrains\u003c/p\u003e\n                                            \u003c/div\u003e\n                            \u003csection data-clarity-region=\"article\"\u003e\n                \u003cdiv\u003e\n                    \t\t\t\t\u003cp\u003e\u003ca href=\"https://blog.jetbrains.com/kotlin/category/ktor/\"\u003eKtor\u003c/a\u003e\n\t\t\t\u003ca href=\"https://blog.jetbrains.com/kotlin/category/news/\"\u003eNews\u003c/a\u003e\n\t\t\t\u003ca href=\"https://blog.jetbrains.com/kotlin/category/releases/\"\u003eReleases\u003c/a\u003e\u003c/p\u003e\u003ch2 id=\"major-updates\"\u003eKtor 3.2.2 Is Now Available\u003c/h2\u003e                    \n                    \n\u003cp\u003eThe Ktor 3.2.2 patch release brings a critical fix for Android D8 compatibility, along with some minor enhancements and bug fixes.\u003c/p\u003e\n\n\n\n\u003ch2\u003eðŸš€ Get started\u003c/h2\u003e\n\n\n\n\u003cdiv\u003e\u003cp\u003eReady to explore Ktor 3.2.2? Start building your next project today with our interactive project generator at \u003ca href=\"https://kotl.in/ixiien\" target=\"_blank\" rel=\"noopener\"\u003estart.ktor.io\u003c/a\u003e. Your feedback and contributions are always welcome!\u003c/p\u003e\u003cp\u003eðŸ”—\u003ca href=\"https://ktor.io/docs/welcome.html\" target=\"_blank\" rel=\"noopener\"\u003e Get Started With Ktor\u003c/a\u003e | ðŸ“¢ Join the Community on\u003ca href=\"https://www.reddit.com/r/ktor/\" target=\"_blank\" rel=\"noopener\"\u003e Reddit\u003c/a\u003e and\u003ca href=\"https://surveys.jetbrains.com/s3/kotlin-slack-sign-up?_gl=1*1wxglsg*_gcl_au*MTE4MjgxMTg3Mi4xNzM2MjY0ODgy*_ga*MTYyODczMDg5NS4xNzAyMDQyMTMx*_ga_9J976DJZ68*MTczODY3Mjg3Ny4xOTguMS4xNzM4NjczNDI2LjM2LjAuMA..\" target=\"_blank\" rel=\"noopener\"\u003e Slack\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e\n\n\n\n\n\n\n\n\u003ch2\u003eFixed Android D8 compatibility\u003c/h2\u003e\n\n\n\n\u003cp\u003e\u003ca href=\"https://blog.jetbrains.com/kotlin/2025/06/ktor-3-2-0-is-now-available/\"\u003eKtor 3.2.0\u003c/a\u003e introduced a compatibility issue for Androidâ€™s D8 by using Kotlinâ€™s \u003ca href=\"https://kotlinlang.org/spec/syntax-and-grammar.html#identifiers\" target=\"_blank\" rel=\"noopener\"\u003ebackticked identifiers\u003c/a\u003e, which are commonly used in testing and allow for non-alphanumeric characters in Kotlin names. Androidâ€™s D8 tool, which converts bytecode to DEXÂ  (Dalvik executable) format, only supports these backticked identifiers on Android 10 (API level 30) and newer.\u003c/p\u003e\n\n\n\n\u003cpre data-enlighter-language=\"kotlin\" data-enlighter-theme=\"\" data-enlighter-highlight=\"\" data-enlighter-linenumbers=\"\" data-enlighter-lineoffset=\"\" data-enlighter-title=\"\" data-enlighter-group=\"\"\u003e@Test\nfun `hello world returns 200`() = testApplication {\n    routing {\n        get(\u0026#34;/hello\u0026#34;) {\n            call.respondText(\u0026#34;Hello World!\u0026#34;)\n        }\n     }\n     val response = client.get(\u0026#34;/hello\u0026#34;)\n     assertEquals(HttpStatusCode.OK, response.status)\n}\u003c/pre\u003e\n\n\n\n\u003cp\u003eThis regression is fixed in Ktor 3.2.2. To prevent this from happening again, weâ€™ve added new checks to our testing infrastructure. These tests continuously verify Ktorâ€™s compatibility with essential Android tools, including D8 and ProGuard, ensuring new features donâ€™t break support for older Android versions. More details can be found on \u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8583\" target=\"_blank\" rel=\"noopener\"\u003eYouTrack\u003c/a\u003e and on \u003ca href=\"https://github.com/ktorio/ktor/pull/4933\" target=\"_blank\" rel=\"noopener\"\u003eGitHub\u003c/a\u003e.\u003c/p\u003e\n\n\n\n\u003ch2\u003eMinor bug fixes and enhancements\u003c/h2\u003e\n\n\n\n\u003ch3\u003eImprovements\u003c/h3\u003e\n\n\n\n\u003cul\u003e\n\u003cli\u003eThymeleaf: The template model now accepts null values (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8559\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-8559\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003e\u003ccode\u003ejavadoc\u003c/code\u003e now published as a Maven artifact (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-3962\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-3962\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eNetty: An invalid hex byte with a malformed query string now returns the expected 400 Bad Request error instead of a 500 Internal Server Error.Â  (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-2934\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-2934\u003c/a\u003e).\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\n\u003cp\u003e\u003cbr/\u003eIt automatically closes AutoCloseable instances or allows to configure your own cleanup handlers. When the server receives a stop command, the HikariDataSource will close automatically, and then the custom cleanup handler for \u003cstrong\u003eDatabase\u003c/strong\u003e will be executed.\u003c/p\u003e\n\n\n\n\u003ch3\u003eRegression fixes\u003c/h3\u003e\n\n\n\n\u003cul\u003e\n\u003cli\u003eA \u003cem\u003eSpace characters in SimpleName\u003c/em\u003e error is no longer triggered when executing an R8 mergeExtDex task with 3.2.0 (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8583\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-8583\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eA potential race condition no longer occurs in socket.awaitClosed (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8618\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-8618\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eThe module parameter type Application.() -\u0026gt; kotlin.Unit is now supported (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8602\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-8602\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eCollecting flow in a Ktor route no longer results in a \u003cem\u003eFlow invariant is violated\u003c/em\u003e error (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8606\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-8606\u003c/a\u003e).\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\n\u003ch3\u003eBug fixes\u003c/h3\u003e\n\n\n\n\u003cul\u003e\n\u003cli\u003eForwardedHeaders: The plugin now handles parameters case-insensitively, as expected (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8622\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-8622\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eOkHttp: java.net.ProtocolException no longer occurs when sending MultiPartFormDataContent with onUpload (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-6790\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-6790\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eThe OAuth2 authentication provider no longer breaks form-urlencoded POST requests when receiving the request body (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-4420\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-4420\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eThe \u003cem\u003eYou can learn more from Content negotiation and serialization\u003c/em\u003e KDoc link for io.ktor.server.plugins.contentnegotiation.ContentNegotiation now leads to the correct page (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8597\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-8597\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eKtor no longer fails to boot with the default jvminline argument (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-8608\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-8608\u003c/a\u003e).\u003c/li\u003e\n\n\n\n\u003cli\u003eThe ResponseSent hook handler of the plugin installed into a route is now executed as expected when an exception is thrown from the route (\u003ca href=\"https://youtrack.jetbrains.com/issue/KTOR-6794\" target=\"_blank\" rel=\"noopener\"\u003eKTOR-6794\u003c/a\u003e).\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\n\u003ch2\u003e\u003cstrong\u003eðŸš€ \u003c/strong\u003eThank you!\u003c/h2\u003e\n\n\n\n\u003cp\u003eWe want to thank\u003ca href=\"https://github.com/MarcusDunn\" target=\"_blank\" rel=\"noopener\"\u003e \u003c/a\u003eeveryone in the community for your support and feedback, as well as for reporting issues.\u003c/p\u003e\n\n\n\n\u003cp\u003eStart building your next project at\u003ca href=\"https://kotl.in/ixiien\" target=\"_blank\" rel=\"noopener\"\u003e start.ktor.io\u003c/a\u003e. Your suggestions and contributions are always welcome!\u003c/p\u003e\n\n\n\n\u003cp\u003eðŸ”—\u003ca href=\"https://ktor.io/docs/welcome.html\" target=\"_blank\" rel=\"noopener\"\u003e Get Started With Ktor\u003c/a\u003e | ðŸ“¢ Join the Community on\u003ca href=\"https://www.reddit.com/r/ktor/\" target=\"_blank\" rel=\"noopener\"\u003e Reddit\u003c/a\u003e and\u003ca href=\"https://surveys.jetbrains.com/s3/kotlin-slack-sign-up?_gl=1*1wxglsg*_gcl_au*MTE4MjgxMTg3Mi4xNzM2MjY0ODgy*_ga*MTYyODczMDg5NS4xNzAyMDQyMTMx*_ga_9J976DJZ68*MTczODY3Mjg3Ny4xOTguMS4xNzM4NjczNDI2LjM2LjAuMA..\" target=\"_blank\" rel=\"noopener\"\u003e Slack\u003c/a\u003e\u003c/p\u003e\n                    \n                                                                                                                                                                                                                            \u003cdiv\u003e\n                                \u003cdiv\u003e\n                                                                            \u003ch4\u003eSubscribe to Kotlin Blog updates\u003c/h4\u003e\n                                                                                                            \n                                \u003c/div\u003e\n                                \n                                \u003cp\u003e\u003cimg src=\"https://blog.jetbrains.com/wp-content/themes/jetbrains/assets/img/img-form.svg\" alt=\"image description\"/\u003e\n                                                                    \u003c/p\u003e\n                            \u003c/div\u003e\n                                                            \u003c/div\u003e\n                \u003ca href=\"#\"\u003e\u003c/a\u003e\n                \n                \n            \u003c/section\u003e\n                    \u003cdiv\u003e\n                \u003cp\u003e\n                    \u003ch2\u003eDiscover more\u003c/h2\u003e\n                \u003c/p\u003e\n                \n            \u003c/div\u003e\n                \u003c/div\u003e\u003c/div\u003e",
  "readingTime": "6 min read",
  "publishedTime": null,
  "modifiedTime": null
}
