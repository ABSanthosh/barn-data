{
  "id": "e18f2d81-9b76-478c-bfb9-66b72b34ac3b",
  "title": "The ‘Stable Marriage Problem’ Solution Underpins Dating Apps and School Admissions",
  "link": "https://www.scientificamerican.com/article/the-stable-marriage-problem-solution-underpins-dating-apps-and-school/",
  "description": "An elegant matchmaking algorithm called Gale-Shapley can find the best possible pairings for everybody",
  "author": "",
  "published": "Thu, 10 Oct 2024 10:45:00 +0000",
  "source": "http://rss.sciam.com/ScientificAmerican-Global",
  "categories": null,
  "byline": "Max Springer",
  "length": 8432,
  "excerpt": "An elegant matchmaking algorithm called Gale-Shapley can find the best possible pairings for everybody",
  "siteName": "Scientific American",
  "favicon": "",
  "text": "Let’s create a reality dating show unlike any other in one key aspect. First, we’ll rent a villa on a tropical island. Then we’ll fly in five men and five women, each with their own (heterosexual) dating preferences. Our goal, though, is the exact opposite of the Love Island franchise: we want absolutely zero drama. Can we ensure that everyone pairs off with a partner and sticks with them, without jealousy rearing its ugly head?Mathematicians call this dilemma the “stable matching problem” or “stable marriage problem.” And though matters of the heart may be fickle, researchers have proved that by using a simple algorithm, they can always find a stable set of matches between all members of two equally sized groups. The late mathematician Lloyd Shapley shared the 2012 Nobel memorial prize in economic sciences for the discovery of this algorithm—and for good reason: it is still used today to pair medical residents with hospitals and children with schools, and it has even inspired dating-app algorithms.According to mathematicians, a relationship is stable when neither person has a better option—at least, not one that is also interested in them. Instability, then, could look something like this: Imagine Alice is currently paired off with Bob, while Charlie is currently with Darlene. Bob is secretly in love with Darlene, however, and Darlene can’t bear the thought of another day with Charlie. Because Bob and Darlene seem primed to run off together and leave their partners behind, mathematicians call this situation unstable.On supporting science journalismIf you're enjoying this article, consider supporting our award-winning journalism by subscribing. By purchasing a subscription you are helping to ensure the future of impactful stories about the discoveries and ideas shaping our world today.The same dilemma pops up outside of romantic life, too. Shapley and mathematician David Gale first described it as a problem of college admissions: What kind of application process would ensure that colleges and applicants, each with their own sets of preferences, were satisfied with their picks? In 1962 Gale and Shapley showed that for any set of students and colleges (or men and women, in the dating show example), there always exists a set of pairings where every match is stable. What’s more, they provided a simple process, or algorithm, that takes everyone’s rankings and builds relatively happy pairs.Here’s how it works. To find a set of stable, drama-free partnerships for our 10 dating show contestants, we need to first have each contestant rank all members of the opposite gender in order of their preference.Then, on the first day in the villa, each woman makes a relationship proposal to her top-choice man. Some men receive many proposals, while others might receive none. Each man then rejects all but his more preferred suitor, resulting in a tentative match for some contestants, while others remain unpaired.On the second day, each rejected woman proposes to her second choice (even if he is already paired up). The men consider the new proposals, and some may abandon their current match if they prefer the new suitor. Then some of those newly heartbroken women would propose to their next possible partner.This process repeats on the third, fourth and subsequent days, for as many times as is necessary, until everyone has settled on a match. While not everyone will be happy with their pairing using this process, it is mathematically guaranteed that no two people would both prefer to be with each other than who they are currently with (assuming their preferences haven’t shifted upon getting to know each other, that is). While this won’t guarantee that our Love Island spin-off remains a relaxing, drama-free watch, it is probably as good as we will get.Zane WolfInterestingly, the group that gets to propose first has an advantage—when the women propose first, they will, on average, end up with matches that are more desirable to them than the men will. “The one issue with Gale-Shapley is that it gives you these extreme matches on either side,” explains Vijay Vazirani, a computer scientist at the University of California, Irvine.The outcomes might be slightly lopsided, but Gale and Shapley’s strategy can’t be beat. And as it turned out, a version of it had already been in use since the 1950s by an organization that matches medical students to residency programs across the country. In 1984 Stanford University economist Alvin Roth used Gale and Shapley’s mathematical language to show that the process used by this organization not only guaranteed stable matches but was also “strategy-proof”—meaning that there’s no way to game the system. This feature, more generally called incentive compatibility, is prized because it means that everyone will end up with their best option if they report their preferences truthfully.Zane WolfRoth and economist Elliott Peranson also made a few tweaks to the algorithm. They adapted it to work for medical students who were married to each other and looking to complete their residencies in the same location. They also noted that residents were getting the shorter end of the stick because hospitals proposed first. Roth advocated for residents to propose first to ensure they would get their best outcome. To this day, hospitals and incoming residents provide a ranking of each other, and the mathematics works out to ensure a stable state is achieved. Roth and Shapley won the 2012 economics Nobel for their work.Roth and his colleagues also used this mathematical language to tackle another gnarly matching problem: assigning kids to public schools in the U.S.’s biggest cities. In 2003 they adapted Gale-Shapley to assign students to New York City’s notoriously competitive public high schools. In the first year of operation, the number of students matched with one of their top choices increased from about 50,000 to more than 70,000. Another version of the algorithm is also used to assign students to public schools in Boston.And back in the romantic sphere, the Gale-Shapley algorithm has even inspired the inner workings of dating apps such as Hinge. While users do not explicitly rank their potential matches, these apps observe users’ history of likes and dislikes, along with their stated dating preferences, to curate a handful of “top matches” that it shows to users first. A like or message sent to a potential match is analogous to a “proposal” in the original algorithm.“The power of models like [Gale-Shapley] is to abstract an idea across many different settings,” emphasizes Jon Kleinberg, a professor of computer science at Cornell University. Problems across different domains “can all have something in common conceptually,” he says, and the Gale-Shapley algorithm “gave us a mathematical language to talk about [them].”Though the algorithm is simple and reliable, it can also amplify existing disparities if there is bias in the rankings. Admissions data acquired by The City, a New York City–based nonprofit newsroom, showed how Black and Latino students are regularly selected for admission at a lower rate by the metropolis’s high schools than white and Asian students, especially at many top-performing schools. The residency match program has been shown to have similar shortcomings in racial and gender equity.\"The real issue isn’t the algorithms themselves” but the ranking data they use and the environment in which they’re deployed, explains Utku Ünver, a professor of economics at Boston College. This dynamic has been visible throughout the ongoing artificial intelligence boom: as complex algorithms learn to reproduce patterns in our data, they often replicate our prejudices, too.“If humans are biased, then our bias is in the data,” says Éva Tardos, a professor of computer science at Cornell University. Researchers have suggested a few ways to counteract the bias in the data. For example, institutions such as hospitals or schools could use larger and more diverse panels of judges to rank the candidates. Additional algorithms could also be used to account for known biases by reweighting the rankings before they are used for matching.Of course, no algorithm can guarantee a happy match in marriage or in schooling. But the best option continues to be one that’s simple, transparent and incentivizes honesty—so even 60 years later, it seems there’s still no beating the Gale-Shapley algorithm.",
  "image": "https://static.scientificamerican.com/dam/m/316ba2b422f774f7/original/hearts_on_chackboard_stable_matching_problem.jpg?w=1200",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv\u003e\u003cp data-block=\"sciam/paragraph\"\u003eLet’s create a reality dating show unlike any other in one key aspect. First, we’ll rent a villa on a tropical island. Then we’ll fly in five men and five women, each with their own (heterosexual) dating preferences. Our goal, though, is the exact opposite of the \u003ci\u003eLove Island\u003c/i\u003e franchise: we want absolutely zero drama. Can we ensure that everyone pairs off with a partner and sticks with them, without jealousy rearing its ugly head?\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eMathematicians call this dilemma the “stable matching problem” or “stable marriage problem.” And though matters of the heart may be fickle, researchers have proved that by using a simple \u003ca href=\"https://www.scientificamerican.com/article/this-elegant-math-problem-could-help-you-make-the-best-choice-in-house/\"\u003ealgorithm\u003c/a\u003e, they can \u003ci\u003ealways\u003c/i\u003e find a stable set of matches between all members of two equally sized groups. The late mathematician Lloyd Shapley shared the 2012 Nobel memorial prize in economic sciences for the discovery of this algorithm—and for good reason: it is still used today to pair medical residents with hospitals and children with schools, and it has even inspired \u003ca href=\"https://www.scientificamerican.com/article/dating-services-tinker-with-the-algorithms-of-love/\"\u003edating-app algorithms\u003c/a\u003e.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eAccording to mathematicians, a relationship is stable when neither person has a better option—at least, not one that is also interested in them. Instability, then, could look something like this: Imagine Alice is currently paired off with Bob, while Charlie is currently with Darlene. Bob is secretly in love with Darlene, however, and Darlene can’t bear the thought of another day with Charlie. Because Bob and Darlene seem primed to run off together and leave their partners behind, mathematicians call this situation unstable.\u003c/p\u003e\u003chr/\u003e\u003ch2\u003eOn supporting science journalism\u003c/h2\u003e\u003cp\u003eIf you\u0026#39;re enjoying this article, consider supporting our award-winning journalism by \u003ca href=\"https://www.scientificamerican.com/getsciam/\"\u003esubscribing\u003c/a\u003e. By purchasing a subscription you are helping to ensure the future of impactful stories about the discoveries and ideas shaping our world today.\u003c/p\u003e\u003chr/\u003e\u003cp data-block=\"sciam/paragraph\"\u003eThe same dilemma pops up outside of romantic life, too. Shapley and mathematician David Gale first described it as a problem of college admissions: What kind of application process would ensure that colleges and applicants, each with their own sets of preferences, were satisfied with their picks? In 1962 Gale and Shapley showed that for any set of students and colleges (or men and women, in the dating show example), there always exists a set of pairings where every match is stable. What’s more, they provided a simple process, or algorithm, that takes everyone’s rankings and builds relatively happy pairs.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eHere’s how it works. To find a set of stable, drama-free partnerships for our 10 dating show contestants, we need to first have each contestant rank all members of the opposite gender in order of their preference.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eThen, on the first day in the villa, each woman makes a relationship proposal to her top-choice man. Some men receive many proposals, while others might receive none. Each man then rejects all but his more preferred suitor, resulting in a tentative match for some contestants, while others remain unpaired.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eOn the second day, each rejected woman proposes to her second choice (even if he is already paired up). The men consider the new proposals, and some may abandon their current match if they prefer the new suitor. Then some of those newly heartbroken women would propose to their next possible partner.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eThis process repeats on the third, fourth and subsequent days, for as many times as is necessary, until everyone has settled on a match. While not everyone will be happy with their pairing using this process, it is mathematically guaranteed that no two people would both prefer to be with each other than who they are currently with (assuming their preferences haven’t shifted upon getting to know each other, that is). While this won’t guarantee that our \u003ci\u003eLove Island\u003c/i\u003e spin-off remains a relaxing, drama-free watch, it is probably as good as we will get.\u003c/p\u003e\u003cfigure data-block=\"contentful/image\"\u003e\u003cpicture\u003e\u003csource media=\"(min-width: 750px)\" srcset=\"https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=1350 1350w, https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=2000 2000w, https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=900 900w\" sizes=\"(min-width: 2000px) 2000px, (min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw\"/\u003e\u003csource media=\"(min-width: 0px)\" srcset=\"https://static.scientificamerican.com/dam/m/c38e76117a7be90/original/20240916_StableMarriageAlgorithm_m.png?w=1000 1000w, https://static.scientificamerican.com/dam/m/c38e76117a7be90/original/20240916_StableMarriageAlgorithm_m.png?w=1200 1200w, https://static.scientificamerican.com/dam/m/c38e76117a7be90/original/20240916_StableMarriageAlgorithm_m.png?w=600 600w, https://static.scientificamerican.com/dam/m/c38e76117a7be90/original/20240916_StableMarriageAlgorithm_m.png?w=750 750w\" sizes=\"(min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw\"/\u003e\u003cimg alt=\"Five-panel graphic illustrates the steps taken by the stable matching algorithm to find the most stable pairings among women and men, given a group of four of each gender and their individual match preferences.\" decoding=\"async\" loading=\"lazy\" src=\"https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=900\" width=\"2917\" height=\"5525\" srcset=\"https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=1000 1000w, https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=1200 1200w, https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=1350 1350w, https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=2000 2000w, https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=600 600w, https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=750 750w, https://static.scientificamerican.com/dam/m/57de5790a3a2211f/original/20240916_StableMarriageAlgorithm_d_TEXT.png?w=900 900w\" sizes=\"(min-width: 2000px) 2000px, (min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw\"/\u003e\u003c/picture\u003e\u003cfigcaption\u003e\u003cp\u003eZane Wolf\u003c/p\u003e\u003c/figcaption\u003e\u003c/figure\u003e\u003cp data-block=\"sciam/paragraph\"\u003eInterestingly, the group that gets to propose first has an advantage—when the women propose first, they will, on average, end up with matches that are more desirable to them than the men will. “The one issue with Gale-Shapley is that it gives you these extreme matches on either side,” explains Vijay Vazirani, a computer scientist at the University of California, Irvine.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eThe outcomes might be slightly lopsided, but Gale and Shapley’s strategy can’t be beat. And as it turned out, a version of it had already been in use since the 1950s by an organization that matches \u003ca href=\"https://www.scientificamerican.com/article/fewer-doctors-are-choosing-to-go-into-emergency-medicine/\"\u003emedical students\u003c/a\u003e to residency programs across the country. In 1984 Stanford University economist Alvin Roth used Gale and Shapley’s mathematical language to show that the process used by this organization not only guaranteed stable matches but was also “strategy-proof”—meaning that there’s no way to game the system. This feature, more generally called incentive compatibility, is prized because it means that everyone will end up with their best option if they report their preferences truthfully.\u003c/p\u003e\u003cfigure data-block=\"contentful/image\"\u003e\u003cpicture\u003e\u003csource media=\"(min-width: 750px)\" srcset=\"https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=1350 1350w, https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=2000 2000w, https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=900 900w\" sizes=\"(min-width: 2000px) 2000px, (min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw\"/\u003e\u003csource media=\"(min-width: 0px)\" srcset=\"https://static.scientificamerican.com/dam/m/645e74c2f506148d/original/20240916_VariableResults_m.png?w=1000 1000w, https://static.scientificamerican.com/dam/m/645e74c2f506148d/original/20240916_VariableResults_m.png?w=1200 1200w, https://static.scientificamerican.com/dam/m/645e74c2f506148d/original/20240916_VariableResults_m.png?w=600 600w, https://static.scientificamerican.com/dam/m/645e74c2f506148d/original/20240916_VariableResults_m.png?w=750 750w\" sizes=\"(min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw\"/\u003e\u003cimg alt=\"Three-panel graphic shows the initial conditions of a group of men and women with their match preferences, the stable arrangement if the women are proposing to the men and the stable arrangement if the men are proposing to the women.\" decoding=\"async\" loading=\"lazy\" src=\"https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=900\" width=\"2917\" height=\"3256\" srcset=\"https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=1000 1000w, https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=1200 1200w, https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=1350 1350w, https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=2000 2000w, https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=600 600w, https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=750 750w, https://static.scientificamerican.com/dam/m/15b6119a07bf8140/original/20240916_VariableResults_d_TEXT.png?w=900 900w\" sizes=\"(min-width: 2000px) 2000px, (min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw\"/\u003e\u003c/picture\u003e\u003cfigcaption\u003e\u003cp\u003eZane Wolf\u003c/p\u003e\u003c/figcaption\u003e\u003c/figure\u003e\u003cp data-block=\"sciam/paragraph\"\u003eRoth and economist Elliott Peranson also made a few tweaks to the algorithm. They adapted it to work for medical students who were married to each other and looking to complete their residencies in the same location. They also noted that residents were getting the shorter end of the stick because hospitals proposed first. Roth advocated for residents to propose first to ensure they would get their best outcome. To this day, hospitals and incoming residents provide a ranking of each other, and the mathematics works out to ensure a stable state is achieved. Roth and Shapley won the 2012 economics Nobel for their work.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eRoth and his colleagues also used this mathematical language to tackle another gnarly matching problem: assigning kids to public schools in the U.S.’s biggest cities. In 2003 they adapted Gale-Shapley to assign students to New York City’s notoriously competitive public high schools. In the first year of operation, the number of students matched with one of their top choices increased from about 50,000 to more than 70,000. Another version of the algorithm is also used to assign students to public schools in Boston.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eAnd back in the romantic sphere, the Gale-Shapley algorithm has even inspired the inner workings of dating apps such as Hinge. While users do not explicitly rank their potential matches, these apps observe users’ history of likes and dislikes, along with their stated dating preferences, to curate a handful of “top matches” that it shows to users first. A like or message sent to a potential match is analogous to a “proposal” in the original algorithm.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003e“The power of models like [Gale-Shapley] is to abstract an idea across many different settings,” emphasizes Jon Kleinberg, a professor of computer science at Cornell University. Problems across different domains “can all have something in common conceptually,” he says, and the Gale-Shapley algorithm “gave us \u003ca href=\"https://www.scientificamerican.com/article/a-number-system-invented-by-inuit-schoolchildren-will-make-its-silicon-valley-debut1/\"\u003ea mathematical language\u003c/a\u003e to talk about [them].”\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eThough the algorithm is simple and reliable, it can also amplify existing disparities if there is bias in the rankings. Admissions data acquired by The City, a New York City–based nonprofit newsroom, showed how Black and Latino students are regularly \u003ca href=\"https://www.thecity.nyc/2021/05/26/nyc-high-school-algorithms-segregation/\"\u003eselected for admission at a lower rate\u003c/a\u003e by the metropolis’s high schools than white and Asian students, especially at many top-performing schools. The residency match program has been \u003ca href=\"https://www.nrmp.org/wp-content/uploads/2023/02/Demographic-data-perspectives-paper_FINAL.pdf\"\u003eshown to have\u003c/a\u003e similar \u003ca href=\"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC11107330/\"\u003eshortcomings in racial and gender equity\u003c/a\u003e.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003e\u0026#34;The real issue isn’t the algorithms themselves” but the ranking data they use and the environment in which they’re deployed, explains Utku Ünver, a professor of economics at Boston College. This dynamic has been visible throughout the ongoing artificial intelligence boom: as complex algorithms learn to reproduce patterns in our data, they often \u003ca href=\"https://www.scientificamerican.com/article/chatgpt-replicates-gender-bias-in-recommendation-letters/\"\u003ereplicate\u003c/a\u003e \u003ca href=\"https://www.scientificamerican.com/article/police-facial-recognition-technology-cant-tell-black-people-apart/\"\u003eour\u003c/a\u003e \u003ca href=\"https://www.scientificamerican.com/article/health-care-ai-systems-are-biased/\"\u003eprejudices\u003c/a\u003e, too.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003e“If humans are biased, then our bias is in the data,” says Éva Tardos, a professor of computer science at Cornell University. Researchers have suggested a few ways to counteract the bias in the data. For example, institutions such as hospitals or schools could use larger and more diverse panels of judges to rank the candidates. Additional algorithms could also be used to account for known biases by reweighting the rankings before they are used for matching.\u003c/p\u003e\u003cp data-block=\"sciam/paragraph\"\u003eOf course, no algorithm can guarantee a happy match in marriage or in schooling. But \u003ca href=\"https://www.scientificamerican.com/article/this-elegant-math-problem-could-help-you-make-the-best-choice-in-house/\"\u003ethe best option\u003c/a\u003e continues to be one that’s simple, transparent and incentivizes honesty—so even 60 years later, it seems there’s still no beating the Gale-Shapley algorithm.\u003c/p\u003e\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "9 min read",
  "publishedTime": "2024-10-10T10:45:00Z",
  "modifiedTime": null
}
