{
  "id": "47938924-6813-499d-90e7-9ca9912f13f5",
  "title": "Xiaomi Home Integration for Home Assistant",
  "link": "https://github.com/XiaoMi/ha_xiaomi_home",
  "description": "Comments",
  "author": "",
  "published": "Mon, 16 Dec 2024 15:52:47 +0000",
  "source": "https://news.ycombinator.com/rss",
  "categories": null,
  "byline": "XiaoMi",
  "length": 20392,
  "excerpt": "Xiaomi Home Integration for Home Assistant. Contribute to XiaoMi/ha_xiaomi_home development by creating an account on GitHub.",
  "siteName": "GitHub",
  "favicon": "https://github.com/fluidicon.png",
  "text": "Xiaomi Home Integration for Home Assistant English | 简体中文 Xiaomi Home Integration is an integrated component of Home Assistant supported by Xiaomi official. It allows you to use Xiaomi IoT smart devices in Home Assistant. Installation Home Assistant version requirement: Core $\\geq$ 2024.11.0 Operating System $\\geq$ 13.0 Method 1: Git clone from GitHub cd config git clone https://github.com/XiaoMi/ha_xiaomi_home.git cd ha_xiaomi_home ./install.sh /config We recommend this installation method, for it is convenient to switch to a tag when updating xiaomi_home to a certain version. For example, update to version v1.0.0 cd config/ha_xiaomi_home git checkout v1.0.0 ./install.sh /config Method 2: HACS HACS \u003e Overflow Menu \u003e Custom repositories \u003e Repository: https://github.com/XiaoMi/ha_xiaomi_home.git \u0026 Category: Integration \u003e ADD Xiaomi Home has not been added to the HACS store as a default yet. It's coming soon. Method 3: Manually installation via Samba / FTPS Download and copy custom_components/xiaomi_home folder to config/custom_components folder in your Home Assistant. Configuration Login Settings \u003e Devices \u0026 services \u003e ADD INTEGRATION \u003e Search Xiaomi Home \u003e NEXT \u003e Click here to login \u003e Sign in with Xiaomi account Add MIoT Devices After logging in successfully, a dialog box named \"Select Home and Devices\" pops up. You can select the home containing the device that you want to import in Home Assistant. Multiple User Login After a Xiaomi account login and its user configuration are completed, you can continue to add other Xiaomi accounts in the configured Xiaomi Home Integration page. Method: Settings \u003e Devices \u0026 services \u003e Configured \u003e Xiaomi Home \u003e ADD HUB \u003e NEXT \u003e Click here to login \u003e Sign in with Xiaomi account Update Configurations You can change the configurations in the \"Configuration Options\" dialog box, in which you can update your user nickname and the list of the devices importing from Xiaomi Home APP, etc. Method: Settings \u003e Devices \u0026 services \u003e Configured \u003e Xiaomi Home \u003e CONFIGURE \u003e Select the option to update Debug Mode for Action You can manually send Action command message with parameters to the device when the debug mode for action is activated. The user interface for sending the Action command with parameters is shown as a Text entity. Method: Settings \u003e Devices \u0026 services \u003e Configured \u003e Xiaomi Home \u003e CONFIGURE \u003e Debug mode for action Security Xiaomi Home Integration and the affiliated cloud interface is provided by Xiaomi officially. You need to use your Xiaomi account to login to get your device list. Xiaomi Home Integration implements OAuth 2.0 login process, which does not keep your account password in the Home Assistant application. However, due to the limitation of the Home Assistant platform, the user information (including device information, certificates, tokens, etc.) of your Xiaomi account will be saved in the Home Assistant configuration file in clear text after successful login. You need to ensure that your Home Assistant configuration file is properly stored. The exposure of your configuration file may result in others logging in with your identity. FAQ Does Xiaomi Home Integration support all Xiaomi Home devices? Xiaomi Home Integration currently supports most categories of Home device. Only a few categories are not supported. They are Bluetooth device, infrared device and virtual device. Does Xiaomi Home Integration support multiple Xiaomi accounts? Yes, it supports multiple Xiaomi accounts. Furthermore, Xiaomi Home Integration allows that devices belonging to different accounts can be added to a same area. Does Xiaomi Home Integration support local control? Local control is implemented by Xiaomi Central Hub Gateway (firmware version 3.4.0_0000 above) or Xiaomi home devices with built-in central hub gateway (software version 0.8.0 above) inside. If you do not have a Xiaomi central hub gateway or other devices having central hub gateway function, all control commands are sent through Xiaomi Cloud. The firmware for Xiaomi central hub gateway including the built-in central hub gateway supporting Home Assistant local control feature has not been released yet. Please refer to MIoT team's notification for upgrade plans. Xiaomi central hub gateway is only available in mainland China. In other regions, it is not available. Xiaomi Home Integration can also implement partial local control by enabling Xiaomi LAN control function. Xiaomi LAN control function can only control IP devices (devices connected to the router via WiFi or ethernet cable) in the same local area network as Home Assistant. It cannot control BLE Mesh, ZigBee, etc. devices. This function may cause some abnormalities. We recommend not to use this function. Xiaomi LAN control function is enabled by Settings \u003e Devices \u0026 services \u003e Configured \u003e Xiaomi Home \u003e CONFIGURE \u003e Update LAN control configuration Xiaomi LAN control function is not restricted by region. It is available in all regions. However, if there is a central gateway in the local area network where Home Assistant is located, even Xiaomi LAN control function is enabled in the integration, it will not take effect. In which regions is Xiaomi Home Integration available? Xiaomi Home Integration can be used in the mainland of China, Europe, India, Russia, Singapore, and USA. As user data in Xiaomi Cloud of different regions is isolated, you need to choose your region when importing MIoT devices in the configuration process. Xiaomi Home Integration allows you to import devices of different regions to a same area. Principle of Messaging Control through the Cloud Image 1: Cloud control architecture Xiaomi Home Integration subscribes to the interested device messages on the MQTT Broker in MIoT Cloud. When a device property changes or a device event occurs, the device sends an upstream message to MIoT Cloud, and the MQTT Broker pushes the subscribed device message to Xiaomi Home Integration. Because Xiaomi Home Integration does not need to poll to obtain the current device property value in the cloud, it can immediately receive the notification message when the properties change or the events occur. Thanks to the message subscription mechanism, Xiaomi Home Integration only queries the properties of all devices from the cloud once when the integration configuration is completed, which puts little access pressure on the cloud. Xiaomi Home Integration sends command messages to the devices via the HTTP interface of MIoT Cloud to control devices. The device reacts and responds after receiving the downstream message sent forward by MIoT Cloud. Control locally Image 2: Local control architecture Xiaomi central hub gateway contains a standard MQTT Broker, which implements a complete subscribe-publish mechanism. Xiaomi Home Integration subscribes to the interested device messages through Xiaomi central hub gateway. When a device property changes or a device event occurs, the device sends an upstream message to Xiaomi central hub gateway, and the MQTT Broker pushes the subscribed device message to Xiaomi Home Integration. When Xiaomi Home Integration needs to control a device, it publishes a device command message to the MQTT Broker, which is then forwarded to the device by Xiaomi central hub gateway. The device reacts and responds after receiving the downstream message from the gateway. Mapping Relationship between MIoT-Spec-V2 and Home Assistant Entity MIoT-Spec-V2 is the abbreviation for MIoT Specification Version 2, which is an IoT protocol formulated by Xiaomi IoT platform to give a standard functional description of IoT devices. It includes function definition (referred to as data model by other IoT platforms), interaction model, message format, and encoding. In MIoT-Spec-V2 protocol, a product is defined as a device. A device contains several services. A service may have some properties, events and actions. Xiaomi Home Integration creates Home Assistant entities according to MIoT-Spec-V2. The conversion relationship is as follows. General Conversion Property format access value-list value-range Entity in Home Assistant writable string - - Text writable bool - - Switch writable not string \u0026 not bool existent - Select writable not string \u0026 not bool non-existent existent Number not writable - - - Sensor Event MIoT-Spec-V2 event is transformed to Event entity in Home Assistant. The event's parameters are also passed to entity's _trigger_event. Action in Entity in Home Assistant empty Button not empty Notify If the debug mode for action is activated, the Text entity will be created when the \"in\" field in the action spec is not empty. The \"Attribute\" item in the entity details page displays the format of the input parameter which is an ordered list, enclosed in square brackets []. The string elements in the list are enclosed in double quotation marks \"\". For example, the \"Attributes\" item in the details page of the Notify entity converted by the \"Intelligent Speaker Execute Text Directive\" action of xiaomi.wifispeaker.s12 siid=5, aiid=5 instance shows the action params as [Text Content(str), Silent Execution(bool)]. A properly formatted input is [\"Hello\", true]. Specific Conversion MIoT-Spec-V2 uses URN for defining types. The format is urn:\u003cnamespace\u003e:\u003ctype\u003e:\u003cname\u003e:\u003cvalue\u003e[:\u003cvendor-product\u003e:\u003cversion\u003e], in which name is a human-readable word or phrase describing the instance of device, service, property, event and action. Xiaomi Home Integration first determines whether to convert the MIoT-Spec-V2 instance into a specific Home Assistant entity based on the instance's name. For the instance that does not meet the specific conversion rules, general conversion rules are used for conversion. namespace is the namespace of MIoT-Spec-V2 instance. When its value is miot-spec-v2, it means that the specification is defined by Xiaomi. When its value is bluetooth-spec, it means that the specification is defined by Bluetooth Special Interest Group (SIG). When its value is not miot-spec-v2 or bluetooth-spec, it means that the specification is defined by other vendors. If MIoT-Spec-V2 namespace is not miot-spec-v2, a star mark * is added in front of the entity's name . Device The conversion follows SPEC_DEVICE_TRANS_MAP. { '\u003cdevice instance name\u003e':{ 'required':{ '\u003cservice instance name\u003e':{ 'required':{ 'properties': { '\u003cproperty instance name\u003e': set\u003cproperty access: str\u003e }, 'events': set\u003cevent instance name: str\u003e, 'actions': set\u003caction instance name: str\u003e }, 'optional':{ 'properties': set\u003cproperty instance name: str\u003e, 'events': set\u003cevent instance name: str\u003e, 'actions': set\u003caction instance name: str\u003e } } }, 'optional':{ '\u003cservice instance name\u003e':{ 'required':{ 'properties': { '\u003cproperty instance name\u003e': set\u003cproperty access: str\u003e }, 'events': set\u003cevent instance name: str\u003e, 'actions': set\u003caction instance name: str\u003e }, 'optional':{ 'properties': set\u003cproperty instance name: str\u003e, 'events': set\u003cevent instance name: str\u003e, 'actions': set\u003caction instance name: str\u003e } } }, 'entity': str } } The \"required\" field under \"device instance name\" indicates the required services of the device. The \"optional\" field under \"device instance name\" indicates the optional services of the device. The \"entity\" field indicates the Home Assistant entity to be created. The \"required\" and the \"optional\" field under \"service instance name\" are required and optional properties, events and actions of the service respectively. The value of \"property instance name\" under \"required\" \"properties\" field is the access mode of the property. The condition for a successful match is that the value of \"property instance name\" is a subset of the access mode of the corresponding MIoT-Spec-V2 property instance. Home Assistant entity will not be created if MIoT-Spec-V2 device instance does not contain all required services, properties, events or actions. Service The conversion follows SPEC_SERVICE_TRANS_MAP. { '\u003cservice instance name\u003e':{ 'required':{ 'properties': { '\u003cproperty instance name\u003e': set\u003cproperty access: str\u003e }, 'events': set\u003cevent instance name: str\u003e, 'actions': set\u003caction instance name: str\u003e }, 'optional':{ 'properties': set\u003cproperty instance name: str\u003e, 'events': set\u003cevent instance name: str\u003e, 'actions': set\u003caction instance name: str\u003e }, 'entity': str } } The \"required\" field under \"service instance name\" indicates the required properties, events and actions of the service. The \"optional\" field indicates the optional properties, events and actions of the service. The \"entity\" field indicates the Home Assistant entity to be created. The value of \"property instance name\" under \"required\" \"properties\" field is the access mode of the property. The condition for a successful match is that the value of \"property instance name\" is a subset of the access mode of the corresponding MIoT-Spec-V2 property instance. Home Assistant entity will not be created if MIoT-Spec-V2 service instance does not contain all required properties, events or actions. Property The conversion follows SPEC_PROP_TRANS_MAP. { 'entities':{ '\u003centity name\u003e':{ 'format': set\u003cstr\u003e, 'access': set\u003cstr\u003e } }, 'properties': { '\u003cproperty instance name\u003e':{ 'device_class': str, 'entity': str } } } The \"format\" field under \"entity name\" represents the data format of the property, and matching with one value indicates a successful match. The \"access\" field under \"entity name\" represents the access mode of the property, and matching with all values is considered a successful match. The \"entity\" field under \"property instance name\", of which value is one of entity name under \"entities\" field, indicates the Home Assistant entity to be created. The \"device_class\" field under \"property instance name\" indicates the Home Assistant entity's _attr_device_class. Event The conversion follows SPEC_EVENT_TRANS_MAP. { '\u003cevent instance name\u003e': str } The value of the event instance name indicates _attr_device_class of the Home Assistant entity to be created. MIoT-Spec-V2 Filter spec_filter.json is used to filter out the MIoT-Spec-V2 instance that will not be converted to Home Assistant entity. The format of spec_filter.json is as follows. { \"\u003cMIoT-Spec-V2 device instance\u003e\":{ \"services\": list\u003cservice_iid: str\u003e, \"properties\": list\u003cservice_iid.property_iid: str\u003e, \"events\": list\u003cservice_iid.event_iid: str\u003e, \"actions\": list\u003cservice_iid.action_iid: str\u003e, } } The key of spec_filter.json dictionary is the urn excluding the \"version\" field of the MIoT-Spec-V2 device instance. The firmware of different versions of the same product may be associated with the MIoT-Spec-V2 device instances of different versions. It is required that the MIoT-Spec-V2 instance of a higher version must contain all MIoT-Spec-V2 instances of the lower versions when a vendor defines the MIoT-Spec-V2 of its product on MIoT platform. Thus, the key of spec_filter.json does not need to specify the version number of MIoT-Spec-V2 device instance. The value of \"services\", \"properties\", \"events\" or \"actions\" fields under \"device instance\" is the instance id (iid) of the service, property, event or action that will be ignored in the conversion process. Wildcard matching is supported. Example: { \"urn:miot-spec-v2:device:television:0000A010:xiaomi-rmi1\":{ \"services\": [\"*\"] # Filter out all services. It is equivalent to completely ignoring the device with such MIoT-Spec-V2 device instance. }, \"urn:miot-spec-v2:device:gateway:0000A019:xiaomi-hub1\": { \"services\": [\"3\"], # Filter out the service whose iid=3. \"properties\": [\"4.*\"] # Filter out all properties in the service whose iid=4. \"events\": [\"4.1\"], # Filter out the iid=1 event in the iid=4 service. \"actions\": [\"4.1\"] # Filter out the iid=1 action in the iid=4 service. } } Device information service (urn:miot-spec-v2:service:device-information:00007801) of all devices will never be converted to Home Assistant entity. Multiple Language Support There are 8 languages available for selection in the config flow language option of Xiaomi Home, including Simplified Chinese, Traditional Chinese, English, Spanish, Russian, French, German, and Japanese. The config flow page in Simplified Chinese and English has been manually reviewed by the developer. Other languages are translated by machine translation. If you want to modify the words and sentences in the config flow page, you need to modify the json file of the certain language in custom_components/xiaomi_home/translations/ directory. When displaying Home Assistant entity name, Xiaomi Home downloads the multiple language file configured by the device vendor from MIoT Cloud, which contains translations for MIoT-Spec-V2 instances of the device. multi_lang.json is a locally maintained multiple language dictionary, which has a higher priority than the multiple language file obtained from the cloud and can be used to supplement or modify the multiple language translation of devices. The format of multi_lang.json is as follows. { \"\u003cMIoT-Spec-V2 device instance\u003e\": { \"\u003clanguage code\u003e\": { \"\u003cinstance code\u003e\": \u003ctranslation: str\u003e } } } The key of multi_lang.json dictionary is the urn excluding the \"version\" field of the MIoT-Spec-V2 device instance. The language code is zh-Hans, zh-Hant, en, es, ru, fr, de, or ja, corresponding to the 8 selectable languages mentioned above. The instance code is the code of the MIoT-Spec-V2 instance, which is in the format of: service:\u003csiid\u003e # service service:\u003csiid\u003e:property:\u003cpiid\u003e # property service:\u003csiid\u003e:property:\u003cpiid\u003e:valuelist:\u003cvalue\u003e # the value in value-list of a property service:\u003csiid\u003e:event:\u003ceiid\u003e # event service:\u003csiid\u003e:action:\u003caiid\u003e # action siid, piid, eiid, aiid and value are all decimal three-digit integers. Example: { \"urn:miot-spec-v2:device:health-pot:0000A051:chunmi-a1\": { \"zh-Hant\": { \"service:002\": \"養生壺\", \"service:002:property:001\": \"工作狀態\", \"service:002:property:001:valuelist:000\": \"待機中\", \"service:002:action:002\": \"停止烹飪\", \"service:005:event:001\": \"烹飪完成\" } } } If you edit specv2entity.py, spec_filter.json or multi_lang.json in the custom_components/xiaomi_home/miot/specs directory in your Home Assistant, you need to update the entity conversion rule in the integration's CONFIGURE page to take effect. Method: Settings \u003e Devices \u0026 services \u003e Configured \u003e Xiaomi Home \u003e CONFIGURE \u003e Update Entity Conversion Rule Documents License Contribution Guidelines: English | 简体中文 ChangeLog Development Documents: https://developers.home-assistant.io/docs/creating_component_index Directory Structure miot: core code. miot/miot_client: Adding a login user in the integration needs adding a miot_client instance. miot/miot_cloud: Contains functions related to the cloud service, including OAuth login process, HTTP interface functions (to get the user information, to send the device control command, etc.) miot/miot_device: Device entity, including device information, processing logic of property, event and action. miot/miot_mips: Message bus for subscribing and publishing method. miot/miot_spec: Parse MIoT-Spec-V2. miot/miot_lan: Device LAN control, including device discovery, device control, etc. miot/miot_mdns: Central hub gateway service LAN discovery. miot/miot_network: Obtain network status and network information. miot/miot_storage: File storage for the integration. miot/test: Test scripts. config_flow: Config flow.",
  "image": "https://opengraph.githubassets.com/61b64618e16ed55dbf5f09e50b89d225986edfd04418f989d5d6dd8af5dca4a7/XiaoMi/ha_xiaomi_home",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv data-hpc=\"true\"\u003e\u003carticle itemprop=\"text\"\u003e\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eXiaomi Home Integration for Home Assistant\u003c/h2\u003e\u003ca id=\"user-content-xiaomi-home-integration-for-home-assistant\" aria-label=\"Permalink: Xiaomi Home Integration for Home Assistant\" href=\"#xiaomi-home-integration-for-home-assistant\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ca href=\"https://github.com/XiaoMi/ha_xiaomi_home/blob/main/README.md\"\u003eEnglish\u003c/a\u003e | \u003ca href=\"https://github.com/XiaoMi/ha_xiaomi_home/blob/main/doc/README_zh.md\"\u003e简体中文\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eXiaomi Home Integration is an integrated component of Home Assistant supported by Xiaomi official. It allows you to use Xiaomi IoT smart devices in Home Assistant.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eInstallation\u003c/h2\u003e\u003ca id=\"user-content-installation\" aria-label=\"Permalink: Installation\" href=\"#installation\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp dir=\"auto\"\u003eHome Assistant version requirement:\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eCore \u003cmath-renderer data-static-url=\"https://github.githubassets.com/static\" data-run-id=\"f12297ba6e5c0ae3b6b0018d7cce056e\"\u003e$\\geq$\u003c/math-renderer\u003e 2024.11.0\u003c/li\u003e\n\u003cli\u003eOperating System \u003cmath-renderer data-static-url=\"https://github.githubassets.com/static\" data-run-id=\"f12297ba6e5c0ae3b6b0018d7cce056e\"\u003e$\\geq$\u003c/math-renderer\u003e 13.0\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eMethod 1: Git clone from GitHub\u003c/h3\u003e\u003ca id=\"user-content-method-1-git-clone-from-github\" aria-label=\"Permalink: Method 1: Git clone from GitHub\" href=\"#method-1-git-clone-from-github\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cdiv dir=\"auto\" data-snippet-clipboard-copy-content=\"cd config\ngit clone https://github.com/XiaoMi/ha_xiaomi_home.git\ncd ha_xiaomi_home\n./install.sh /config\"\u003e\u003cpre\u003e\u003cspan\u003ecd\u003c/span\u003e config\ngit clone https://github.com/XiaoMi/ha_xiaomi_home.git\n\u003cspan\u003ecd\u003c/span\u003e ha_xiaomi_home\n./install.sh /config\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eWe recommend this installation method, for it is convenient to switch to a tag when updating \u003ccode\u003exiaomi_home\u003c/code\u003e to a certain version.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eFor example, update to version v1.0.0\u003c/p\u003e\n\u003cdiv dir=\"auto\" data-snippet-clipboard-copy-content=\"cd config/ha_xiaomi_home\ngit checkout v1.0.0\n./install.sh /config\"\u003e\u003cpre\u003e\u003cspan\u003ecd\u003c/span\u003e config/ha_xiaomi_home\ngit checkout v1.0.0\n./install.sh /config\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eMethod 2: \u003ca href=\"https://hacs.xyz/\" rel=\"nofollow\"\u003eHACS\u003c/a\u003e\u003c/h3\u003e\u003ca id=\"user-content-method-2-hacs\" aria-label=\"Permalink: Method 2: HACS\" href=\"#method-2-hacs\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eHACS \u0026gt; Overflow Menu \u0026gt; Custom repositories \u0026gt; Repository: \u003ca href=\"https://github.com/XiaoMi/ha_xiaomi_home.git\"\u003ehttps://github.com/XiaoMi/ha_xiaomi_home.git\u003c/a\u003e \u0026amp; Category: Integration \u0026gt; ADD\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp dir=\"auto\"\u003eXiaomi Home has not been added to the HACS store as a default yet. It\u0026#39;s coming soon.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eMethod 3: Manually installation via \u003ca href=\"https://github.com/home-assistant/addons/tree/master/samba\"\u003eSamba\u003c/a\u003e / \u003ca href=\"https://github.com/hassio-addons/addon-ftp\"\u003eFTPS\u003c/a\u003e\u003c/h3\u003e\u003ca id=\"user-content-method-3-manually-installation-via-samba--ftps\" aria-label=\"Permalink: Method 3: Manually installation via Samba / FTPS\" href=\"#method-3-manually-installation-via-samba--ftps\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eDownload and copy \u003ccode\u003ecustom_components/xiaomi_home\u003c/code\u003e folder to \u003ccode\u003econfig/custom_components\u003c/code\u003e folder in your Home Assistant.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eConfiguration\u003c/h2\u003e\u003ca id=\"user-content-configuration\" aria-label=\"Permalink: Configuration\" href=\"#configuration\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eLogin\u003c/h3\u003e\u003ca id=\"user-content-login\" aria-label=\"Permalink: Login\" href=\"#login\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ca href=\"https://my.home-assistant.io/redirect/brand/?brand=xiaomi_home\" rel=\"nofollow\"\u003eSettings \u0026gt; Devices \u0026amp; services \u0026gt; ADD INTEGRATION\u003c/a\u003e \u0026gt; Search \u003ccode\u003eXiaomi Home\u003c/code\u003e \u0026gt; NEXT \u0026gt; Click here to login \u0026gt; Sign in with Xiaomi account\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ca href=\"https://my.home-assistant.io/redirect/config_flow_start/?domain=xiaomi_home\" rel=\"nofollow\"\u003e\u003cimg src=\"https://camo.githubusercontent.com/adbb09f7a40eb3933f3220dfe49dd8dff1e0f86acf59e9803662bb6f8f988910/68747470733a2f2f6d792e686f6d652d617373697374616e742e696f2f6261646765732f636f6e6669675f666c6f775f73746172742e737667\" alt=\"Open your Home Assistant instance and start setting up a new integration.\" data-canonical-src=\"https://my.home-assistant.io/badges/config_flow_start.svg\"/\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eAdd MIoT Devices\u003c/h3\u003e\u003ca id=\"user-content-add-miot-devices\" aria-label=\"Permalink: Add MIoT Devices\" href=\"#add-miot-devices\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eAfter logging in successfully, a dialog box named \u0026#34;Select Home and Devices\u0026#34; pops up. You can select the home containing the device that you want to import in Home Assistant.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eMultiple User Login\u003c/h3\u003e\u003ca id=\"user-content-multiple-user-login\" aria-label=\"Permalink: Multiple User Login\" href=\"#multiple-user-login\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eAfter a Xiaomi account login and its user configuration are completed, you can continue to add other Xiaomi accounts in the configured Xiaomi Home Integration page.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eMethod: \u003ca href=\"https://my.home-assistant.io/redirect/integration/?domain=xiaomi_home\" rel=\"nofollow\"\u003eSettings \u0026gt; Devices \u0026amp; services \u0026gt; Configured \u0026gt; Xiaomi Home\u003c/a\u003e \u0026gt; ADD HUB \u0026gt; NEXT \u0026gt; Click here to login \u0026gt; Sign in with Xiaomi account\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ca href=\"https://my.home-assistant.io/redirect/integration/?domain=xiaomi_home\" rel=\"nofollow\"\u003e\u003cimg src=\"https://camo.githubusercontent.com/15a86d08f7563387040afaf0ccbc46e4bee0f1002dfba800b01196693feff43f/68747470733a2f2f6d792e686f6d652d617373697374616e742e696f2f6261646765732f696e746567726174696f6e2e737667\" alt=\"Open your Home Assistant instance and show an integration.\" data-canonical-src=\"https://my.home-assistant.io/badges/integration.svg\"/\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eUpdate Configurations\u003c/h3\u003e\u003ca id=\"user-content-update-configurations\" aria-label=\"Permalink: Update Configurations\" href=\"#update-configurations\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eYou can change the configurations in the \u0026#34;Configuration Options\u0026#34; dialog box, in which you can update your user nickname and the list of the devices importing from Xiaomi Home APP, etc.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eMethod: \u003ca href=\"https://my.home-assistant.io/redirect/integration/?domain=xiaomi_home\" rel=\"nofollow\"\u003eSettings \u0026gt; Devices \u0026amp; services \u0026gt; Configured \u0026gt; Xiaomi Home\u003c/a\u003e \u0026gt; CONFIGURE \u0026gt; Select the option to update\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eDebug Mode for Action\u003c/h3\u003e\u003ca id=\"user-content-debug-mode-for-action\" aria-label=\"Permalink: Debug Mode for Action\" href=\"#debug-mode-for-action\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eYou can manually send Action command message with parameters to the device when the debug mode for action is activated. The user interface for sending the Action command with parameters is shown as a Text entity.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eMethod: \u003ca href=\"https://my.home-assistant.io/redirect/integration/?domain=xiaomi_home\" rel=\"nofollow\"\u003eSettings \u0026gt; Devices \u0026amp; services \u0026gt; Configured \u0026gt; Xiaomi Home\u003c/a\u003e \u0026gt; CONFIGURE \u0026gt; Debug mode for action\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eSecurity\u003c/h2\u003e\u003ca id=\"user-content-security\" aria-label=\"Permalink: Security\" href=\"#security\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eXiaomi Home Integration and the affiliated cloud interface is provided by Xiaomi officially. You need to use your Xiaomi account to login to get your device list. Xiaomi Home Integration implements OAuth 2.0 login process, which does not keep your account password in the Home Assistant application. However, due to the limitation of the Home Assistant platform, the user information (including device information, certificates, tokens, etc.) of your Xiaomi account will be saved in the Home Assistant configuration file in clear text after successful login. You need to ensure that your Home Assistant configuration file is properly stored. The exposure of your configuration file may result in others logging in with your identity.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eFAQ\u003c/h2\u003e\u003ca id=\"user-content-faq\" aria-label=\"Permalink: FAQ\" href=\"#faq\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003eDoes Xiaomi Home Integration support all Xiaomi Home devices?\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eXiaomi Home Integration currently supports most categories of Home device. Only a few categories are not supported. They are Bluetooth device, infrared device and virtual device.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003eDoes Xiaomi Home Integration support multiple Xiaomi accounts?\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eYes, it supports multiple Xiaomi accounts. Furthermore, Xiaomi Home Integration allows that devices belonging to different accounts can be added to a same area.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003eDoes Xiaomi Home Integration support local control?\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eLocal control is implemented by \u003ca href=\"https://www.mi.com/shop/buy/detail?product_id=15755\u0026amp;cfrom=search\" rel=\"nofollow\"\u003eXiaomi Central Hub Gateway\u003c/a\u003e (firmware version 3.4.0_0000 above) or Xiaomi home devices with built-in central hub gateway (software version 0.8.0 above) inside. If you do not have a Xiaomi central hub gateway or other devices having central hub gateway function, all control commands are sent through Xiaomi Cloud. The firmware for Xiaomi central hub gateway including the built-in central hub gateway supporting Home Assistant local control feature has not been released yet. Please refer to MIoT team\u0026#39;s notification for upgrade plans.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eXiaomi central hub gateway is only available in mainland China. In other regions, it is not available.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eXiaomi Home Integration can also implement partial local control by enabling Xiaomi LAN control function. Xiaomi LAN control function can only control IP devices (devices connected to the router via WiFi or ethernet cable) in the same local area network as Home Assistant. It cannot control BLE Mesh, ZigBee, etc. devices. This function may cause some abnormalities. We recommend not to use this function. Xiaomi LAN control function is enabled by \u003ca href=\"https://my.home-assistant.io/redirect/integration/?domain=xiaomi_home\" rel=\"nofollow\"\u003eSettings \u0026gt; Devices \u0026amp; services \u0026gt; Configured \u0026gt; Xiaomi Home\u003c/a\u003e \u0026gt; CONFIGURE \u0026gt; Update LAN control configuration\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eXiaomi LAN control function is not restricted by region. It is available in all regions. However, if there is a central gateway in the local area network where Home Assistant is located, even Xiaomi LAN control function is enabled in the integration, it will not take effect.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003eIn which regions is Xiaomi Home Integration available?\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eXiaomi Home Integration can be used in the mainland of China, Europe, India, Russia, Singapore, and USA. As user data in Xiaomi Cloud of different regions is isolated, you need to choose your region when importing MIoT devices in the configuration process. Xiaomi Home Integration allows you to import devices of different regions to a same area.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003ePrinciple of Messaging\u003c/h2\u003e\u003ca id=\"user-content-principle-of-messaging\" aria-label=\"Permalink: Principle of Messaging\" href=\"#principle-of-messaging\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eControl through the Cloud\u003c/h3\u003e\u003ca id=\"user-content-control-through-the-cloud\" aria-label=\"Permalink: Control through the Cloud\" href=\"#control-through-the-cloud\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cdiv dir=\"auto\"\u003e\n\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/XiaoMi/ha_xiaomi_home/blob/main/doc/images/cloud_control.jpg\"\u003e\u003cimg src=\"https://github.com/XiaoMi/ha_xiaomi_home/raw/main/doc/images/cloud_control.jpg\" width=\"300\"/\u003e\u003c/a\u003e\u003c/p\u003e\u003cp dir=\"auto\"\u003eImage 1: Cloud control architecture\u003c/p\u003e\n \u003c/div\u003e\n\u003cp dir=\"auto\"\u003eXiaomi Home Integration subscribes to the interested device messages on the MQTT Broker in MIoT Cloud. When a device property changes or a device event occurs, the device sends an upstream message to MIoT Cloud, and the MQTT Broker pushes the subscribed device message to Xiaomi Home Integration. Because Xiaomi Home Integration does not need to poll to obtain the current device property value in the cloud, it can immediately receive the notification message when the properties change or the events occur. Thanks to the message subscription mechanism, Xiaomi Home Integration only queries the properties of all devices from the cloud once when the integration configuration is completed, which puts little access pressure on the cloud.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eXiaomi Home Integration sends command messages to the devices via the HTTP interface of MIoT Cloud to control devices. The device reacts and responds after receiving the downstream message sent forward by MIoT Cloud.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eControl locally\u003c/h3\u003e\u003ca id=\"user-content-control-locally\" aria-label=\"Permalink: Control locally\" href=\"#control-locally\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cdiv dir=\"auto\"\u003e\n\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/XiaoMi/ha_xiaomi_home/blob/main/doc/images/local_control.jpg\"\u003e\u003cimg src=\"https://github.com/XiaoMi/ha_xiaomi_home/raw/main/doc/images/local_control.jpg\" width=\"300\"/\u003e\u003c/a\u003e\u003c/p\u003e\u003cp dir=\"auto\"\u003eImage 2: Local control architecture\u003c/p\u003e\n\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eXiaomi central hub gateway contains a standard MQTT Broker, which implements a complete subscribe-publish mechanism. Xiaomi Home Integration subscribes to the interested device messages through Xiaomi central hub gateway. When a device property changes or a device event occurs, the device sends an upstream message to Xiaomi central hub gateway, and the MQTT Broker pushes the subscribed device message to Xiaomi Home Integration.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eWhen Xiaomi Home Integration needs to control a device, it publishes a device command message to the MQTT Broker, which is then forwarded to the device by Xiaomi central hub gateway. The device reacts and responds after receiving the downstream message from the gateway.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eMapping Relationship between MIoT-Spec-V2 and Home Assistant Entity\u003c/h2\u003e\u003ca id=\"user-content-mapping-relationship-between-miot-spec-v2-and-home-assistant-entity\" aria-label=\"Permalink: Mapping Relationship between MIoT-Spec-V2 and Home Assistant Entity\" href=\"#mapping-relationship-between-miot-spec-v2-and-home-assistant-entity\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ca href=\"https://iot.mi.com/v2/new/doc/introduction/knowledge/spec\" rel=\"nofollow\"\u003eMIoT-Spec-V2\u003c/a\u003e is the abbreviation for MIoT Specification Version 2, which is an IoT protocol formulated by Xiaomi IoT platform to give a standard functional description of IoT devices. It includes function definition (referred to as data model by other IoT platforms), interaction model, message format, and encoding.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eIn MIoT-Spec-V2 protocol, a product is defined as a device. A device contains several services. A service may have some properties, events and actions. Xiaomi Home Integration creates Home Assistant entities according to MIoT-Spec-V2. The conversion relationship is as follows.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eGeneral Conversion\u003c/h3\u003e\u003ca id=\"user-content-general-conversion\" aria-label=\"Permalink: General Conversion\" href=\"#general-conversion\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eProperty\u003c/li\u003e\n\u003c/ul\u003e\n\u003cmarkdown-accessiblity-table\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eformat\u003c/th\u003e\n\u003cth\u003eaccess\u003c/th\u003e\n\u003cth\u003evalue-list\u003c/th\u003e\n\u003cth\u003evalue-range\u003c/th\u003e\n\u003cth\u003eEntity in Home Assistant\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003ewritable\u003c/td\u003e\n\u003ctd\u003estring\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003eText\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ewritable\u003c/td\u003e\n\u003ctd\u003ebool\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003eSwitch\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ewritable\u003c/td\u003e\n\u003ctd\u003enot string \u0026amp; not bool\u003c/td\u003e\n\u003ctd\u003eexistent\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003eSelect\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ewritable\u003c/td\u003e\n\u003ctd\u003enot string \u0026amp; not bool\u003c/td\u003e\n\u003ctd\u003enon-existent\u003c/td\u003e\n\u003ctd\u003eexistent\u003c/td\u003e\n\u003ctd\u003eNumber\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enot writable\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003eSensor\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/markdown-accessiblity-table\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eEvent\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003eMIoT-Spec-V2 event is transformed to Event entity in Home Assistant. The event\u0026#39;s parameters are also passed to entity\u0026#39;s \u003ccode\u003e_trigger_event\u003c/code\u003e.\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eAction\u003c/li\u003e\n\u003c/ul\u003e\n\u003cmarkdown-accessiblity-table\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003ein\u003c/th\u003e\n\u003cth\u003eEntity in Home Assistant\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eempty\u003c/td\u003e\n\u003ctd\u003eButton\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enot empty\u003c/td\u003e\n\u003ctd\u003eNotify\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/markdown-accessiblity-table\u003e\n\u003cp dir=\"auto\"\u003eIf the debug mode for action is activated, the Text entity will be created when the \u0026#34;in\u0026#34; field in the action spec is not empty.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThe \u0026#34;Attribute\u0026#34; item in the entity details page displays the format of the input parameter which is an ordered list, enclosed in square brackets []. The string elements in the list are enclosed in double quotation marks \u0026#34;\u0026#34;.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eFor example, the \u0026#34;Attributes\u0026#34; item in the details page of the Notify entity converted by the \u0026#34;Intelligent Speaker Execute Text Directive\u0026#34; action of xiaomi.wifispeaker.s12 siid=5, aiid=5 instance shows the action params as \u003ccode\u003e[Text Content(str), Silent Execution(bool)]\u003c/code\u003e. A properly formatted input is \u003ccode\u003e[\u0026#34;Hello\u0026#34;, true]\u003c/code\u003e.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eSpecific Conversion\u003c/h3\u003e\u003ca id=\"user-content-specific-conversion\" aria-label=\"Permalink: Specific Conversion\" href=\"#specific-conversion\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eMIoT-Spec-V2 uses URN for defining types. The format is \u003ccode\u003eurn:\u0026lt;namespace\u0026gt;:\u0026lt;type\u0026gt;:\u0026lt;name\u0026gt;:\u0026lt;value\u0026gt;[:\u0026lt;vendor-product\u0026gt;:\u0026lt;version\u0026gt;]\u003c/code\u003e, in which \u003ccode\u003ename\u003c/code\u003e is a human-readable word or phrase describing the instance of device, service, property, event and action. Xiaomi Home Integration first determines whether to convert the MIoT-Spec-V2 instance into a specific Home Assistant entity based on the instance\u0026#39;s name. For the instance that does not meet the specific conversion rules, general conversion rules are used for conversion.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode\u003enamespace\u003c/code\u003e is the namespace of MIoT-Spec-V2 instance. When its value is miot-spec-v2, it means that the specification is defined by Xiaomi. When its value is bluetooth-spec, it means that the specification is defined by Bluetooth Special Interest Group (SIG). When its value is not miot-spec-v2 or bluetooth-spec, it means that the specification is defined by other vendors. If MIoT-Spec-V2 \u003ccode\u003enamespace\u003c/code\u003e is not miot-spec-v2, a star mark \u003ccode\u003e*\u003c/code\u003e is added in front of the entity\u0026#39;s name .\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eDevice\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003eThe conversion follows \u003ccode\u003eSPEC_DEVICE_TRANS_MAP\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"{\n    \u0026#39;\u0026lt;device instance name\u0026gt;\u0026#39;:{\n        \u0026#39;required\u0026#39;:{\n            \u0026#39;\u0026lt;service instance name\u0026gt;\u0026#39;:{\n                \u0026#39;required\u0026#39;:{\n                    \u0026#39;properties\u0026#39;: {\n                        \u0026#39;\u0026lt;property instance name\u0026gt;\u0026#39;: set\u0026lt;property access: str\u0026gt;\n                    },\n                    \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n                    \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n                },\n                \u0026#39;optional\u0026#39;:{\n                    \u0026#39;properties\u0026#39;: set\u0026lt;property instance name: str\u0026gt;,\n                    \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n                    \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n                }\n            }\n        },\n        \u0026#39;optional\u0026#39;:{\n            \u0026#39;\u0026lt;service instance name\u0026gt;\u0026#39;:{\n                \u0026#39;required\u0026#39;:{\n                    \u0026#39;properties\u0026#39;: {\n                        \u0026#39;\u0026lt;property instance name\u0026gt;\u0026#39;: set\u0026lt;property access: str\u0026gt;\n                    },\n                    \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n                    \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n                },\n                \u0026#39;optional\u0026#39;:{\n                    \u0026#39;properties\u0026#39;: set\u0026lt;property instance name: str\u0026gt;,\n                    \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n                    \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n                }\n            }\n        },\n        \u0026#39;entity\u0026#39;: str\n    }\n}\"\u003e\u003cpre\u003e\u003ccode\u003e{\n    \u0026#39;\u0026lt;device instance name\u0026gt;\u0026#39;:{\n        \u0026#39;required\u0026#39;:{\n            \u0026#39;\u0026lt;service instance name\u0026gt;\u0026#39;:{\n                \u0026#39;required\u0026#39;:{\n                    \u0026#39;properties\u0026#39;: {\n                        \u0026#39;\u0026lt;property instance name\u0026gt;\u0026#39;: set\u0026lt;property access: str\u0026gt;\n                    },\n                    \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n                    \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n                },\n                \u0026#39;optional\u0026#39;:{\n                    \u0026#39;properties\u0026#39;: set\u0026lt;property instance name: str\u0026gt;,\n                    \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n                    \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n                }\n            }\n        },\n        \u0026#39;optional\u0026#39;:{\n            \u0026#39;\u0026lt;service instance name\u0026gt;\u0026#39;:{\n                \u0026#39;required\u0026#39;:{\n                    \u0026#39;properties\u0026#39;: {\n                        \u0026#39;\u0026lt;property instance name\u0026gt;\u0026#39;: set\u0026lt;property access: str\u0026gt;\n                    },\n                    \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n                    \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n                },\n                \u0026#39;optional\u0026#39;:{\n                    \u0026#39;properties\u0026#39;: set\u0026lt;property instance name: str\u0026gt;,\n                    \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n                    \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n                }\n            }\n        },\n        \u0026#39;entity\u0026#39;: str\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe \u0026#34;required\u0026#34; field under \u0026#34;device instance name\u0026#34; indicates the required services of the device. The \u0026#34;optional\u0026#34; field under \u0026#34;device instance name\u0026#34; indicates the optional services of the device. The \u0026#34;entity\u0026#34; field indicates the Home Assistant entity to be created. The \u0026#34;required\u0026#34; and the \u0026#34;optional\u0026#34; field under \u0026#34;service instance name\u0026#34; are required and optional properties, events and actions of the service respectively. The value of \u0026#34;property instance name\u0026#34; under \u0026#34;required\u0026#34; \u0026#34;properties\u0026#34; field is the access mode of the property. The condition for a successful match is that the value of \u0026#34;property instance name\u0026#34; is a subset of the access mode of the corresponding MIoT-Spec-V2 property instance.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eHome Assistant entity will not be created if MIoT-Spec-V2 device instance does not contain all required services, properties, events or actions.\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eService\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003eThe conversion follows \u003ccode\u003eSPEC_SERVICE_TRANS_MAP\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"{\n    \u0026#39;\u0026lt;service instance name\u0026gt;\u0026#39;:{\n        \u0026#39;required\u0026#39;:{\n            \u0026#39;properties\u0026#39;: {\n                \u0026#39;\u0026lt;property instance name\u0026gt;\u0026#39;: set\u0026lt;property access: str\u0026gt;\n            },\n            \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n            \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n        },\n        \u0026#39;optional\u0026#39;:{\n            \u0026#39;properties\u0026#39;: set\u0026lt;property instance name: str\u0026gt;,\n            \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n            \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n        },\n        \u0026#39;entity\u0026#39;: str\n    }\n}\"\u003e\u003cpre\u003e\u003ccode\u003e{\n    \u0026#39;\u0026lt;service instance name\u0026gt;\u0026#39;:{\n        \u0026#39;required\u0026#39;:{\n            \u0026#39;properties\u0026#39;: {\n                \u0026#39;\u0026lt;property instance name\u0026gt;\u0026#39;: set\u0026lt;property access: str\u0026gt;\n            },\n            \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n            \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n        },\n        \u0026#39;optional\u0026#39;:{\n            \u0026#39;properties\u0026#39;: set\u0026lt;property instance name: str\u0026gt;,\n            \u0026#39;events\u0026#39;: set\u0026lt;event instance name: str\u0026gt;,\n            \u0026#39;actions\u0026#39;: set\u0026lt;action instance name: str\u0026gt;\n        },\n        \u0026#39;entity\u0026#39;: str\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe \u0026#34;required\u0026#34; field under \u0026#34;service instance name\u0026#34; indicates the required properties, events and actions of the service. The \u0026#34;optional\u0026#34; field indicates the optional properties, events and actions of the service. The \u0026#34;entity\u0026#34; field indicates the Home Assistant entity to be created. The value of \u0026#34;property instance name\u0026#34; under \u0026#34;required\u0026#34; \u0026#34;properties\u0026#34; field is the access mode of the property. The condition for a successful match is that the value of \u0026#34;property instance name\u0026#34; is a subset of the access mode of the corresponding MIoT-Spec-V2 property instance.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eHome Assistant entity will not be created if MIoT-Spec-V2 service instance does not contain all required properties, events or actions.\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eProperty\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003eThe conversion follows \u003ccode\u003eSPEC_PROP_TRANS_MAP\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"{\n    \u0026#39;entities\u0026#39;:{\n        \u0026#39;\u0026lt;entity name\u0026gt;\u0026#39;:{\n            \u0026#39;format\u0026#39;: set\u0026lt;str\u0026gt;,\n            \u0026#39;access\u0026#39;: set\u0026lt;str\u0026gt;\n        }\n    },\n    \u0026#39;properties\u0026#39;: {\n        \u0026#39;\u0026lt;property instance name\u0026gt;\u0026#39;:{\n            \u0026#39;device_class\u0026#39;: str,\n            \u0026#39;entity\u0026#39;: str\n        }\n    }\n}\"\u003e\u003cpre\u003e\u003ccode\u003e{\n    \u0026#39;entities\u0026#39;:{\n        \u0026#39;\u0026lt;entity name\u0026gt;\u0026#39;:{\n            \u0026#39;format\u0026#39;: set\u0026lt;str\u0026gt;,\n            \u0026#39;access\u0026#39;: set\u0026lt;str\u0026gt;\n        }\n    },\n    \u0026#39;properties\u0026#39;: {\n        \u0026#39;\u0026lt;property instance name\u0026gt;\u0026#39;:{\n            \u0026#39;device_class\u0026#39;: str,\n            \u0026#39;entity\u0026#39;: str\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe \u0026#34;format\u0026#34; field under \u0026#34;entity name\u0026#34; represents the data format of the property, and matching with one value indicates a successful match. The \u0026#34;access\u0026#34; field under \u0026#34;entity name\u0026#34; represents the access mode of the property, and matching with all values is considered a successful match.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThe \u0026#34;entity\u0026#34; field under \u0026#34;property instance name\u0026#34;, of which value is one of entity name under \u0026#34;entities\u0026#34; field, indicates the Home Assistant entity to be created. The \u0026#34;device_class\u0026#34; field under \u0026#34;property instance name\u0026#34; indicates the Home Assistant entity\u0026#39;s \u003ccode\u003e_attr_device_class\u003c/code\u003e.\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eEvent\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003eThe conversion follows \u003ccode\u003eSPEC_EVENT_TRANS_MAP\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"{\n    \u0026#39;\u0026lt;event instance name\u0026gt;\u0026#39;: str\n}\"\u003e\u003cpre\u003e\u003ccode\u003e{\n    \u0026#39;\u0026lt;event instance name\u0026gt;\u0026#39;: str\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe value of the event instance name indicates \u003ccode\u003e_attr_device_class\u003c/code\u003e of the Home Assistant entity to be created.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch3 tabindex=\"-1\" dir=\"auto\"\u003eMIoT-Spec-V2 Filter\u003c/h3\u003e\u003ca id=\"user-content-miot-spec-v2-filter\" aria-label=\"Permalink: MIoT-Spec-V2 Filter\" href=\"#miot-spec-v2-filter\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode\u003espec_filter.json\u003c/code\u003e is used to filter out the MIoT-Spec-V2 instance that will not be converted to Home Assistant entity.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThe format of \u003ccode\u003espec_filter.json\u003c/code\u003e is as follows.\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"{\n    \u0026#34;\u0026lt;MIoT-Spec-V2 device instance\u0026gt;\u0026#34;:{\n        \u0026#34;services\u0026#34;: list\u0026lt;service_iid: str\u0026gt;,\n        \u0026#34;properties\u0026#34;: list\u0026lt;service_iid.property_iid: str\u0026gt;,\n        \u0026#34;events\u0026#34;: list\u0026lt;service_iid.event_iid: str\u0026gt;,\n        \u0026#34;actions\u0026#34;: list\u0026lt;service_iid.action_iid: str\u0026gt;,\n    }\n}\"\u003e\u003cpre\u003e\u003ccode\u003e{\n    \u0026#34;\u0026lt;MIoT-Spec-V2 device instance\u0026gt;\u0026#34;:{\n        \u0026#34;services\u0026#34;: list\u0026lt;service_iid: str\u0026gt;,\n        \u0026#34;properties\u0026#34;: list\u0026lt;service_iid.property_iid: str\u0026gt;,\n        \u0026#34;events\u0026#34;: list\u0026lt;service_iid.event_iid: str\u0026gt;,\n        \u0026#34;actions\u0026#34;: list\u0026lt;service_iid.action_iid: str\u0026gt;,\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe key of \u003ccode\u003espec_filter.json\u003c/code\u003e dictionary is the urn excluding the \u0026#34;version\u0026#34; field of the MIoT-Spec-V2 device instance. The firmware of different versions of the same product may be associated with the MIoT-Spec-V2 device instances of different versions. It is required that the MIoT-Spec-V2 instance of a higher version must contain all MIoT-Spec-V2 instances of the lower versions when a vendor defines the MIoT-Spec-V2 of its product on MIoT platform. Thus, the key of \u003ccode\u003espec_filter.json\u003c/code\u003e does not need to specify the version number of MIoT-Spec-V2 device instance.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThe value of \u0026#34;services\u0026#34;, \u0026#34;properties\u0026#34;, \u0026#34;events\u0026#34; or \u0026#34;actions\u0026#34; fields under \u0026#34;device instance\u0026#34; is the instance id (iid) of the service, property, event or action that will be ignored in the conversion process. Wildcard matching is supported.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eExample:\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"{\n    \u0026#34;urn:miot-spec-v2:device:television:0000A010:xiaomi-rmi1\u0026#34;:{\n        \u0026#34;services\u0026#34;: [\u0026#34;*\u0026#34;]   # Filter out all services. It is equivalent to completely ignoring the device with such MIoT-Spec-V2 device instance.\n    },\n    \u0026#34;urn:miot-spec-v2:device:gateway:0000A019:xiaomi-hub1\u0026#34;: {\n        \u0026#34;services\u0026#34;: [\u0026#34;3\u0026#34;],  # Filter out the service whose iid=3.\n        \u0026#34;properties\u0026#34;: [\u0026#34;4.*\u0026#34;]   # Filter out all properties in the service whose iid=4.\n        \u0026#34;events\u0026#34;: [\u0026#34;4.1\u0026#34;],  # Filter out the iid=1 event in the iid=4 service.\n        \u0026#34;actions\u0026#34;: [\u0026#34;4.1\u0026#34;]  # Filter out the iid=1 action in the iid=4 service.\n    }\n}\"\u003e\u003cpre\u003e\u003ccode\u003e{\n    \u0026#34;urn:miot-spec-v2:device:television:0000A010:xiaomi-rmi1\u0026#34;:{\n        \u0026#34;services\u0026#34;: [\u0026#34;*\u0026#34;]   # Filter out all services. It is equivalent to completely ignoring the device with such MIoT-Spec-V2 device instance.\n    },\n    \u0026#34;urn:miot-spec-v2:device:gateway:0000A019:xiaomi-hub1\u0026#34;: {\n        \u0026#34;services\u0026#34;: [\u0026#34;3\u0026#34;],  # Filter out the service whose iid=3.\n        \u0026#34;properties\u0026#34;: [\u0026#34;4.*\u0026#34;]   # Filter out all properties in the service whose iid=4.\n        \u0026#34;events\u0026#34;: [\u0026#34;4.1\u0026#34;],  # Filter out the iid=1 event in the iid=4 service.\n        \u0026#34;actions\u0026#34;: [\u0026#34;4.1\u0026#34;]  # Filter out the iid=1 action in the iid=4 service.\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eDevice information service (urn:miot-spec-v2:service:device-information:00007801) of all devices will never be converted to Home Assistant entity.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eMultiple Language Support\u003c/h2\u003e\u003ca id=\"user-content-multiple-language-support\" aria-label=\"Permalink: Multiple Language Support\" href=\"#multiple-language-support\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThere are 8 languages available for selection in the config flow language option of Xiaomi Home, including Simplified Chinese, Traditional Chinese, English, Spanish, Russian, French, German, and Japanese. The config flow page in Simplified Chinese and English has been manually reviewed by the developer. Other languages are translated by machine translation. If you want to modify the words and sentences in the config flow page, you need to modify the json file of the certain language in \u003ccode\u003ecustom_components/xiaomi_home/translations/\u003c/code\u003e directory.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eWhen displaying Home Assistant entity name, Xiaomi Home downloads the multiple language file configured by the device vendor from MIoT Cloud, which contains translations for MIoT-Spec-V2 instances of the device. \u003ccode\u003emulti_lang.json\u003c/code\u003e is a locally maintained multiple language dictionary, which has a higher priority than the multiple language file obtained from the cloud and can be used to supplement or modify the multiple language translation of devices.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThe format of \u003ccode\u003emulti_lang.json\u003c/code\u003e is as follows.\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"{\n    \u0026#34;\u0026lt;MIoT-Spec-V2 device instance\u0026gt;\u0026#34;: {\n        \u0026#34;\u0026lt;language code\u0026gt;\u0026#34;: {\n            \u0026#34;\u0026lt;instance code\u0026gt;\u0026#34;: \u0026lt;translation: str\u0026gt;\n        }\n    }\n}\"\u003e\u003cpre\u003e\u003ccode\u003e{\n    \u0026#34;\u0026lt;MIoT-Spec-V2 device instance\u0026gt;\u0026#34;: {\n        \u0026#34;\u0026lt;language code\u0026gt;\u0026#34;: {\n            \u0026#34;\u0026lt;instance code\u0026gt;\u0026#34;: \u0026lt;translation: str\u0026gt;\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe key of \u003ccode\u003emulti_lang.json\u003c/code\u003e dictionary is the urn excluding the \u0026#34;version\u0026#34; field of the MIoT-Spec-V2 device instance.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThe language code is zh-Hans, zh-Hant, en, es, ru, fr, de, or ja, corresponding to the 8 selectable languages mentioned above.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThe instance code is the code of the MIoT-Spec-V2 instance, which is in the format of:\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"service:\u0026lt;siid\u0026gt;                  # service\nservice:\u0026lt;siid\u0026gt;:property:\u0026lt;piid\u0026gt;  # property\nservice:\u0026lt;siid\u0026gt;:property:\u0026lt;piid\u0026gt;:valuelist:\u0026lt;value\u0026gt; # the value in value-list of a property\nservice:\u0026lt;siid\u0026gt;:event:\u0026lt;eiid\u0026gt;     # event\nservice:\u0026lt;siid\u0026gt;:action:\u0026lt;aiid\u0026gt;    # action\"\u003e\u003cpre\u003e\u003ccode\u003eservice:\u0026lt;siid\u0026gt;                  # service\nservice:\u0026lt;siid\u0026gt;:property:\u0026lt;piid\u0026gt;  # property\nservice:\u0026lt;siid\u0026gt;:property:\u0026lt;piid\u0026gt;:valuelist:\u0026lt;value\u0026gt; # the value in value-list of a property\nservice:\u0026lt;siid\u0026gt;:event:\u0026lt;eiid\u0026gt;     # event\nservice:\u0026lt;siid\u0026gt;:action:\u0026lt;aiid\u0026gt;    # action\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003esiid, piid, eiid, aiid and value are all decimal three-digit integers.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eExample:\u003c/p\u003e\n\u003cdiv data-snippet-clipboard-copy-content=\"{\n    \u0026#34;urn:miot-spec-v2:device:health-pot:0000A051:chunmi-a1\u0026#34;: {\n        \u0026#34;zh-Hant\u0026#34;: {\n            \u0026#34;service:002\u0026#34;: \u0026#34;養生壺\u0026#34;,\n            \u0026#34;service:002:property:001\u0026#34;: \u0026#34;工作狀態\u0026#34;,\n            \u0026#34;service:002:property:001:valuelist:000\u0026#34;: \u0026#34;待機中\u0026#34;,\n            \u0026#34;service:002:action:002\u0026#34;: \u0026#34;停止烹飪\u0026#34;,\n            \u0026#34;service:005:event:001\u0026#34;: \u0026#34;烹飪完成\u0026#34;\n        }\n    }\n}\"\u003e\u003cpre\u003e\u003ccode\u003e{\n    \u0026#34;urn:miot-spec-v2:device:health-pot:0000A051:chunmi-a1\u0026#34;: {\n        \u0026#34;zh-Hant\u0026#34;: {\n            \u0026#34;service:002\u0026#34;: \u0026#34;養生壺\u0026#34;,\n            \u0026#34;service:002:property:001\u0026#34;: \u0026#34;工作狀態\u0026#34;,\n            \u0026#34;service:002:property:001:valuelist:000\u0026#34;: \u0026#34;待機中\u0026#34;,\n            \u0026#34;service:002:action:002\u0026#34;: \u0026#34;停止烹飪\u0026#34;,\n            \u0026#34;service:005:event:001\u0026#34;: \u0026#34;烹飪完成\u0026#34;\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp dir=\"auto\"\u003eIf you edit \u003ccode\u003especv2entity.py\u003c/code\u003e, \u003ccode\u003espec_filter.json\u003c/code\u003e or \u003ccode\u003emulti_lang.json\u003c/code\u003e in the \u003ccode\u003ecustom_components/xiaomi_home/miot/specs\u003c/code\u003e directory in your Home Assistant, you need to update the entity conversion rule in the integration\u0026#39;s CONFIGURE page to take effect. Method: \u003ca href=\"https://my.home-assistant.io/redirect/integration/?domain=xiaomi_home\" rel=\"nofollow\"\u003eSettings \u0026gt; Devices \u0026amp; services \u0026gt; Configured \u0026gt; Xiaomi Home\u003c/a\u003e \u0026gt; CONFIGURE \u0026gt; Update Entity Conversion Rule\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eDocuments\u003c/h2\u003e\u003ca id=\"user-content-documents\" aria-label=\"Permalink: Documents\" href=\"#documents\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/XiaoMi/ha_xiaomi_home/blob/main/LICENSE.md\"\u003eLicense\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eContribution Guidelines: \u003ca href=\"https://github.com/XiaoMi/ha_xiaomi_home/blob/main/doc/CONTRIBUTING.md\"\u003eEnglish\u003c/a\u003e | \u003ca href=\"https://github.com/XiaoMi/ha_xiaomi_home/blob/main/doc/CONTRIBUTING_zh.md\"\u003e简体中文\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/XiaoMi/ha_xiaomi_home/blob/main/doc/CHANGELOG.md\"\u003eChangeLog\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eDevelopment Documents: \u003ca href=\"https://developers.home-assistant.io/docs/creating_component_index\" rel=\"nofollow\"\u003ehttps://developers.home-assistant.io/docs/creating_component_index\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003e\u003ch2 tabindex=\"-1\" dir=\"auto\"\u003eDirectory Structure\u003c/h2\u003e\u003ca id=\"user-content-directory-structure\" aria-label=\"Permalink: Directory Structure\" href=\"#directory-structure\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003emiot: core code.\u003c/li\u003e\n\u003cli\u003emiot/miot_client: Adding a login user in the integration needs adding a miot_client instance.\u003c/li\u003e\n\u003cli\u003emiot/miot_cloud: Contains functions related to the cloud service, including OAuth login process, HTTP interface functions (to get the user information, to send the device control command, etc.)\u003c/li\u003e\n\u003cli\u003emiot/miot_device: Device entity, including device information, processing logic of property, event and action.\u003c/li\u003e\n\u003cli\u003emiot/miot_mips: Message bus for subscribing and publishing method.\u003c/li\u003e\n\u003cli\u003emiot/miot_spec: Parse MIoT-Spec-V2.\u003c/li\u003e\n\u003cli\u003emiot/miot_lan: Device LAN control, including device discovery, device control, etc.\u003c/li\u003e\n\u003cli\u003emiot/miot_mdns: Central hub gateway service LAN discovery.\u003c/li\u003e\n\u003cli\u003emiot/miot_network: Obtain network status and network information.\u003c/li\u003e\n\u003cli\u003emiot/miot_storage: File storage for the integration.\u003c/li\u003e\n\u003cli\u003emiot/test: Test scripts.\u003c/li\u003e\n\u003cli\u003econfig_flow: Config flow.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/article\u003e\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "22 min read",
  "publishedTime": null,
  "modifiedTime": null
}
