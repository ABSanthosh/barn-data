{
  "id": "de0769ea-4169-4df2-8e7c-97e2ae525396",
  "title": "Provisional Authorization of User Notificatons",
  "link": "https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/",
  "description": "Requesting provisional authorization to send local user notifications comes with some caveats but avoids interrupting the user with another permissions prompt. Explicit Authorization Before sending user notifications you need permission from the user. For example, to request the ability to show alerts and set an App’s badge icon: let options: UNAuthorizationOptions = [.alert, .badge] let center = UNUserNotificationCenter.current() center.requestAuthorization(options: options) { (granted, error) in if granted { // success } else { // failure } } Note: I’m showing the completion handler versions of the API but there are also async versions. The first time you request authorization the user sees the familiar system prompt: Apple suggests you request authorization in a context where the user will understand why they are being prompted. In practise, this often happens quickly after first launch which is not the best user experience. Provisional Authorization Provisional authorization is not new. Apple added it back in iOS 12. That’s so long ago that I forgot it existed. It comes with some caveats but it does provide an alternative to interrupting your users with permission prompts. To request provisional authorization add .provisional to the options: let options: UNAuthorizationOptions = [.alert, .badge, .provisional] When you ask for provisional authorization the system doesn’t interrupt the user with a prompt. The notifications you send are delivered quietly. They appear in the notification center with buttons that allow the user to keep the notifications or turn them off completely: The keep button gives the user the choice between delivering immediately, quietly to the notification center, or if they have it enabled a scheduled summary. At this point, if you check the permissions for the app in the system settings you’ll see that it only has permission to deliver notifications quietly: In the detailed notification settings, alerts are restricted to the notification centre and, even though we requested it, we do not have permission to badge the app icon: You don’t get full permission to show alerts or badge the app icon unless the user changes their notifications settings. I suspect for most apps that’s a fair compromise. Checking for Permission One extra note, if you’re checking the authorization status before sending a notification make sure you take the provisional status into account: let center = UNUserNotificationCenter.current() center.getNotificationSettings { settings in if (settings.authorizationStatus == .authorized) || (settings.authorizationStatus == .provisional) { // permission granted } } Do you use provisional authorization for your app’s notifications or always prompt for explicit permission? See Also Apple Article: Asking permission to use notifications Local Notifications with iOS 10 Provisional Authorization of User Notificatons was originally posted 10 Feb 2025 on useyourloaf.com. Want this direct to your inbox? Sign up and get my free WWDC viewing guide PDF.",
  "author": "",
  "published": "Mon, 10 Feb 2025 10:47:19 +0000",
  "source": "https://useyourloaf.com/blog/rss.xml",
  "categories": null,
  "byline": "Explicit Authorization",
  "length": 2866,
  "excerpt": "Requesting provisional authorization to send local user notifications.",
  "siteName": "Use Your Loaf - iOS Development News \u0026 Tips",
  "favicon": "https://useyourloaf.com/apple-touch-icon.png",
  "text": "Requesting provisional authorization to send local user notifications comes with some caveats but avoids interrupting the user with another permissions prompt. Before sending user notifications you need permission from the user. For example, to request the ability to show alerts and set an App’s badge icon: let options: UNAuthorizationOptions = [.alert, .badge] let center = UNUserNotificationCenter.current() center.requestAuthorization(options: options) { (granted, error) in if granted { // success } else { // failure } } Note: I’m showing the completion handler versions of the API but there are also async versions. The first time you request authorization the user sees the familiar system prompt: Apple suggests you request authorization in a context where the user will understand why they are being prompted. In practise, this often happens quickly after first launch which is not the best user experience. Provisional Authorization Provisional authorization is not new. Apple added it back in iOS 12. That’s so long ago that I forgot it existed. It comes with some caveats but it does provide an alternative to interrupting your users with permission prompts. To request provisional authorization add .provisional to the options: let options: UNAuthorizationOptions = [.alert, .badge, .provisional] When you ask for provisional authorization the system doesn’t interrupt the user with a prompt. The notifications you send are delivered quietly. They appear in the notification center with buttons that allow the user to keep the notifications or turn them off completely: The keep button gives the user the choice between delivering immediately, quietly to the notification center, or if they have it enabled a scheduled summary. At this point, if you check the permissions for the app in the system settings you’ll see that it only has permission to deliver notifications quietly: In the detailed notification settings, alerts are restricted to the notification centre and, even though we requested it, we do not have permission to badge the app icon: You don’t get full permission to show alerts or badge the app icon unless the user changes their notifications settings. I suspect for most apps that’s a fair compromise. Checking for Permission One extra note, if you’re checking the authorization status before sending a notification make sure you take the provisional status into account: let center = UNUserNotificationCenter.current() center.getNotificationSettings { settings in if (settings.authorizationStatus == .authorized) || (settings.authorizationStatus == .provisional) { // permission granted } } Do you use provisional authorization for your app’s notifications or always prompt for explicit permission? See Also Apple Article: Asking permission to use notifications Local Notifications with iOS 10",
  "image": "https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/cover.png",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv\u003e\n\u003cp\u003eRequesting provisional authorization to send local user notifications comes with some caveats but avoids interrupting the user with another permissions prompt.\u003c/p\u003e\n\n\u003cp\u003eBefore sending user notifications you need \u003cstrong\u003epermission\u003c/strong\u003e from the user. For example, to request the ability to show alerts and set an App’s badge icon:\u003c/p\u003e\n\u003cdiv\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode data-lang=\"swift\"\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003elet\u003c/span\u003e \u003cspan\u003eoptions\u003c/span\u003e\u003cspan\u003e:\u003c/span\u003e \u003cspan\u003eUNAuthorizationOptions\u003c/span\u003e \u003cspan\u003e=\u003c/span\u003e \u003cspan\u003e[.\u003c/span\u003e\u003cspan\u003ealert\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003e.\u003c/span\u003e\u003cspan\u003ebadge\u003c/span\u003e\u003cspan\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003elet\u003c/span\u003e \u003cspan\u003ecenter\u003c/span\u003e \u003cspan\u003e=\u003c/span\u003e \u003cspan\u003eUNUserNotificationCenter\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003ecurrent\u003c/span\u003e\u003cspan\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003ecenter\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003erequestAuthorization\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003eoptions\u003c/span\u003e\u003cspan\u003e:\u003c/span\u003e \u003cspan\u003eoptions\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e \u003cspan\u003e{\u003c/span\u003e \u003cspan\u003e(\u003c/span\u003e\u003cspan\u003egranted\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003eerror\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e \u003cspan\u003ein\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e  \u003cspan\u003eif\u003c/span\u003e \u003cspan\u003egranted\u003c/span\u003e \u003cspan\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e    \u003cspan\u003e// success\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e  \u003cspan\u003e}\u003c/span\u003e \u003cspan\u003eelse\u003c/span\u003e \u003cspan\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e    \u003cspan\u003e// failure\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e  \u003cspan\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eNote: I’m showing the completion handler versions of the API but there are also async versions.\u003c/p\u003e\n\u003cp\u003eThe first time you request authorization the user sees the familiar system prompt:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/001.png\" alt=\"System alert - Remind me would like to send you notifications. Don’t Allow and Allow buttons.\" width=\"405\" height=\"267\" srcset=\"https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/001@2x.png 2x\"/\u003e\u003c/p\u003e\n\u003cp\u003eApple suggests you request authorization in a context where the user will understand why they are being prompted. In practise, this often happens quickly after first launch which is not the best user experience.\u003c/p\u003e\n\u003ch3 id=\"provisional-authorization\"\u003eProvisional Authorization\u003c/h3\u003e\n\u003cp\u003eProvisional authorization is not new. Apple added it back in iOS 12. That’s so long ago that I forgot it existed. It comes with some caveats but it does provide an alternative to interrupting your users with permission prompts.\u003c/p\u003e\n\u003cp\u003eTo request provisional authorization add \u003ccode\u003e.provisional\u003c/code\u003e to the options:\u003c/p\u003e\n\u003cdiv\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode data-lang=\"swift\"\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003elet\u003c/span\u003e \u003cspan\u003eoptions\u003c/span\u003e\u003cspan\u003e:\u003c/span\u003e \u003cspan\u003eUNAuthorizationOptions\u003c/span\u003e \u003cspan\u003e=\u003c/span\u003e \u003cspan\u003e[.\u003c/span\u003e\u003cspan\u003ealert\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003e.\u003c/span\u003e\u003cspan\u003ebadge\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eprovisional\u003c/span\u003e\u003cspan\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cstrong\u003eWhen you ask for provisional authorization the system doesn’t interrupt the user with a prompt\u003c/strong\u003e. The notifications you send are \u003cstrong\u003edelivered quietly\u003c/strong\u003e. They appear in the notification center with buttons that allow the user to keep the notifications or turn them off completely:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/002.png\" alt=\"Notification centre showing notification with buttons for keep and turn off\" width=\"603\" height=\"340\" srcset=\"https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/002@2x.png 2x\"/\u003e\u003c/p\u003e\n\u003cp\u003eThe keep button gives the user the choice between delivering immediately, quietly to the notification center, or if they have it enabled a scheduled summary.\u003c/p\u003e\n\u003cp\u003eAt this point, if you check the permissions for the app in the system settings you’ll see that it only has permission to deliver notifications quietly:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/003.png\" alt=\"notifications deliver quietly\" width=\"555\" height=\"270\" srcset=\"https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/003@2x.png 2x\"/\u003e\u003c/p\u003e\n\u003cp\u003eIn the detailed notification settings, alerts are restricted to the notification centre and, even though we requested it, we do not have permission to badge the app icon:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/004.png\" alt=\"Allow notifications to the notification centre. Do not allow badges\" width=\"568\" height=\"502\" srcset=\"https://useyourloaf.com/blog/provisional-authorization-of-user-notificatons/004@2x.png 2x\"/\u003e\u003c/p\u003e\n\u003cp\u003eYou don’t get full permission to show alerts or badge the app icon unless the user changes their notifications settings. I suspect for most apps that’s a fair compromise.\u003c/p\u003e\n\u003ch3 id=\"checking-for-permission\"\u003eChecking for Permission\u003c/h3\u003e\n\u003cp\u003eOne extra note, if you’re checking the authorization status before sending a notification make sure you take the provisional status into account:\u003c/p\u003e\n\u003cdiv\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode data-lang=\"swift\"\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003elet\u003c/span\u003e \u003cspan\u003ecenter\u003c/span\u003e \u003cspan\u003e=\u003c/span\u003e \u003cspan\u003eUNUserNotificationCenter\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003ecurrent\u003c/span\u003e\u003cspan\u003e()\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003ecenter\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003egetNotificationSettings\u003c/span\u003e \u003cspan\u003e{\u003c/span\u003e \u003cspan\u003esettings\u003c/span\u003e \u003cspan\u003ein\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e  \u003cspan\u003eif\u003c/span\u003e \u003cspan\u003e(\u003c/span\u003e\u003cspan\u003esettings\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eauthorizationStatus\u003c/span\u003e \u003cspan\u003e==\u003c/span\u003e \u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eauthorized\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e      \u003cspan\u003e||\u003c/span\u003e \u003cspan\u003e(\u003c/span\u003e\u003cspan\u003esettings\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eauthorizationStatus\u003c/span\u003e \u003cspan\u003e==\u003c/span\u003e \u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eprovisional\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e  \u003cspan\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e    \u003cspan\u003e// permission granted\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e  \u003cspan\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eDo you use provisional authorization for your app’s notifications or always prompt for explicit permission?\u003c/p\u003e\n\u003ch3 id=\"see-also\"\u003eSee Also\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.apple.com/documentation/usernotifications/asking-permission-to-use-notifications\"\u003eApple Article: Asking permission to use notifications\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://useyourloaf.com/blog/local-notifications-with-ios-10/\"\u003eLocal Notifications with iOS 10\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "4 min read",
  "publishedTime": "2025-02-10T10:47:19Z",
  "modifiedTime": "2025-02-10T19:23:02Z"
}
