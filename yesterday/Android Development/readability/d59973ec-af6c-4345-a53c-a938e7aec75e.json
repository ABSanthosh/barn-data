{
  "id": "d59973ec-af6c-4345-a53c-a938e7aec75e",
  "title": "Reddit improved app startup speed by over 50% using Baseline Profiles and R8",
  "link": "http://android-developers.googleblog.com/2024/12/reddit-improved-app-startup-speed-using-baseline-profiles-r8.html",
  "description": "",
  "author": "Android Developers",
  "published": "2024-12-12T14:00:00.000-08:00",
  "source": "http://feeds.feedburner.com/blogspot/hsDu",
  "categories": [
    "Android",
    "app performance",
    "Baseline Profiles",
    "case study",
    "Jetpack Compose",
    "Mobile Development",
    "Optimization",
    "Startup Speed",
    "user experience"
  ],
  "byline": "",
  "length": 7574,
  "excerpt": "Reddit implemented Baseline Profiles, R8 full mode, and Jetpack Compose, seeing faster startup times, smoother scrolling, and improved user experience",
  "siteName": "Android Developers Blog",
  "favicon": "",
  "text": "Posted by Ben Weiss – Developer Relations Engineer, and Lauren Darcey – Senior Engineering Manager, Reddit Reddit is one of the world’s largest internet forums, bringing together countless communities looking for entertainment, answers to everyday questions, and so much more. Recently, the team optimized its Android app to reduce startup speed and improve rendering performance using Baseline Profiles. But the team didn’t stop there. Reddit app developers also enabled Android’s R8 compiler in full mode to maximize bytecode optimization and used Jetpack Compose to rewrite legacy UI, improving both the user and developer experience. Maximizing optimization using Baseline Profiles and R8 full mode The Reddit Android app has undergone countless performance upgrades over the years. Reddit developers have long since cleared the list of quick and easy tasks for optimization, but the team still wants to improve the app, bringing its performance to the next level and ensuring it runs well on every Android device. “Reddit is looking for any strategic improvement to its app performance so we can make the app experience better for new and existing users,” said Rob McWhinnie, a staff engineer at Reddit. “Baseline Profiles fit this use case well since they are based on critical user journeys.” Reddit’s platform engineering team used screen-specific performance metrics and observability to help its feature teams improve key metrics like time to interactive and scroll performance. Baseline Profiles were a natural fit to help improve these metrics and the user experience behind them, so the team integrated them to make tracking and optimizing easier, using insights from geodata and device classes. The team built Baseline Profiles for five critical user journeys so far, like scrolling the home feed, logging in, launching the full-screen video player, navigating between subreddits and scrolling their feeds, and using the chat feature. Simplifying Baseline Profile management in their continuous integration processes, enabled Reddit to remove the need for manual maintenance and streamlining optimization. Now, Baseline Profiles are automatically regenerated for each release. Enabling Android’s R8 optimization compiler in full mode was another area Reddit engineers worked on. The team had already used R8 in compatibility mode, but some of Reddit’s legacy code would’ve made implementing R8’s more aggressive features difficult. The team worked through the app’s existing technical debt first, making it easier to integrate R8's full mode capabilities and maximize Android app optimization. Improvements with Baseline Profiles and R8 full mode Reddit's Baseline Profiles and R8 full mode optimization led to multiple performance improvements across the app, with early benchmarks of the first Baseline Profile for feeds showing a 51% median startup time improvement. While responses from Redditors initially confirmed large startup improvements, Baseline Profile optimizations for less frequent journeys, like logging in, saw fewer user reports. Baseline Profiles for the home feed had a 36% reduction in frozen frames' 95th percentile. Baseline Profiles for the community feed also delivered strong screen load and scroll performance improvements. At the 90th percentile, screen Time To Interactive improved by 12% and time to first draw decreased by 22%. Reddit’s scrolling performance also saw a 12% reduction in P90 slow frames. The upgrade to R8 full mode led to an increase in Google Play average ratings. The proportion of global positive ratings (fours and fives) increased by four percent, with a notable decrease in negative reports. R8 full mode also reduced total application-not-responding errors by almost 30%. Overall, the app saw cold start improvements of 20%, scroll performance improvements of 15%, and widespread enhancements in lower-end devices and emerging markets. Google Play vitals saw improvements in slow cold starts, a 10% reduction in excessive frozen frames, and a 30% reduction in excessive slow frames. Nearly 75% of screens, refactored using Jetpack Compose, experienced performance gains. Further optimizations using Jetpack Compose Reddit adopted Jetpack Compose years ago and has since rebuilt much of its UI with the toolkit, benefitting both the app and its design system. According to the Reddit team, Google’s ongoing support for Compose’s stability and performance made it a strong fit as Reddit scaled its app, allowing for more efficient feature development and better performance. One major example is Reddit’s feed rewrite using Compose, which resulted in more maintainable code and an improved developer experience. Compose enabled teams to focus on future work instead of being bogged down by legacy code, allowing them to fix bugs quickly and improve overall app stability. “The R8 and Compose upgrades were important to deploy in relative isolation and stabilize,” said Drew Heavner, a staff engineer at Reddit. “We feel like we got great outcomes from this work for all teams adopting our modern tech stack and Compose.” After upgrading to the September 2024 release of Compose, the latest iteration, Reddit saw significant performance gains across the board. Cold start times improved by 13%, excessive slow frames decreased by 25%, and frozen frames dropped by 10%. Low- and mid-tier devices saw even greater improvements where app start times improved by up to 40%, especially in markets with lower-performing devices. Screens using Reddit’s modern Compose-powered design stack showed substantial improvements in both slow and frozen frame rates. For example, the home feed saw a 23% reduction in frozen frames, and scrolling performance visibly improved according to internal reviews. These updates were well received among users and reflected a 17% increase in the app’s Google Play average rating. Up-leveling UX through optimization Adding value to an app isn’t just about introducing new features—it's about refining and optimizing the ones users already love. Investing in performance improvements made Reddit’s key features faster and more reliable, enhancing the overall user experience. These optimizations not only improved app startup and runtime performance but also simplified development workflows, increasing both developer satisfaction and app stability. The focus on high-traffic features, such as feeds, has demonstrated the power of performance tuning, with substantial gains in user engagement and satisfaction. As the app has become more efficient, both users and developers have benefitted from a cleaner codebase and faster performance. Looking ahead, Reddit plans to extend the usage of Baseline Profiles to other critical user journeys, including Reddit’s post and comment experiences, ensuring even more users benefit from these ongoing performance improvements. Reddit’s platform engineers also want to continue collaborating with feature teams to integrate performance improvements across the app. These efforts will ensure that as the app evolves, it remains a smooth, fast, and engaging experience for all Redditors. “Adding new features isn’t the only way to add value to an experience for users,” said Lauren Darcey, a senior engineering manager at Reddit. “When you find a feature that users love and engage with, taking the time to refine and optimize it can be the difference between a good and a great experience for your users.” Get started Improve your app performance using Baseline Profiles, R8 full mode, and Jetpack Compose.",
  "image": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiebmCHV09MYh7RuEDKNF8AdnxV8TvB615z810WeQ-2kwbknGvowSf4xYq82CuRc1khTcMvpS_3jivuIbvQTP5BLj8ydN5MxUdyChgVxPEFrn8Xql7NwvfBNuVjzg3locOFqLVZmHOopu45N01xyl_6b5oPe9byqZ5QzvKyIIxEVLxwZJVHZWV980v3nRE/w1200-h630-p-k-no-nu/image6.png",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv\u003e\n\u003cmeta name=\"twitter:image\" content=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiebmCHV09MYh7RuEDKNF8AdnxV8TvB615z810WeQ-2kwbknGvowSf4xYq82CuRc1khTcMvpS_3jivuIbvQTP5BLj8ydN5MxUdyChgVxPEFrn8Xql7NwvfBNuVjzg3locOFqLVZmHOopu45N01xyl_6b5oPe9byqZ5QzvKyIIxEVLxwZJVHZWV980v3nRE/s1600/image6.png\"/\u003e\n\u003cp\u003e\n\n\u003cem\u003ePosted by Ben Weiss – Developer Relations Engineer, and Lauren Darcey – Senior Engineering Manager, Reddit\u003c/em\u003e\n\n\u003ca href=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiebmCHV09MYh7RuEDKNF8AdnxV8TvB615z810WeQ-2kwbknGvowSf4xYq82CuRc1khTcMvpS_3jivuIbvQTP5BLj8ydN5MxUdyChgVxPEFrn8Xql7NwvfBNuVjzg3locOFqLVZmHOopu45N01xyl_6b5oPe9byqZ5QzvKyIIxEVLxwZJVHZWV980v3nRE/s1600/image6.png\" imageanchor=\"1\"\u003e\u003cimg data-original-height=\"800\" data-original-width=\"100%\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiebmCHV09MYh7RuEDKNF8AdnxV8TvB615z810WeQ-2kwbknGvowSf4xYq82CuRc1khTcMvpS_3jivuIbvQTP5BLj8ydN5MxUdyChgVxPEFrn8Xql7NwvfBNuVjzg3locOFqLVZmHOopu45N01xyl_6b5oPe9byqZ5QzvKyIIxEVLxwZJVHZWV980v3nRE/s1600/image6.png\"/\u003e\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://play.google.com/store/apps/details?id=com.reddit.frontpage\u0026amp;hl=en_US\" target=\"_blank\"\u003eReddit\u003c/a\u003e is one of the world’s largest internet forums, bringing together countless communities looking for entertainment, answers to everyday questions, and so much more.\u003c/p\u003e\n\n\u003cp\u003eRecently, the team optimized its Android app to reduce startup speed and improve rendering performance using \u003ca href=\"https://developer.android.com/topic/performance/baselineprofiles/overview\" target=\"_blank\"\u003eBaseline Profiles\u003c/a\u003e. But the team didn’t stop there. Reddit app developers also enabled Android’s \u003ca href=\"https://developer.android.com/build/shrink-code\" target=\"_blank\"\u003eR8\u003c/a\u003e compiler in full mode to maximize bytecode optimization and used \u003ca href=\"https://developer.android.com/compose\" target=\"_blank\"\u003eJetpack Compose\u003c/a\u003e to rewrite legacy UI, improving both the user and developer experience.\u003c/p\u003e\n\n\u003ch3\u003eMaximizing optimization using Baseline Profiles and R8 full mode\u003c/h3\u003e\n\n\u003cp\u003eThe Reddit Android app has undergone countless performance upgrades over the years. Reddit developers have long since cleared the list of quick and easy tasks for optimization, but the team still wants to improve the app, bringing its performance to the next level and ensuring it runs well on every Android device.\u003c/p\u003e\n\n\u003cp\u003e“Reddit is looking for any strategic improvement to its app performance so we can make the app experience better for new and existing users,” said Rob McWhinnie, a staff engineer at Reddit. “Baseline Profiles fit this use case well since they are based on critical user journeys.”\u003c/p\u003e\n\n\u003cp\u003eReddit’s platform engineering team used screen-specific performance metrics and observability to help its feature teams improve key metrics like time to interactive and scroll performance. Baseline Profiles were a natural fit to help improve these metrics and the user experience behind them, so the team integrated them to make tracking and optimizing easier, using insights from geodata and device classes.\u003c/p\u003e\n\n\u003cp\u003eThe team built Baseline Profiles for five critical user journeys so far, like scrolling the home feed, logging in, launching the full-screen video player, navigating between subreddits and scrolling their feeds, and using the chat feature.\u003c/p\u003e\n\n\u003cp\u003eSimplifying Baseline Profile management in their continuous integration processes, enabled Reddit to remove the need for manual maintenance and streamlining optimization. Now, Baseline Profiles are automatically regenerated for each release.\u003c/p\u003e\n\n\u003cp\u003eEnabling Android’s R8 optimization compiler in full mode was another area Reddit engineers worked on. The team had already used R8 in compatibility mode, but some of Reddit’s legacy code would’ve made implementing R8’s more aggressive features difficult. The team worked through the app’s existing technical debt first, making it easier to integrate R8\u0026#39;s full mode capabilities and maximize Android app optimization.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg alt=\"Quote card with image of Catherine Chi, Senior Engineer at Reddit that reads: \u0026#39;It’s now trivial to work with a team to instrument Baseline Profiles for their critical user journeys. We turn them around in a couple of hours and see results in production a week later.\" id=\"imgCaption\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgfHcj57QRX3inY74cEoBBkYLlF7UBx2RXj7fE0k1x3NNFHNX-m3yTUdYdlu6YORJ0FA4DaQw0A3i0iGWHjWeU-JP822F7tnA1Ncq1EyQPweYgMSThCdwZ_LjsdDBtNxdjhAYk7h4DhrOf2rhAk7mJAmvQEEAJRcDbRgHUcsM6g1lkeQiQdSTOP0siE0VA/s1600/image5.png\" width=\"100%\"/\u003e\u003c/p\u003e\u003cbr/\u003e\n\n\u003ch3\u003eImprovements with Baseline Profiles and R8 full mode\u003c/h3\u003e\n\n\u003cp\u003eReddit\u0026#39;s Baseline Profiles and R8 full mode optimization led to multiple performance improvements across the app, with \u003cb\u003eearly benchmarks of the first Baseline Profile for feeds showing a 51% median startup time improvement\u003c/b\u003e. While responses from Redditors initially confirmed large startup improvements, Baseline Profile optimizations for less frequent journeys, like logging in, saw fewer user reports.\u003c/p\u003e\n  \n\u003cp\u003eBaseline Profiles for the home feed had a 36% reduction in frozen frames\u0026#39; 95th percentile. Baseline Profiles for the community feed also delivered strong screen load and scroll performance improvements. At the 90th percentile, screen \u003ca href=\"https://developer.android.com/topic/performance/vitals/launch-time#time-full\" target=\"_blank\"\u003eTime To Interactive\u003c/a\u003e improved by 12% and time to first draw decreased by 22%. Reddit’s scrolling performance also saw a 12% reduction in P90 slow frames.\u003c/p\u003e\n\n\u003cp\u003eThe upgrade to R8 full mode led to an increase in Google Play average ratings. \u003cb\u003eThe proportion of global positive ratings (fours and fives) increased by four percent\u003c/b\u003e, with a notable decrease in negative reports. R8 full mode also reduced total \u003ca href=\"https://developer.android.com/topic/performance/anrs/diagnose-and-fix-anrs\" target=\"_blank\"\u003eapplication-not-responding\u003c/a\u003e errors by almost 30%.\u003c/p\u003e\n\n\u003cp\u003eOverall, the app saw cold start improvements of 20%, scroll performance improvements of 15%, and widespread enhancements in lower-end devices and emerging markets. Google Play vitals saw improvements in slow cold starts, a 10% reduction in excessive frozen frames, and a 30% reduction in excessive slow frames. \u003cb\u003eNearly 75% of screens, refactored using Jetpack Compose, experienced performance gains\u003c/b\u003e.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg alt=\"Quote card with image of Lauren Darcey, Senior Engineering Manager at Reddit that reads: \u0026#39;When you find a feature that users love and engage with, taking the time to refine and optimize it can be the difference between a good and a great experience for your users.\" id=\"imgCaption\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEikeB2pRK8FBc_Dzl8JZDZ5sWDYMGe1EdJhG-jR6GqQaLFFH6Nwh_QAIw8N4xtf8vdHKJhbsUpdl7KrFIX7cPc5eUY-UPxqxurtQG3b01xJ8d3aQZYFdV33IVayOj0dJmwt3OOFo9AoW88TFRCjCp57eymYBMYta1HcqTYmrxyzaqUHF8cGCM7MD0EXkrU/s1600/image4.png\" width=\"100%\"/\u003e\u003c/p\u003e\u003cbr/\u003e\n\n\u003ch3\u003eFurther optimizations using Jetpack Compose\u003c/h3\u003e\n\n\u003cp\u003eReddit adopted Jetpack Compose years ago and has since rebuilt much of its UI with the toolkit, benefitting both the app and its design system. According to the Reddit team, Google’s ongoing support for Compose’s stability and performance made it a strong fit as Reddit scaled its app, allowing for more efficient feature development and better performance.\u003c/p\u003e\n\n\u003cp\u003eOne major example is Reddit’s feed rewrite using Compose, which resulted in more maintainable code and an improved developer experience. Compose enabled teams to focus on future work instead of being bogged down by legacy code, allowing them to fix bugs quickly and improve overall app stability.\u003c/p\u003e\n\n\u003cp\u003e“The R8 and Compose upgrades were important to deploy in relative isolation and stabilize,” said Drew Heavner, a staff engineer at Reddit. “We feel like we got great outcomes from this work for all teams adopting our modern tech stack and Compose.”\u003c/p\u003e\n\n\u003cp\u003eAfter upgrading to the September 2024 release of Compose, the latest iteration, Reddit saw significant performance gains across the board. Cold start times improved by 13%, excessive slow frames decreased by 25%, and frozen frames dropped by 10%. \u003cb\u003eLow- and mid-tier devices saw even greater improvements where app start times improved by up to 40%\u003c/b\u003e, especially in markets with lower-performing devices.\u003c/p\u003e\n\n\u003cp\u003eScreens using Reddit’s modern Compose-powered design stack showed substantial improvements in both slow and frozen frame rates. For example, the home feed saw a 23% reduction in frozen frames, and scrolling performance visibly improved according to internal reviews. These updates were well received among users and reflected a \u003cb\u003e17% increase in the app’s Google Play average rating\u003c/b\u003e.\u003c/p\u003e\n\n\u003cp\u003e\u003cimg alt=\"Quote card with image of the Android Bot peeking in from the right side that reads: Compose continues to deliver great new features for a more responsive user experience. It also provides stability and performance improvements we get to take advantage of.” — Eric Kuck, a Principal Engineer at Reddit\" id=\"imgCaption\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgK5qOHBFfIMskMdX9CxEzgYr56nqMheLYhFAfo-2d65AKepjXiE80Mf4J9Y0ft56i-xio2NiLbxd_lDIKUeY_qHr0pNFH9mqvyr323qXIiVi3Ix4kQIzWdzt6XCaorpHx6gkUt9nkX9QWFHTQsnzjcnx268ciQCyuORtJiJSqEAF1_eRdngSYaCXid02Q/s1600/image2.png\" width=\"100%\"/\u003e\u003c/p\u003e\u003cbr/\u003e\n\n\n\u003ch3\u003eUp-leveling UX through optimization\u003c/h3\u003e\n\n\u003cp\u003eAdding value to an app isn’t just about introducing new features—it\u0026#39;s about refining and optimizing the ones users already love. Investing in performance improvements made Reddit’s key features faster and more reliable, enhancing the overall user experience. These optimizations not only improved app startup and runtime performance but also simplified development workflows, increasing both developer satisfaction and app stability.\u003c/p\u003e\n\n\u003cp\u003eThe focus on high-traffic features, such as feeds, has demonstrated the power of performance tuning, with substantial gains in user engagement and satisfaction. As the app has become more efficient, both users and developers have benefitted from a cleaner codebase and faster performance.\u003c/p\u003e\n\n\u003cp\u003eLooking ahead, Reddit plans to extend the usage of Baseline Profiles to other critical user journeys, including Reddit’s post and comment experiences, ensuring even more users benefit from these ongoing performance improvements.\u003c/p\u003e\n\n\u003cp\u003eReddit’s platform engineers also want to continue collaborating with feature teams to integrate performance improvements across the app. These efforts will ensure that as the app evolves, it remains a smooth, fast, and engaging experience for all Redditors.\u003c/p\u003e\n\n\u003cp\u003e“Adding new features isn’t the only way to add value to an experience for users,” said Lauren Darcey, a senior engineering manager at Reddit. “When you find a feature that users love and engage with, taking the time to refine and optimize it can be the difference between a good and a great experience for your users.”\u003c/p\u003e\n\n\u003ch3\u003eGet started\u003c/h3\u003e\n\n\u003cp\u003eImprove your app performance using \u003ca href=\"https://developer.android.com/topic/performance/baselineprofiles/overview\" target=\"_blank\"\u003eBaseline Profiles\u003c/a\u003e, \u003ca href=\"https://developer.android.com/build/shrink-code\" target=\"_blank\"\u003eR8 full mode\u003c/a\u003e, and \u003ca href=\"https://developer.android.com/jetpack/compose\" target=\"_blank\"\u003eJetpack Compose\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "8 min read",
  "publishedTime": null,
  "modifiedTime": null
}
