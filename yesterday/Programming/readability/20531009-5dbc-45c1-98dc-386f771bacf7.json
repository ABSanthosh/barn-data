{
  "id": "20531009-5dbc-45c1-98dc-386f771bacf7",
  "title": "Scaling Uber’s Batch Data Platform: A Journey to the Cloud with Data Mesh Principles",
  "link": "https://www.infoq.com/news/2024/10/uber-batch-data-mesh/?utm_campaign=infoq_content\u0026utm_source=infoq\u0026utm_medium=feed\u0026utm_term=global",
  "description": "Some months ago, Uber started the migration to the cloud, on Google Cloud Platform (GCP), of its batch data analytics and machine learning platform. In a recent post on its engineering blog, Uber provided additional information regarding its batch data cloud migration that incorporated crucial data mesh principles. By Claudio Masolo",
  "author": "Claudio Masolo",
  "published": "Sat, 12 Oct 2024 08:00:00 GMT",
  "source": "https://feed.infoq.com",
  "categories": [
    "Batch Processing",
    "Google Cloud Platform",
    "Apache Spark",
    "Data Mesh",
    "DevOps",
    "news"
  ],
  "byline": "Claudio Masolo",
  "length": 5275,
  "excerpt": "Some months ago, Uber started the migration to the cloud, on Google Cloud Platform (GCP), of its batch data analytics and machine learning platform. In a recent post on its engineering blog, Uber prov",
  "siteName": "InfoQ",
  "favicon": "https://cdn.infoq.com/statics_s1_20241001113528/apple-touch-icon.png",
  "text": "Some months ago, Uber started the migration to the cloud, on Google Cloud Platform (GCP), of its batch data analytics and machine learning platform. In a recent post on its engineering blog, Uber provided additional information regarding its batch data cloud migration that incorporated crucial data mesh principles. Uber’s batch data platform is a crucial element of its data infrastructure, supporting over 10,000 internal users, including data scientists, engineers, city operations staff, and business analysts. This system manages approximately 1.5 exabytes of data stored in Apache Hadoop Distributed File System (HDFS) across two on-premises regions, handling over 500,000 Presto queries and 370,000 Apache Spark applications daily. To enhance scalability and streamline operations, Uber is migrating its batch data platform to Google Cloud GCP. The transition leverages Google Cloud Storage (GCS) for Uber’s data lake while moving the rest of the infrastructure to cloud-based Infrastructure as a Service (IaaS). The cloud migration is not without its challenges, particularly related to the storage and Identity and Access Management (IAM) limits imposed by cloud providers. One of Uber’s primary considerations is to efficiently map HDFS files to GCS buckets without overwhelming or underutilizing the available resources. Additionally, Uber must apply access controls appropriately within the storage hierarchy, ensuring the system remains secure without unnecessarily elevating user privileges. This migration also presents an opportunity to enhance the system by consolidating security groups and decentralizing data ownership. Under the new model, data belonging to specific organizations is stored in organization-specific buckets, allowing data ownership and access control to be more clearly delineated. Security and governance have been central concerns throughout the migration. The goal is to map data based on its intended usage and lifecycle, categorizing it to ensure appropriate access controls are applied. Critical datasets that are used widely within the organization are stored in dedicated buckets with open access, while less critical data is stored separately with restricted access and lifecycle management policies. Additionally, the migration enables automated infrastructure setup, facilitating quicker provisioning of testing, staging, and production environments. This automation helps speed up new data analytics use cases and ensures multiple regions are ready for disaster recovery scenarios. To facilitate this massive shift, Uber developed a service called DataMesh, which is designed to abstract and manage the cloud infrastructure. DataMesh organizes data resources around the principles of data mesh, focusing on decentralized data ownership and domain-specific control. This service automates the reconciliation of data with cloud resources, pulling information from Uber’s internal repositories to ensure that data is correctly labeled, secured, and monitored. The DataMesh platform also manages the mapping of HDFS paths to their corresponding cloud-based paths, making the migration as seamless as possible for users and preventing disruption to existing workflows. A logical view of the DataMesh components and the hierarchy. One significant challenge that Uber has faced during the migration process is the need to accommodate changes in data ownership and the limits set by GCS. Data ownership changes can occur due to team reorganizations or users reassigning assets. To address this, Uber implemented an automated process to monitor and reassign ownership when necessary, ensuring data remains securely stored and managed. Additionally, Uber optimized its data distribution to avoid hitting GCS storage limits, ensuring that heavily used tables are separated into their buckets to improve performance and make monitoring easier. Other examples of data mesh implementation in the real word are: Gilead Sciences: a biopharmaceutical company, that developed a data mesh architecture. The implementation aimed to create a new organizational and operational model backed by data, enabling Gilead to engage in a cloud transformation initiative. The data mesh approach allowed Gilead to manage data as a product and adopt a cloud-first architecture. Saxo Bank: a financial services company, that implemented data mesh into a project aimed to decentralize data ownership and governance, enabling domain teams to manage their data products and provide real-time insights to the business. Looking to the future, Uber aims to further expand on its use of data mesh principles by building a platform that allows for self-governed data domains. This will simplify infrastructure management and enhance data governance, ultimately creating a more agile, secure, and cost-efficient data ecosystem. The cloud migration of Uber’s batch data platform is a significant undertaking, but through careful planning and the development of innovative tools like DataMesh, Uber is positioning itself for greater scalability, security, and operational efficiency in the cloud. About the Author Claudio Masolo",
  "image": "https://res.infoq.com/news/2024/10/uber-batch-data-mesh/en/headerimage/generatedHeaderImage-1728637784486.jpg",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv\u003e\n\t\t\t\t\t\t\t\t\u003cp\u003eSome months ago, Uber \u003ca href=\"https://www.infoq.com/news/2024/06/uber-bigdata-migration-gcp/\"\u003estarted\u003c/a\u003e the migration to the cloud, on Google Cloud Platform (GCP), of its batch data analytics and machine learning platform. In a recent \u003ca href=\"https://www.uber.com/en-IT/blog/datamesh/\"\u003epost\u003c/a\u003e on its engineering blog, Uber provided additional information regarding its batch data cloud migration that incorporated crucial \u003ca href=\"https://martinfowler.com/articles/data-mesh-principles.html?uclick_id=4e53a7d6-a56e-4257-a619-e0624d75e062\"\u003edata mesh principles\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eUber’s batch data platform is a crucial element of its data infrastructure, supporting over 10,000 internal users, including data scientists, engineers, city operations staff, and business analysts. This system manages approximately 1.5 exabytes of data stored in \u003ca href=\"https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html\"\u003eApache Hadoop Distributed File System\u003c/a\u003e (HDFS) across two on-premises regions, handling over 500,000 \u003ca href=\"https://prestodb.io/\"\u003ePresto\u003c/a\u003e queries and 370,000 \u003ca href=\"https://spark.apache.org/\"\u003eApache Spark\u003c/a\u003e applications daily. To enhance scalability and streamline operations, Uber is migrating its batch data platform to Google Cloud GCP. The transition leverages Google Cloud Storage (GCS) for Uber’s data lake while moving the rest of the infrastructure to cloud-based Infrastructure as a Service (IaaS).\u003c/p\u003e\n\n\u003cp\u003eThe cloud migration is not without its challenges, particularly related to the storage and \u003ca href=\"https://cloud.google.com/security/products/iam\"\u003eIdentity and Access Management\u003c/a\u003e (IAM) limits imposed by cloud providers. One of Uber’s primary considerations is to efficiently map HDFS files to GCS buckets without overwhelming or underutilizing the available resources. Additionally, Uber must apply access controls appropriately within the storage hierarchy, ensuring the system remains secure without unnecessarily elevating user privileges. This migration also presents an opportunity to enhance the system by consolidating security groups and decentralizing data ownership. Under the new model, data belonging to specific organizations is stored in organization-specific buckets, allowing data ownership and access control to be more clearly delineated.\u003c/p\u003e\n\n\u003cp\u003eSecurity and governance have been central concerns throughout the migration. The goal is to map data based on its intended usage and lifecycle, categorizing it to ensure appropriate access controls are applied. Critical datasets that are used widely within the organization are stored in dedicated buckets with open access, while less critical data is stored separately with restricted access and lifecycle management policies. Additionally, the migration enables automated infrastructure setup, facilitating quicker provisioning of testing, staging, and production environments. This automation helps speed up new data analytics use cases and ensures multiple regions are ready for disaster recovery scenarios.\u003c/p\u003e\n\n\u003cp\u003eTo facilitate this massive shift, Uber developed a service called DataMesh, which is designed to abstract and manage the cloud infrastructure. DataMesh organizes data resources around the principles of data mesh, focusing on decentralized data ownership and domain-specific control. This service automates the reconciliation of data with cloud resources, pulling information from Uber’s internal repositories to ensure that data is correctly labeled, secured, and monitored. The DataMesh platform also manages the mapping of HDFS paths to their corresponding cloud-based paths, making the migration as seamless as possible for users and preventing disruption to existing workflows.\u003c/p\u003e\n\n\n\n\u003ccenter\u003e\u003cimg alt=\"\" data-src=\"news/2024/10/uber-batch-data-mesh/en/resources/1unnamed-1728638225767.jpeg\" src=\"https://imgopt.infoq.com/fit-in/3000x4000/filters:quality(85)/filters:no_upscale()/news/2024/10/uber-batch-data-mesh/en/resources/1unnamed-1728638225767.jpeg\" rel=\"share\"/\u003e\u003c/center\u003e\n\n\u003ccenter\u003e\u003csmall\u003eA logical view of the DataMesh components and the hierarchy.\u003c/small\u003e\u003c/center\u003e\n\n\u003cp\u003eOne significant challenge that Uber has faced during the migration process is the need to accommodate changes in data ownership and the limits set by GCS. Data ownership changes can occur due to team reorganizations or users reassigning assets. To address this, Uber implemented an automated process to monitor and reassign ownership when necessary, ensuring data remains securely stored and managed. Additionally, Uber optimized its data distribution to avoid hitting GCS storage limits, ensuring that heavily used tables are separated into their buckets to improve performance and make monitoring easier.\u003c/p\u003e\n\n\u003cp\u003eOther examples of data mesh implementation in the real word are:\u003c/p\u003e\n\n\u003cul\u003e\n\t\u003cli\u003e\u003ca href=\"https://www.informatica.com/about-us/customers/customer-success-stories/gilead.html\"\u003eGilead Sciences\u003c/a\u003e: a biopharmaceutical company, that developed a data mesh architecture. The implementation aimed to create a new organizational and operational model backed by data, enabling Gilead to engage in a cloud transformation initiative. The data mesh approach allowed Gilead to manage data as a product and adopt a cloud-first architecture.\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"https://youtube.com/watch?v=5btUaLPdaNk\"\u003eSaxo Bank\u003c/a\u003e: a financial services company, that implemented data mesh into a project aimed to decentralize data ownership and governance, enabling domain teams to manage their data products and provide real-time insights to the business.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eLooking to the future, Uber aims to further expand on its use of data mesh principles by building a platform that allows for self-governed data domains. This will simplify infrastructure management and enhance data governance, ultimately creating a more agile, secure, and cost-efficient data ecosystem. The cloud migration of Uber’s batch data platform is a significant undertaking, but through careful planning and the development of innovative tools like DataMesh, Uber is positioning itself for greater scalability, security, and operational efficiency in the cloud.\u003c/p\u003e\n\n\t\t\t\t\t\t\t\t\n\n\n\n\n\n\n\n\n\n  \n    \u003cdiv\u003e \n        \u003ch2\u003eAbout the Author\u003c/h2\u003e \n\n        \n            \n                \n            \n            \u003cdiv data-id=\"author-Claudio-Masolo\"\u003e\n                    \u003ch4\u003e\u003cstrong\u003eClaudio Masolo\u003c/strong\u003e\u003c/h4\u003e\n                    \n                \u003c/div\u003e\n        \n    \u003c/div\u003e\n\n\t\t\t\t\t\t\t\u003c/div\u003e\u003c/div\u003e",
  "readingTime": "6 min read",
  "publishedTime": "2024-10-12T00:00:00Z",
  "modifiedTime": null
}
