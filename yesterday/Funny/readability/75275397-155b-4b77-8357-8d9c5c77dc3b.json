{
  "id": "75275397-155b-4b77-8357-8d9c5c77dc3b",
  "title": "CodeSOD: Ancestry Dot Dumb",
  "link": "https://thedailywtf.com/articles/ancestry-dot-dumb",
  "description": "Damiano's company had more work than staff, and opted to hire a subcontractor. When hiring on a subcontractor, you could look for all sorts of things. Does their portfolio contain work similar to what you're asking them to do? What's the average experience of their team? What are the agreed upon code quality standards for the contract? You could do that, or you could hire the cheapest company. Guess which one Damiano's company did? If you're not sure, look at this code: if(jQuery('table').hasClass('views-view-grid')){ var EPid= \".views-view-grid\"; jQuery(EPid +' td').each(function(){ if(!jQuery(this).parent().parent().parent().parent().parent().hasClass('view-article-in-right-sidebar') \u0026\u0026 !jQuery(this).parent().parent().parent().parent().parent().hasClass('view-offers-in-right-sidebar')){ var title = jQuery(this).find(\"h2 a\").html(); var body = jQuery(this).find(\".field-name-body\").html(); var datetime = jQuery(this).find(\".field-name-field-event-date-time\").html(); var flyer = jQuery(this).find(\".field-name-field-flyer a\").attr(\"href\"); var imageThumb = jQuery(this).find(\".field-name-field-image-thumb\").html(); var readMore = 'jQuery(this).find(\"h2 a\").attr(\"href\")+'\" class=\"read-more\"\u003eREAD MORE'; var str = ''; if(title != null \u0026\u0026 title != \"\"){ if(imageThumb \u0026\u0026 imageThumb != \"\" \u0026\u0026 imageThumb != null) str = str + imageThumb; if(datetime \u0026\u0026 datetime != \"\" \u0026\u0026 datetime != null) str = str + ''+datetime+''; str = str + ''+title+''; str = str + body + ''; str = str + readMore; } if(flyer) str = str + ''\"\u003etype == \"events\"){ echo 'download the flyer'; }else {echo 'download the article';} ?\u003e'; str = str + ''; jQuery(this).children('.node').remove(); jQuery(this).append(str); } }); This was in a Drupal project. The developer appointed by the contractor didn't know Drupal at all, and opted to build all the new functionality by dropping big blobs of JavaScript code on top of it. There's so much to hate about this. We can start with the parent().parent() chains. Who doesn't love to make sure that your JavaScript code is extremely fragile against changes in the DOM, while at the same time making it hard to read or understand. I like that we create the EPid variable to avoid having a magic string inside our DOM query, only to still need to append a magic string to it. It hints at some programming by copy/paste. Then there's the pile of HTML-by-string-concatenation, which is always fun. But this couldn't be complete without this moment: type == \"events\"){ echo 'download the flyer'; }else {echo 'download the article';} ?\u003e Oh yeah, buried in this unreadable blob of JavaScript there's a little bonus PHP, just to make it a little spicier. The entire project came back from the contractor in an unusable state. The amount of re-work just to get it vaguely functional quickly outweighed any potential cost savings. And even after that work went it, it remained a buggy, unmaintainable mess. Did management learn their lesson? Absolutely not- they bragged about how cheaply they got the work done at every opportunity, and entered into a partnership agreement with the subcontractor. [Advertisement] Picking up NuGet is easy. Getting good at it takes time. ProGet costs less than half of Artifactory and is just as good. Our easy-to-read comparison page lays out the editions, features, and pricing of the different editions of ProGet and Artifactory.Learn More.",
  "author": "Remy Porter",
  "published": "Thu, 17 Oct 2024 06:30:00 GMT",
  "source": "http://syndication.thedailywtf.com/TheDailyWtf",
  "categories": [
    "CodeSOD"
  ],
  "byline": "Remy Porter",
  "length": 4045,
  "excerpt": "Damiano's company had more work than staff, and opted to hire a subcontractor. When hiring on a subcontractor, you could look for all sorts of things. Does their portfolio contain work similar to what you're asking them to do? What's the average experience of their team? What are the agreed upon code quality standards for the contract? You could do that, or you could hire the cheapest company.",
  "siteName": "The Daily WTF",
  "favicon": "",
  "text": "by in CodeSOD on 2024-10-17 Edit Remy PorterComputers were a mistake, which is why I'm trying to shoot them into space. Editor-in-Chief for TDWTF. Damiano's company had more work than staff, and opted to hire a subcontractor. When hiring on a subcontractor, you could look for all sorts of things. Does their portfolio contain work similar to what you're asking them to do? What's the average experience of their team? What are the agreed upon code quality standards for the contract? You could do that, or you could hire the cheapest company. Guess which one Damiano's company did? If you're not sure, look at this code: if(jQuery('table').hasClass('views-view-grid')){ var EPid= \".views-view-grid\"; jQuery(EPid +' td').each(function(){ if(!jQuery(this).parent().parent().parent().parent().parent().hasClass('view-article-in-right-sidebar') \u0026\u0026 !jQuery(this).parent().parent().parent().parent().parent().hasClass('view-offers-in-right-sidebar')){ var title = jQuery(this).find(\"h2 a\").html(); var body = jQuery(this).find(\".field-name-body\").html(); var datetime = jQuery(this).find(\".field-name-field-event-date-time\").html(); var flyer = jQuery(this).find(\".field-name-field-flyer a\").attr(\"href\"); var imageThumb = jQuery(this).find(\".field-name-field-image-thumb\").html(); var readMore = '\u003ca href=\"'+jQuery(this).find(\"h2 a\").attr(\"href\")+'\" class=\"read-more\"\u003eREAD MORE\u003c/a\u003e'; var str = '\u003cdiv class=\"thumb-listing listpage\"\u003e'; if(title != null \u0026\u0026 title != \"\"){ if(imageThumb \u0026\u0026 imageThumb != \"\" \u0026\u0026 imageThumb != null) str = str + imageThumb; if(datetime \u0026\u0026 datetime != \"\" \u0026\u0026 datetime != null) str = str + '\u003cdiv class=\"lp-date \"\u003e'+datetime+'\u003c/div\u003e'; str = str + '\u003cdiv class=\"lp-inner clear\"\u003e\u003cdiv class=\"lp-title\"\u003e'+title+'\u003c/div\u003e'; str = str + body + '\u003c/div\u003e\u003cdiv class=\"sep2\"\u003e\u003c/div\u003e'; str = str + readMore; } if(flyer) str = str + '\u003ca class=\"download-flyer\" href=\"'+flyer+'\"\u003e\u003c?php if(isset($node) \u0026\u0026 $node-\u003etype == \"events\"){ echo 'download the flyer'; }else {echo 'download the article';} ?\u003e\u003c/a\u003e'; str = str + '\u003c/div\u003e'; jQuery(this).children('.node').remove(); jQuery(this).append(str); } }); This was in a Drupal project. The developer appointed by the contractor didn't know Drupal at all, and opted to build all the new functionality by dropping big blobs of JavaScript code on top of it. There's so much to hate about this. We can start with the parent().parent() chains. Who doesn't love to make sure that your JavaScript code is extremely fragile against changes in the DOM, while at the same time making it hard to read or understand. I like that we create the EPid variable to avoid having a magic string inside our DOM query, only to still need to append a magic string to it. It hints at some programming by copy/paste. Then there's the pile of HTML-by-string-concatenation, which is always fun. But this couldn't be complete without this moment: \u003c?php if(isset($node) \u0026\u0026 $node-\u003etype == \"events\"){ echo 'download the flyer'; }else {echo 'download the article';} ?\u003e Oh yeah, buried in this unreadable blob of JavaScript there's a little bonus PHP, just to make it a little spicier. The entire project came back from the contractor in an unusable state. The amount of re-work just to get it vaguely functional quickly outweighed any potential cost savings. And even after that work went it, it remained a buggy, unmaintainable mess. Did management learn their lesson? Absolutely not- they bragged about how cheaply they got the work done at every opportunity, and entered into a partnership agreement with the subcontractor. [Advertisement] Picking up NuGet is easy. Getting good at it takes time. ProGet costs less than half of Artifactory and is just as good. Our easy-to-read comparison page lays out the editions, features, and pricing of the different editions of ProGet and Artifactory.Learn More.",
  "image": "https://s3.amazonaws.com/remy.jetpackshark.com/remy-thumb.jpg",
  "html": "\u003cdiv id=\"readability-page-1\" class=\"page\"\u003e\u003cdiv itemscope=\"\" itemtype=\"http://schema.org/Article\" id=\"article-page\"\u003e\n\n        \n        \u003cp\u003e\u003cspan\u003eby \n            in \u003ca itemprop=\"articleSection\" href=\"https://thedailywtf.com/series/code-sod\"\u003eCodeSOD\u003c/a\u003e\n            on \u003cspan itemprop=\"datePublished\" content=\"2024-10-17\"\u003e2024-10-17\u003c/span\u003e\n            \u003ca href=\"https://thedailywtf.com/admin/article/edit/10762\" rel=\"nofollow\"\u003eEdit\u003c/a\u003e\n        \u003c/span\u003e\u003c/p\u003e\n        \u003cdiv itemprop=\"author\" itemscope=\"\" itemtype=\"http://schema.org/Person\"\u003e\n            \u003cp\u003e\u003cimg itemprop=\"image\" src=\"https://s3.amazonaws.com/remy.jetpackshark.com/remy-thumb.jpg\"/\u003e\n            \u003ca itemprop=\"name\" href=\"https://thedailywtf.com/authors/remy-porter\"\u003eRemy Porter\u003c/a\u003e\u003c/p\u003e\u003cp itemprop=\"description\"\u003eComputers were a mistake, which is why I\u0026#39;m trying to shoot them into space. Editor-in-Chief for TDWTF.\u003c/p\u003e\n        \u003c/div\u003e\n        \u003cdiv itemprop=\"articleBody\"\u003e\n            \u003cp\u003e\u003cstrong\u003eDamiano\u003c/strong\u003e\u0026#39;s company had more work than staff, and opted to hire a subcontractor. When hiring on a subcontractor, you could look for all sorts of things. Does their portfolio contain work similar to what you\u0026#39;re asking them to do? What\u0026#39;s the average experience of their team? What are the agreed upon code quality standards for the contract?\u003c/p\u003e\n\u003cp\u003eYou could do that, or you could hire the cheapest company.\u003c/p\u003e\n\u003cp\u003eGuess which one Damiano\u0026#39;s company did? If you\u0026#39;re not sure, look at this code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u003cspan\u003eif\u003c/span\u003e(\u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003e\u0026#39;table\u0026#39;\u003c/span\u003e).\u003cspan\u003ehasClass\u003c/span\u003e(\u003cspan\u003e\u0026#39;views-view-grid\u0026#39;\u003c/span\u003e)){\n  \u003cspan\u003evar\u003c/span\u003e \u003cspan\u003eEPid\u003c/span\u003e= \u003cspan\u003e\u0026#34;.views-view-grid\u0026#34;\u003c/span\u003e;\n  \u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003eEPid\u003c/span\u003e +\u003cspan\u003e\u0026#39; td\u0026#39;\u003c/span\u003e).\u003cspan\u003eeach\u003c/span\u003e(\u003cspan\u003efunction\u003c/span\u003e(\u003cspan\u003e\u003c/span\u003e){\n\n   \u003cspan\u003eif\u003c/span\u003e(!\u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003ehasClass\u003c/span\u003e(\u003cspan\u003e\u0026#39;view-article-in-right-sidebar\u0026#39;\u003c/span\u003e) \u0026amp;\u0026amp; !\u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003eparent\u003c/span\u003e().\u003cspan\u003ehasClass\u003c/span\u003e(\u003cspan\u003e\u0026#39;view-offers-in-right-sidebar\u0026#39;\u003c/span\u003e)){\n    \u003cspan\u003evar\u003c/span\u003e title = \u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003efind\u003c/span\u003e(\u003cspan\u003e\u0026#34;h2 a\u0026#34;\u003c/span\u003e).\u003cspan\u003ehtml\u003c/span\u003e();\n\n    \u003cspan\u003evar\u003c/span\u003e body = \u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003efind\u003c/span\u003e(\u003cspan\u003e\u0026#34;.field-name-body\u0026#34;\u003c/span\u003e).\u003cspan\u003ehtml\u003c/span\u003e();\n    \u003cspan\u003evar\u003c/span\u003e datetime = \u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003efind\u003c/span\u003e(\u003cspan\u003e\u0026#34;.field-name-field-event-date-time\u0026#34;\u003c/span\u003e).\u003cspan\u003ehtml\u003c/span\u003e();\n    \u003cspan\u003evar\u003c/span\u003e flyer = \u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003efind\u003c/span\u003e(\u003cspan\u003e\u0026#34;.field-name-field-flyer a\u0026#34;\u003c/span\u003e).\u003cspan\u003eattr\u003c/span\u003e(\u003cspan\u003e\u0026#34;href\u0026#34;\u003c/span\u003e);\n    \u003cspan\u003evar\u003c/span\u003e imageThumb = \u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003efind\u003c/span\u003e(\u003cspan\u003e\u0026#34;.field-name-field-image-thumb\u0026#34;\u003c/span\u003e).\u003cspan\u003ehtml\u003c/span\u003e();\n    \u003cspan\u003evar\u003c/span\u003e readMore = \u003cspan\u003e\u0026#39;\u0026lt;a href=\u0026#34;\u0026#39;\u003c/span\u003e+\u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003efind\u003c/span\u003e(\u003cspan\u003e\u0026#34;h2 a\u0026#34;\u003c/span\u003e).\u003cspan\u003eattr\u003c/span\u003e(\u003cspan\u003e\u0026#34;href\u0026#34;\u003c/span\u003e)+\u003cspan\u003e\u0026#39;\u0026#34; class=\u0026#34;read-more\u0026#34;\u0026gt;READ MORE\u0026lt;/a\u0026gt;\u0026#39;\u003c/span\u003e;\n\n    \u003cspan\u003evar\u003c/span\u003e str = \u003cspan\u003e\u0026#39;\u0026lt;div class=\u0026#34;thumb-listing listpage\u0026#34;\u0026gt;\u0026#39;\u003c/span\u003e;\n\n    \u003cspan\u003eif\u003c/span\u003e(title != \u003cspan\u003enull\u003c/span\u003e \u0026amp;\u0026amp; title != \u003cspan\u003e\u0026#34;\u0026#34;\u003c/span\u003e){\n      \u003cspan\u003eif\u003c/span\u003e(imageThumb \u0026amp;\u0026amp; imageThumb != \u003cspan\u003e\u0026#34;\u0026#34;\u003c/span\u003e \u0026amp;\u0026amp; imageThumb != \u003cspan\u003enull\u003c/span\u003e)\n        str = str + imageThumb;\n      \u003cspan\u003eif\u003c/span\u003e(datetime \u0026amp;\u0026amp; datetime != \u003cspan\u003e\u0026#34;\u0026#34;\u003c/span\u003e \u0026amp;\u0026amp; datetime != \u003cspan\u003enull\u003c/span\u003e)\n        str = str + \u003cspan\u003e\u0026#39;\u0026lt;div class=\u0026#34;lp-date \u0026#34;\u0026gt;\u0026#39;\u003c/span\u003e+datetime+\u003cspan\u003e\u0026#39;\u0026lt;/div\u0026gt;\u0026#39;\u003c/span\u003e;\n      str = str + \u003cspan\u003e\u0026#39;\u0026lt;div class=\u0026#34;lp-inner clear\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;lp-title\u0026#34;\u0026gt;\u0026#39;\u003c/span\u003e+title+\u003cspan\u003e\u0026#39;\u0026lt;/div\u0026gt;\u0026#39;\u003c/span\u003e;\n      str = str + body + \u003cspan\u003e\u0026#39;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026#34;sep2\u0026#34;\u0026gt;\u0026lt;/div\u0026gt;\u0026#39;\u003c/span\u003e;\n      str = str + readMore;\n    }\n    \u003cspan\u003eif\u003c/span\u003e(flyer)\n      str = str + \u003cspan\u003e\u0026#39;\u0026lt;a class=\u0026#34;download-flyer\u0026#34; href=\u0026#34;\u0026#39;\u003c/span\u003e+flyer+\u003cspan\u003e\u0026#39;\u0026#34;\u0026gt;\u0026lt;?php if(isset($node) \u0026amp;\u0026amp; $node-\u0026gt;type == \u0026#34;events\u0026#34;){ echo \u0026#39;\u003c/span\u003edownload the flyer\u003cspan\u003e\u0026#39;; }else {echo \u0026#39;\u003c/span\u003edownload the article\u003cspan\u003e\u0026#39;;} ?\u0026gt;\u0026lt;/a\u0026gt;\u0026#39;\u003c/span\u003e;\n\n    str = str + \u003cspan\u003e\u0026#39;\u0026lt;/div\u0026gt;\u0026#39;\u003c/span\u003e;\n    \u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003echildren\u003c/span\u003e(\u003cspan\u003e\u0026#39;.node\u0026#39;\u003c/span\u003e).\u003cspan\u003eremove\u003c/span\u003e();\n\n    \u003cspan\u003ejQuery\u003c/span\u003e(\u003cspan\u003ethis\u003c/span\u003e).\u003cspan\u003eappend\u003c/span\u003e(str);\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis was in a Drupal project. The developer appointed by the contractor didn\u0026#39;t know Drupal at all, and opted to build all the new functionality by dropping big blobs of JavaScript code on top of it.\u003c/p\u003e\n\u003cp\u003eThere\u0026#39;s so much to hate about this. We can start with the \u003ccode\u003eparent().parent()\u003c/code\u003e chains. Who doesn\u0026#39;t love to make sure that your JavaScript code is extremely fragile against changes in the DOM, while at the same time making it hard to read or understand.\u003c/p\u003e\n\u003cp\u003eI like that we create the \u003ccode\u003eEPid\u003c/code\u003e variable to avoid having a magic string inside our DOM query, only to still need to append a magic string to it. It hints at some programming by copy/paste.\u003c/p\u003e\n\u003cp\u003eThen there\u0026#39;s the pile of HTML-by-string-concatenation, which is always fun.\u003c/p\u003e\n\u003cp\u003eBut this couldn\u0026#39;t be complete without this moment: \u003ccode\u003e\u0026lt;?php if(isset($node) \u0026amp;\u0026amp; $node-\u0026gt;type == \u0026#34;events\u0026#34;){ echo \u0026#39;download the flyer\u0026#39;; }else {echo \u0026#39;download the article\u0026#39;;} ?\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eOh yeah, buried in this unreadable blob of JavaScript there\u0026#39;s a little bonus PHP, just to make it a little spicier.\u003c/p\u003e\n\u003cp\u003eThe entire project came back from the contractor in an unusable state. The amount of re-work just to get it vaguely functional quickly outweighed any potential cost savings. And even after that work went it, it remained a buggy, unmaintainable mess.\u003c/p\u003e\n\u003cp\u003eDid management learn their lesson? Absolutely not- they bragged about how cheaply they got the work done at every opportunity, and entered into a partnership agreement with the subcontractor.\u003c/p\u003e\n\u003cp\u003e\n\t[Advertisement] Picking up \u003cb\u003eNuGet\u003c/b\u003e is easy. Getting good at it takes time. ProGet costs less than half of Artifactory and is just as good. Our easy-to-read comparison page lays out the editions, features, and pricing of the different editions of ProGet and Artifactory.\u003ca href=\"https://inedo.com/proget/proget-vs-jfrog-artifactory?utm_source=tdwtf\u0026amp;utm_medium=Footerad\u0026amp;utm_campaign=artifactory-guide\"\u003eLearn More.\u003c/a\u003e\n\n\u003c/p\u003e\n\n        \u003c/div\u003e\n\n        \n    \u003c/div\u003e\u003c/div\u003e",
  "readingTime": "5 min read",
  "publishedTime": "2024-10-17T06:30:00Z",
  "modifiedTime": null
}
